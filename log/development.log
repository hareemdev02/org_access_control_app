Started GET "/" for ::1 at 2025-07-09 19:05:35 +0500
  
ActiveRecord::NoDatabaseError (connection to server on socket "/tmp/.s.PGSQL.5432" failed: FATAL:  database "org_access_control_app_development" does not exist
):
  
activerecord (6.0.6.1) lib/active_record/connection_adapters/postgresql_adapter.rb:50:in `rescue in postgresql_connection'
activerecord (6.0.6.1) lib/active_record/connection_adapters/postgresql_adapter.rb:33:in `postgresql_connection'
activerecord (6.0.6.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:887:in `new_connection'
activerecord (6.0.6.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:931:in `checkout_new_connection'
activerecord (6.0.6.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:910:in `try_to_checkout_new_connection'
activerecord (6.0.6.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:871:in `acquire_connection'
activerecord (6.0.6.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:593:in `checkout'
activerecord (6.0.6.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:437:in `connection'
activerecord (6.0.6.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:1125:in `retrieve_connection'
activerecord (6.0.6.1) lib/active_record/connection_handling.rb:221:in `retrieve_connection'
activerecord (6.0.6.1) lib/active_record/connection_handling.rb:189:in `connection'
activerecord (6.0.6.1) lib/active_record/migration.rb:562:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
  [1m[35m (373.8ms)[0m  [1m[35mCREATE DATABASE "org_access_db" ENCODING = 'unicode'[0m
  [1m[35m (153.9ms)[0m  [1m[35mCREATE DATABASE "org_access_db_test" ENCODING = 'unicode'[0m
Started GET "/" for ::1 at 2025-07-09 19:20:05 +0500
Processing by Rails::WelcomeController#index as HTML
  Rendering /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/railties-6.0.6.1/lib/rails/templates/rails/welcome/index.html.erb
  Rendered /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/railties-6.0.6.1/lib/rails/templates/rails/welcome/index.html.erb (Duration: 8.4ms | Allocations: 466)
Completed 200 OK in 33ms (Views: 13.2ms | ActiveRecord: 0.0ms | Allocations: 4287)


  [1m[35m (10.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1458885612628655505)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrganizations (20240101000001)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" bigserial primary key, "name" character varying NOT NULL, "domain" character varying NOT NULL, "description" text, "participation_type" character varying DEFAULT 'private', "active" boolean DEFAULT TRUE, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_name" ON "organizations"  ("name")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_domain" ON "organizations"  ("domain")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_participation_type" ON "organizations"  ("participation_type")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_active" ON "organizations"  ("active")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000001"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20240101000002)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "date_of_birth" date NOT NULL, "age" integer, "phone_number" character varying, "bio" text, "avatar_url" character varying, "organization_id" bigint, "email_verified" boolean DEFAULT FALSE, "phone_verified" boolean DEFAULT FALSE, "identity_verified" boolean DEFAULT FALSE, "active" boolean DEFAULT TRUE, "last_login_at" timestamp, "last_login_ip" inet, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d7b9ff90af"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_organization_id" ON "users"  ("organization_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_age" ON "users"  ("age")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_active" ON "users"  ("active")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email_verified" ON "users"  ("email_verified")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_identity_verified" ON "users"  ("identity_verified")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000002"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRoles (20240101000003)
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "roles" ("id" bigserial primary key, "name" character varying, "resource_type" character varying, "resource_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (4.9ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_resource_type_and_resource_id" ON "roles"  ("resource_type", "resource_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "users_roles" ("user_id" bigint, "role_id" bigint)[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id" ON "users_roles"  ("user_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_role_id" ON "users_roles"  ("role_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_name_and_resource_type_and_resource_id" ON "roles"  ("name", "resource_type", "resource_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id_and_role_id" ON "users_roles"  ("user_id", "role_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000003"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserRoles (20240101000004)
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.9ms)[0m  [1m[35mCREATE TABLE "user_roles" ("id" bigserial primary key, "user_id" bigint NOT NULL, "role_id" bigint NOT NULL, "assigned_at" timestamp NOT NULL, "assigned_by" character varying, "notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_318345354e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_3369e0d5fc"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")
)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_user_id" ON "user_roles"  ("user_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_role_id" ON "user_roles"  ("role_id")[0m
  [1m[35m (15.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_user_roles_on_user_id_and_role_id" ON "user_roles"  ("user_id", "role_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_assigned_at" ON "user_roles"  ("assigned_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000004"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipationRules (20240101000005)
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (13.0ms)[0m  [1m[35mCREATE TABLE "participation_rules" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "age_group" character varying NOT NULL, "minimum_age" integer NOT NULL, "maximum_age" integer NOT NULL, "enabled" boolean DEFAULT TRUE, "requires_parental_consent" boolean DEFAULT FALSE, "content_filtering_level" character varying DEFAULT 'minimal', "participation_restrictions" jsonb DEFAULT '[]', "description" text, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f4e4065e2e"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_organization_id" ON "participation_rules"  ("organization_id")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_participation_rules_on_organization_id_and_age_group" ON "participation_rules"  ("organization_id", "age_group")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_enabled" ON "participation_rules"  ("enabled")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_requires_parental_consent" ON "participation_rules"  ("requires_parental_consent")[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_content_filtering_level" ON "participation_rules"  ("content_filtering_level")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000005"]]
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParentalConsents (20240101000006)
  [1m[35m (5.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (22.8ms)[0m  [1m[35mCREATE TABLE "parental_consents" ("id" bigserial primary key, "parent_id" bigint NOT NULL, "child_id" bigint NOT NULL, "approved" boolean DEFAULT FALSE, "consent_date" date NOT NULL, "expiry_date" date NOT NULL, "approved_by_id" bigint, "approved_at" timestamp, "revoked_by_id" bigint, "revoked_at" timestamp, "notes" text, "consent_details" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1fd0aaaf75"
FOREIGN KEY ("parent_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_28627dc0dc"
FOREIGN KEY ("child_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_32eaa27bbd"
FOREIGN KEY ("approved_by_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_1eec64c65c"
FOREIGN KEY ("revoked_by_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_parent_id" ON "parental_consents"  ("parent_id")[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_child_id" ON "parental_consents"  ("child_id")[0m
  [1m[35m (9.2ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_approved_by_id" ON "parental_consents"  ("approved_by_id")[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_revoked_by_id" ON "parental_consents"  ("revoked_by_id")[0m
  [1m[35m (3.9ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(1458885612628655505)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1458885612628655505)[0m
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateParentalConsents (20240101000006)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (17.6ms)[0m  [1m[35mCREATE TABLE "parental_consents" ("id" bigserial primary key, "parent_id" bigint NOT NULL, "child_id" bigint NOT NULL, "approved" boolean DEFAULT FALSE, "consent_date" date NOT NULL, "expiry_date" date NOT NULL, "approved_by_id" bigint, "approved_at" timestamp, "revoked_by_id" bigint, "revoked_at" timestamp, "notes" text, "consent_details" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1fd0aaaf75"
FOREIGN KEY ("parent_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_28627dc0dc"
FOREIGN KEY ("child_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_32eaa27bbd"
FOREIGN KEY ("approved_by_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_1eec64c65c"
FOREIGN KEY ("revoked_by_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_parental_consents_on_child_id" ON "parental_consents"  ("child_id")[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_approved" ON "parental_consents"  ("approved")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_expiry_date" ON "parental_consents"  ("expiry_date")[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_consent_date" ON "parental_consents"  ("consent_date")[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000006"]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrganizationAnalytics (20240101000007)
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.1ms)[0m  [1m[35mCREATE TABLE "organization_analytics" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "total_members" integer DEFAULT 0 NOT NULL, "admin_count" integer DEFAULT 0 NOT NULL, "age_group_breakdown" jsonb DEFAULT '{}', "participation_rate" decimal(5,2) DEFAULT 0.0 NOT NULL, "generated_at" timestamp NOT NULL, "report_period" character varying, "period_start" timestamp, "period_end" timestamp, "new_members_count" integer DEFAULT 0, "active_members_count" integer DEFAULT 0, "active_users_7_days" integer DEFAULT 0, "active_users_30_days" integer DEFAULT 0, "new_members_this_month" integer DEFAULT 0, "members_by_role" jsonb DEFAULT '{}', "average_age" decimal(4,1), "minor_percentage" decimal(5,2), "additional_metrics" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_aaf02dc4fd"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_organization_id" ON "organization_analytics"  ("organization_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_generated_at" ON "organization_analytics"  ("generated_at")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_report_period" ON "organization_analytics"  ("report_period")[0m
  [1m[35m (4.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT pg_advisory_unlock(1458885612628655505)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1458885612628655505)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrganizationAnalytics (20240101000007)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.9ms)[0m  [1m[35mCREATE TABLE "organization_analytics" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "total_members" integer DEFAULT 0 NOT NULL, "admin_count" integer DEFAULT 0 NOT NULL, "age_group_breakdown" jsonb DEFAULT '{}', "participation_rate" decimal(5,2) DEFAULT 0.0 NOT NULL, "generated_at" timestamp NOT NULL, "report_period" character varying, "period_start" timestamp, "period_end" timestamp, "new_members_count" integer DEFAULT 0, "active_members_count" integer DEFAULT 0, "active_users_7_days" integer DEFAULT 0, "active_users_30_days" integer DEFAULT 0, "new_members_this_month" integer DEFAULT 0, "members_by_role" jsonb DEFAULT '{}', "average_age" decimal(4,1), "minor_percentage" decimal(5,2), "additional_metrics" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_aaf02dc4fd"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_organization_id" ON "organization_analytics"  ("organization_id")[0m
  [1m[35m (5.7ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_generated_at" ON "organization_analytics"  ("generated_at")[0m
  [1m[35m (7.3ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_report_period" ON "organization_analytics"  ("report_period")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_org_analytics_on_org_id_and_generated_at" ON "organization_analytics"  ("organization_id", "generated_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000007"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (4.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (3.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2025-07-09 14:50:26.622917"], ["updated_at", "2025-07-09 14:50:26.622917"]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(1458885612628655505)[0m
  [1m[35m (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (64.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[36mRole Load (2.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles"[0m
  [1m[36mParticipationRule Load (3.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules"[0m
  [1m[36mParentalConsent Load (3.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[36mOrganizationAnalytics Load (3.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "techcorp.com"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "TechCorp Inc."], ["domain", "techcorp.com"], ["description", "A technology company focused on innovation and collaboration"], ["created_at", "2025-07-09 14:50:52.857945"], ["updated_at", "2025-07-09 14:50:52.857945"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 14:50:52.903466"], ["updated_at", "2025-07-09 14:50:52.903466"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.0ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 14:50:52.911660"], ["updated_at", "2025-07-09 14:50:52.911660"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 14:50:52.918433"], ["updated_at", "2025-07-09 14:50:52.918433"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 14:50:52.922972"], ["updated_at", "2025-07-09 14:50:52.922972"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 14:50:52.927825"], ["updated_at", "2025-07-09 14:50:52.927825"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "youthacademy.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Youth Academy"], ["domain", "youthacademy.org"], ["description", "Educational organization for young learners"], ["participation_type", "restricted"], ["created_at", "2025-07-09 14:50:52.938028"], ["updated_at", "2025-07-09 14:50:52.938028"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 14:50:52.943158"], ["updated_at", "2025-07-09 14:50:52.943158"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 14:50:52.950400"], ["updated_at", "2025-07-09 14:50:52.950400"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 14:50:52.958387"], ["updated_at", "2025-07-09 14:50:52.958387"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.9ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 14:50:52.965706"], ["updated_at", "2025-07-09 14:50:52.965706"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 14:50:52.974870"], ["updated_at", "2025-07-09 14:50:52.974870"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Community Center"], ["domain", "communitycenter.org"], ["description", "Public community organization open to all ages"], ["participation_type", "public"], ["created_at", "2025-07-09 14:50:52.990638"], ["updated_at", "2025-07-09 14:50:52.990638"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.3ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 14:50:52.997208"], ["updated_at", "2025-07-09 14:50:52.997208"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 14:50:53.007723"], ["updated_at", "2025-07-09 14:50:53.007723"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 14:50:53.016194"], ["updated_at", "2025-07-09 14:50:53.016194"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 14:50:53.027406"], ["updated_at", "2025-07-09 14:50:53.027406"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.8ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 14:50:53.036917"], ["updated_at", "2025-07-09 14:50:53.036917"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.9ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "admin@techcorp.com"], ["encrypted_password", "$2a$12$JZfUWFO2tZ8gWJNAbnm1cOJj2N/yMapGJWLkpQw.Pkf8Q/PJ6JD/i"], ["first_name", "John"], ["last_name", "Admin"], ["date_of_birth", "1990-07-09"], ["age", 35], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 14:50:54.062085"], ["updated_at", "2025-07-09 14:50:54.062085"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "manager@techcorp.com"], ["encrypted_password", "$2a$12$3iY6WksQ9DeXklc3FmelN./RRt6KJWHBU2VDjFFxoOkb.xS0KQuRG"], ["first_name", "Sarah"], ["last_name", "Manager"], ["date_of_birth", "1997-07-09"], ["age", 28], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 14:50:54.371463"], ["updated_at", "2025-07-09 14:50:54.371463"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teacher@youthacademy.org"], ["encrypted_password", "$2a$12$1Rdc0f4wULNogQU4Un0JNO3Rpo9gVHRff2IrHwjwkCSnX5QPMU44."], ["first_name", "Michael"], ["last_name", "Teacher"], ["date_of_birth", "1983-07-09"], ["age", 42], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 14:50:54.678857"], ["updated_at", "2025-07-09 14:50:54.678857"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent1@example.com"], ["encrypted_password", "$2a$12$GgqPYb4iacQcEWLzZglYbeTNT/dxVSwDPUo7WEAYI.Q2tgfIWkxdu"], ["first_name", "Lisa"], ["last_name", "Parent"], ["date_of_birth", "1985-07-09"], ["age", 40], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 14:50:54.983992"], ["updated_at", "2025-07-09 14:50:54.983992"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent2@example.com"], ["encrypted_password", "$2a$12$3YhBZSeuMDIC9ZS4WJX2veJYvYX.o1Dm8IBy/Um6JZZoPEKDjdguC"], ["first_name", "David"], ["last_name", "Guardian"], ["date_of_birth", "1987-07-09"], ["age", 38], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 14:50:55.289435"], ["updated_at", "2025-07-09 14:50:55.289435"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen1@youthacademy.org"], ["encrypted_password", "$2a$12$Zr.xLoeF9j6Kk8x6H3n0tOv6g9Htee2UqEUHdDECWU4xdX3Xpjqdq"], ["first_name", "Alex"], ["last_name", "Teen"], ["date_of_birth", "2010-07-09"], ["age", 15], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 14:50:55.595355"], ["updated_at", "2025-07-09 14:50:55.595355"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen2@communitycenter.org"], ["encrypted_password", "$2a$12$UhQD3hfOoG5pE8NugtNKEuAwS1yPquLOi0twowTR7Kd3nyDJlm7pC"], ["first_name", "Jordan"], ["last_name", "Student"], ["date_of_birth", "2009-07-09"], ["age", 16], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 14:50:55.904902"], ["updated_at", "2025-07-09 14:50:55.904902"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child1@youthacademy.org"], ["encrypted_password", "$2a$12$fJAEabik0A6NMc5dUzWsrOEfeEnCfHj/GCWjPR/ZQTPodi.iJ5Z.."], ["first_name", "Emma"], ["last_name", "Child"], ["date_of_birth", "2015-07-09"], ["age", 10], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 14:50:56.205108"], ["updated_at", "2025-07-09 14:50:56.205108"]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child2@communitycenter.org"], ["encrypted_password", "$2a$12$HVlSf0LHW7lGEFgkoVqtTO1nF3jSuK4jehHKBsFbuBdr94FzRqag."], ["first_name", "Lucas"], ["last_name", "Young"], ["date_of_birth", "2017-07-09"], ["age", 8], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 14:50:56.508296"], ["updated_at", "2025-07-09 14:50:56.508296"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", nil], ["LIMIT", 1]]
  ↳ app/models/user.rb:59:in `add_role'
  [1m[36mUserRole Load (3.2ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `add_role'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `add_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `add_role'
  [1m[36mUserRole Create (2.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 1], ["created_at", "2025-07-09 14:50:56.594171"], ["updated_at", "2025-07-09 14:50:56.594171"]]
  ↳ app/models/user.rb:60:in `add_role'
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/models/user.rb:60:in `add_role'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5051.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5052.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[35m (0.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db_test"[0m
  [1m[35m (234.3ms)[0m  [1m[35mCREATE DATABASE "org_access_db" ENCODING = 'unicode'[0m
  [1m[35m (152.6ms)[0m  [1m[35mCREATE DATABASE "org_access_db_test" ENCODING = 'unicode'[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1458885612628655505)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrganizations (20240101000001)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" bigserial primary key, "name" character varying NOT NULL, "domain" character varying NOT NULL, "description" text, "participation_type" character varying DEFAULT 'private', "active" boolean DEFAULT TRUE, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_name" ON "organizations"  ("name")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_domain" ON "organizations"  ("domain")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_participation_type" ON "organizations"  ("participation_type")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_active" ON "organizations"  ("active")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000001"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20240101000002)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.4ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "date_of_birth" date NOT NULL, "age" integer, "phone_number" character varying, "bio" text, "avatar_url" character varying, "organization_id" bigint, "email_verified" boolean DEFAULT FALSE, "phone_verified" boolean DEFAULT FALSE, "identity_verified" boolean DEFAULT FALSE, "active" boolean DEFAULT TRUE, "last_login_at" timestamp, "last_login_ip" inet, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d7b9ff90af"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_organization_id" ON "users"  ("organization_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_age" ON "users"  ("age")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_active" ON "users"  ("active")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email_verified" ON "users"  ("email_verified")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_identity_verified" ON "users"  ("identity_verified")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000002"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRoles (20240101000003)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "roles" ("id" bigserial primary key, "name" character varying, "resource_type" character varying, "resource_id" uuid, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_resource_type_and_resource_id" ON "roles"  ("resource_type", "resource_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE TABLE "users_roles" ("user_id" bigint, "role_id" bigint)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id" ON "users_roles"  ("user_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_role_id" ON "users_roles"  ("role_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_name_and_resource_type_and_resource_id" ON "roles"  ("name", "resource_type", "resource_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id_and_role_id" ON "users_roles"  ("user_id", "role_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000003"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserRoles (20240101000004)
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "user_roles" ("id" bigserial primary key, "user_id" bigint NOT NULL, "role_id" bigint NOT NULL, "assigned_at" timestamp NOT NULL, "assigned_by" character varying, "notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_318345354e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_3369e0d5fc"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")
)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_user_id" ON "user_roles"  ("user_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_role_id" ON "user_roles"  ("role_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_user_roles_on_user_id_and_role_id" ON "user_roles"  ("user_id", "role_id")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_assigned_at" ON "user_roles"  ("assigned_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000004"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipationRules (20240101000005)
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE TABLE "participation_rules" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "age_group" character varying NOT NULL, "minimum_age" integer NOT NULL, "maximum_age" integer NOT NULL, "enabled" boolean DEFAULT TRUE, "requires_parental_consent" boolean DEFAULT FALSE, "content_filtering_level" character varying DEFAULT 'minimal', "participation_restrictions" jsonb DEFAULT '[]', "description" text, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f4e4065e2e"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_organization_id" ON "participation_rules"  ("organization_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_participation_rules_on_organization_id_and_age_group" ON "participation_rules"  ("organization_id", "age_group")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_enabled" ON "participation_rules"  ("enabled")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_requires_parental_consent" ON "participation_rules"  ("requires_parental_consent")[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_content_filtering_level" ON "participation_rules"  ("content_filtering_level")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000005"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParentalConsents (20240101000006)
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "parental_consents" ("id" bigserial primary key, "parent_id" bigint NOT NULL, "child_id" bigint NOT NULL, "approved" boolean DEFAULT FALSE, "consent_date" date NOT NULL, "expiry_date" date NOT NULL, "approved_by_id" bigint, "approved_at" timestamp, "revoked_by_id" bigint, "revoked_at" timestamp, "notes" text, "consent_details" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1fd0aaaf75"
FOREIGN KEY ("parent_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_28627dc0dc"
FOREIGN KEY ("child_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_32eaa27bbd"
FOREIGN KEY ("approved_by_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_1eec64c65c"
FOREIGN KEY ("revoked_by_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_parental_consents_on_child_id" ON "parental_consents"  ("child_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_approved" ON "parental_consents"  ("approved")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_expiry_date" ON "parental_consents"  ("expiry_date")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_consent_date" ON "parental_consents"  ("consent_date")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000006"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrganizationAnalytics (20240101000007)
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.2ms)[0m  [1m[35mCREATE TABLE "organization_analytics" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "total_members" integer DEFAULT 0 NOT NULL, "admin_count" integer DEFAULT 0 NOT NULL, "age_group_breakdown" jsonb DEFAULT '{}', "participation_rate" decimal(5,2) DEFAULT 0.0 NOT NULL, "generated_at" timestamp NOT NULL, "report_period" character varying, "period_start" timestamp, "period_end" timestamp, "new_members_count" integer DEFAULT 0, "active_members_count" integer DEFAULT 0, "active_users_7_days" integer DEFAULT 0, "active_users_30_days" integer DEFAULT 0, "new_members_this_month" integer DEFAULT 0, "members_by_role" jsonb DEFAULT '{}', "average_age" decimal(4,1), "minor_percentage" decimal(5,2), "additional_metrics" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_aaf02dc4fd"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (2.6ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_organization_id" ON "organization_analytics"  ("organization_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_generated_at" ON "organization_analytics"  ("generated_at")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_report_period" ON "organization_analytics"  ("report_period")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_org_analytics_on_org_id_and_generated_at" ON "organization_analytics"  ("organization_id", "generated_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000007"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.2ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2025-07-09 14:54:22.681276"], ["updated_at", "2025-07-09 14:54:22.681276"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1458885612628655505)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (1.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles"[0m
  [1m[36mParticipationRule Load (1.1ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules"[0m
  [1m[36mParentalConsent Load (1.0ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[36mOrganizationAnalytics Load (1.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "techcorp.com"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.4ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "TechCorp Inc."], ["domain", "techcorp.com"], ["description", "A technology company focused on innovation and collaboration"], ["created_at", "2025-07-09 14:54:33.169181"], ["updated_at", "2025-07-09 14:54:33.169181"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (3.0ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 14:54:33.215969"], ["updated_at", "2025-07-09 14:54:33.215969"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 14:54:33.226684"], ["updated_at", "2025-07-09 14:54:33.226684"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.0ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 14:54:33.234091"], ["updated_at", "2025-07-09 14:54:33.234091"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 14:54:33.240810"], ["updated_at", "2025-07-09 14:54:33.240810"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 14:54:33.245620"], ["updated_at", "2025-07-09 14:54:33.245620"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "youthacademy.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Youth Academy"], ["domain", "youthacademy.org"], ["description", "Educational organization for young learners"], ["participation_type", "restricted"], ["created_at", "2025-07-09 14:54:33.255810"], ["updated_at", "2025-07-09 14:54:33.255810"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.8ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 14:54:33.260879"], ["updated_at", "2025-07-09 14:54:33.260879"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 14:54:33.269774"], ["updated_at", "2025-07-09 14:54:33.269774"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 14:54:33.276082"], ["updated_at", "2025-07-09 14:54:33.276082"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 14:54:33.283271"], ["updated_at", "2025-07-09 14:54:33.283271"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 14:54:33.291906"], ["updated_at", "2025-07-09 14:54:33.291906"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.4ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Community Center"], ["domain", "communitycenter.org"], ["description", "Public community organization open to all ages"], ["participation_type", "public"], ["created_at", "2025-07-09 14:54:33.308126"], ["updated_at", "2025-07-09 14:54:33.308126"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.9ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 14:54:33.315412"], ["updated_at", "2025-07-09 14:54:33.315412"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 14:54:33.324474"], ["updated_at", "2025-07-09 14:54:33.324474"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 14:54:33.331103"], ["updated_at", "2025-07-09 14:54:33.331103"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 14:54:33.339277"], ["updated_at", "2025-07-09 14:54:33.339277"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.8ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 14:54:33.348275"], ["updated_at", "2025-07-09 14:54:33.348275"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "admin@techcorp.com"], ["encrypted_password", "$2a$12$wCyHQ073cb0PU04XKqZ7D.T9s1RpbLN9iGEeD/0sN/MM3chvlkb9."], ["first_name", "John"], ["last_name", "Admin"], ["date_of_birth", "1990-07-09"], ["age", 35], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 14:54:33.724216"], ["updated_at", "2025-07-09 14:54:33.724216"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "manager@techcorp.com"], ["encrypted_password", "$2a$12$6utYpB4mJfml6Ki6vPneNOEJ8XIlKhUZrM8bCaK0LHWwPWcSliw.O"], ["first_name", "Sarah"], ["last_name", "Manager"], ["date_of_birth", "1997-07-09"], ["age", 28], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 14:54:34.031270"], ["updated_at", "2025-07-09 14:54:34.031270"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teacher@youthacademy.org"], ["encrypted_password", "$2a$12$H2dW9RHtD19T9i55dFk/z.Un5BhVfB9L0FQPgh4GIog3cKoe.fHJK"], ["first_name", "Michael"], ["last_name", "Teacher"], ["date_of_birth", "1983-07-09"], ["age", 42], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 14:54:34.337789"], ["updated_at", "2025-07-09 14:54:34.337789"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent1@example.com"], ["encrypted_password", "$2a$12$yA.12opo2EyQyXGON0ycFur3UeKBVNtVd/wICdqNF2FQc64PtHkTi"], ["first_name", "Lisa"], ["last_name", "Parent"], ["date_of_birth", "1985-07-09"], ["age", 40], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 14:54:34.642955"], ["updated_at", "2025-07-09 14:54:34.642955"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent2@example.com"], ["encrypted_password", "$2a$12$GBSDusY3BAd86k0Y7ES4KO.17WaAA2VVDQOXU9qOQVAzbdj4KZzw2"], ["first_name", "David"], ["last_name", "Guardian"], ["date_of_birth", "1987-07-09"], ["age", 38], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 14:54:34.949086"], ["updated_at", "2025-07-09 14:54:34.949086"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen1@youthacademy.org"], ["encrypted_password", "$2a$12$9eHpS6M7kNZMSIGaeR0epONBrfiOw4KjiA7kuTor32yD/mLByEtUW"], ["first_name", "Alex"], ["last_name", "Teen"], ["date_of_birth", "2010-07-09"], ["age", 15], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 14:54:35.254478"], ["updated_at", "2025-07-09 14:54:35.254478"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen2@communitycenter.org"], ["encrypted_password", "$2a$12$/yxVHofpaen9U5acq/1CwuFy3SQKBRLqY1dqNpapn2G1xxPJ/lJ6K"], ["first_name", "Jordan"], ["last_name", "Student"], ["date_of_birth", "2009-07-09"], ["age", 16], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 14:54:35.561039"], ["updated_at", "2025-07-09 14:54:35.561039"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child1@youthacademy.org"], ["encrypted_password", "$2a$12$oP14JcVK45dyS1Q.irsKmuJLBDEMEA50qREnK/Vgj0VIchCQo1n4O"], ["first_name", "Emma"], ["last_name", "Child"], ["date_of_birth", "2015-07-09"], ["age", 10], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 14:54:35.866815"], ["updated_at", "2025-07-09 14:54:35.866815"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child2@communitycenter.org"], ["encrypted_password", "$2a$12$Aepv/1tfGEmulDYCDGowe.5VCNAfiiMQIhCBAr9FxVylfgTjhQyOm"], ["first_name", "Lucas"], ["last_name", "Young"], ["date_of_birth", "2017-07-09"], ["age", 8], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 14:54:36.171986"], ["updated_at", "2025-07-09 14:54:36.171986"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", nil], ["LIMIT", 1]]
  ↳ app/models/user.rb:59:in `add_role'
  [1m[36mUserRole Load (0.9ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `add_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:60:in `add_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:60:in `add_role'
  [1m[36mUserRole Create (1.1ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 1], ["created_at", "2025-07-09 14:54:36.239584"], ["updated_at", "2025-07-09 14:54:36.239584"]]
  ↳ app/models/user.rb:60:in `add_role'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/models/user.rb:60:in `add_role'
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (260.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[35m (161.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db_test"[0m
  [1m[35m (204.6ms)[0m  [1m[35mCREATE DATABASE "org_access_db" ENCODING = 'unicode'[0m
  [1m[35m (166.2ms)[0m  [1m[35mCREATE DATABASE "org_access_db_test" ENCODING = 'unicode'[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1458885612628655505)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrganizations (20240101000001)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" bigserial primary key, "name" character varying NOT NULL, "domain" character varying NOT NULL, "description" text, "participation_type" character varying DEFAULT 'private', "active" boolean DEFAULT TRUE, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_name" ON "organizations"  ("name")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_domain" ON "organizations"  ("domain")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_participation_type" ON "organizations"  ("participation_type")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_active" ON "organizations"  ("active")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000001"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20240101000002)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "date_of_birth" date NOT NULL, "age" integer, "phone_number" character varying, "bio" text, "avatar_url" character varying, "organization_id" bigint, "email_verified" boolean DEFAULT FALSE, "phone_verified" boolean DEFAULT FALSE, "identity_verified" boolean DEFAULT FALSE, "active" boolean DEFAULT TRUE, "last_login_at" timestamp, "last_login_ip" inet, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d7b9ff90af"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_organization_id" ON "users"  ("organization_id")[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_age" ON "users"  ("age")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_active" ON "users"  ("active")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email_verified" ON "users"  ("email_verified")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_identity_verified" ON "users"  ("identity_verified")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000002"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRoles (20240101000003)
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.1ms)[0m  [1m[35mCREATE TABLE "roles" ("id" bigserial primary key, "name" character varying, "resource_type" character varying, "resource_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_resource_type_and_resource_id" ON "roles"  ("resource_type", "resource_id")[0m
  [1m[35m (0.9ms)[0m  [1m[35mCREATE TABLE "users_roles" ("user_id" bigint, "role_id" bigint)[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id" ON "users_roles"  ("user_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_role_id" ON "users_roles"  ("role_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_name_and_resource_type_and_resource_id" ON "roles"  ("name", "resource_type", "resource_id")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id_and_role_id" ON "users_roles"  ("user_id", "role_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000003"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserRoles (20240101000004)
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE TABLE "user_roles" ("id" bigserial primary key, "user_id" bigint NOT NULL, "role_id" bigint NOT NULL, "assigned_at" timestamp NOT NULL, "assigned_by" character varying, "notes" text, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_318345354e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_3369e0d5fc"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")
)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_user_id" ON "user_roles"  ("user_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_role_id" ON "user_roles"  ("role_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_user_roles_on_user_id_and_role_id" ON "user_roles"  ("user_id", "role_id")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_assigned_at" ON "user_roles"  ("assigned_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000004"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipationRules (20240101000005)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.2ms)[0m  [1m[35mCREATE TABLE "participation_rules" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "age_group" character varying NOT NULL, "minimum_age" integer NOT NULL, "maximum_age" integer NOT NULL, "enabled" boolean DEFAULT TRUE, "requires_parental_consent" boolean DEFAULT FALSE, "content_filtering_level" character varying DEFAULT 'minimal', "participation_restrictions" jsonb DEFAULT '[]', "description" text, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f4e4065e2e"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_organization_id" ON "participation_rules"  ("organization_id")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_participation_rules_on_organization_id_and_age_group" ON "participation_rules"  ("organization_id", "age_group")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_enabled" ON "participation_rules"  ("enabled")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_requires_parental_consent" ON "participation_rules"  ("requires_parental_consent")[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_content_filtering_level" ON "participation_rules"  ("content_filtering_level")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000005"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParentalConsents (20240101000006)
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.8ms)[0m  [1m[35mCREATE TABLE "parental_consents" ("id" bigserial primary key, "parent_id" bigint NOT NULL, "child_id" bigint NOT NULL, "approved" boolean DEFAULT FALSE, "consent_date" date NOT NULL, "expiry_date" date NOT NULL, "approved_by_id" bigint, "approved_at" timestamp, "revoked_by_id" bigint, "revoked_at" timestamp, "notes" text, "consent_details" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1fd0aaaf75"
FOREIGN KEY ("parent_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_28627dc0dc"
FOREIGN KEY ("child_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_32eaa27bbd"
FOREIGN KEY ("approved_by_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_1eec64c65c"
FOREIGN KEY ("revoked_by_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_parental_consents_on_child_id" ON "parental_consents"  ("child_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_approved" ON "parental_consents"  ("approved")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_expiry_date" ON "parental_consents"  ("expiry_date")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_consent_date" ON "parental_consents"  ("consent_date")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000006"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrganizationAnalytics (20240101000007)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (9.0ms)[0m  [1m[35mCREATE TABLE "organization_analytics" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "total_members" integer DEFAULT 0 NOT NULL, "admin_count" integer DEFAULT 0 NOT NULL, "age_group_breakdown" jsonb DEFAULT '{}', "participation_rate" decimal(5,2) DEFAULT 0.0 NOT NULL, "generated_at" timestamp NOT NULL, "report_period" character varying, "period_start" timestamp, "period_end" timestamp, "new_members_count" integer DEFAULT 0, "active_members_count" integer DEFAULT 0, "active_users_7_days" integer DEFAULT 0, "active_users_30_days" integer DEFAULT 0, "new_members_this_month" integer DEFAULT 0, "members_by_role" jsonb DEFAULT '{}', "average_age" decimal(4,1), "minor_percentage" decimal(5,2), "additional_metrics" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_aaf02dc4fd"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_organization_id" ON "organization_analytics"  ("organization_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_generated_at" ON "organization_analytics"  ("generated_at")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_report_period" ON "organization_analytics"  ("report_period")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_org_analytics_on_org_id_and_generated_at" ON "organization_analytics"  ("organization_id", "generated_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000007"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2025-07-09 15:10:32.055994"], ["updated_at", "2025-07-09 15:10:32.055994"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(1458885612628655505)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (3.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles"[0m
  [1m[36mParticipationRule Load (4.2ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules"[0m
  [1m[36mParentalConsent Load (3.6ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[36mOrganizationAnalytics Load (3.7ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "techcorp.com"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "TechCorp Inc."], ["domain", "techcorp.com"], ["description", "A technology company focused on innovation and collaboration"], ["created_at", "2025-07-09 15:10:41.090301"], ["updated_at", "2025-07-09 15:10:41.090301"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:10:41.142064"], ["updated_at", "2025-07-09 15:10:41.142064"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:10:41.151413"], ["updated_at", "2025-07-09 15:10:41.151413"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:10:41.156779"], ["updated_at", "2025-07-09 15:10:41.156779"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:10:41.161494"], ["updated_at", "2025-07-09 15:10:41.161494"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:10:41.166175"], ["updated_at", "2025-07-09 15:10:41.166175"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "youthacademy.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Youth Academy"], ["domain", "youthacademy.org"], ["description", "Educational organization for young learners"], ["participation_type", "restricted"], ["created_at", "2025-07-09 15:10:41.176938"], ["updated_at", "2025-07-09 15:10:41.176938"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.8ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:10:41.182099"], ["updated_at", "2025-07-09 15:10:41.182099"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:10:41.192640"], ["updated_at", "2025-07-09 15:10:41.192640"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:10:41.199517"], ["updated_at", "2025-07-09 15:10:41.199517"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:10:41.209989"], ["updated_at", "2025-07-09 15:10:41.209989"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.6ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:10:41.218783"], ["updated_at", "2025-07-09 15:10:41.218783"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.4ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Community Center"], ["domain", "communitycenter.org"], ["description", "Public community organization open to all ages"], ["participation_type", "public"], ["created_at", "2025-07-09 15:10:41.238447"], ["updated_at", "2025-07-09 15:10:41.238447"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:10:41.246928"], ["updated_at", "2025-07-09 15:10:41.246928"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:10:41.255227"], ["updated_at", "2025-07-09 15:10:41.255227"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:10:41.261150"], ["updated_at", "2025-07-09 15:10:41.261150"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.3ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:10:41.267019"], ["updated_at", "2025-07-09 15:10:41.267019"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:10:41.274717"], ["updated_at", "2025-07-09 15:10:41.274717"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "admin@techcorp.com"], ["encrypted_password", "$2a$12$BrGdSrXiJsibZQ1WtzU1eOwKfz5PJPdD87AVZdYh7KF9WFpitSeF."], ["first_name", "John"], ["last_name", "Admin"], ["date_of_birth", "1990-07-09"], ["age", 35], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 15:10:41.654732"], ["updated_at", "2025-07-09 15:10:41.654732"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "manager@techcorp.com"], ["encrypted_password", "$2a$12$lanQsygQo4E7DMzkRqEKS.B9EgV/wwvy.yIw5T84Vc2i9IKg.ZO92"], ["first_name", "Sarah"], ["last_name", "Manager"], ["date_of_birth", "1997-07-09"], ["age", 28], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 15:10:41.960848"], ["updated_at", "2025-07-09 15:10:41.960848"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teacher@youthacademy.org"], ["encrypted_password", "$2a$12$UzZ79W4.3iK1ecBlN.cYge9VDqA9K/g6l7AjN837GOE19.U9tv1l."], ["first_name", "Michael"], ["last_name", "Teacher"], ["date_of_birth", "1983-07-09"], ["age", 42], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:10:42.267779"], ["updated_at", "2025-07-09 15:10:42.267779"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent1@example.com"], ["encrypted_password", "$2a$12$WmsCHJdx4Lf8Z/0DXl8U6uMw/gh6DtrAfrRS21ojgvnYNgyec5CiK"], ["first_name", "Lisa"], ["last_name", "Parent"], ["date_of_birth", "1985-07-09"], ["age", 40], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:10:42.573540"], ["updated_at", "2025-07-09 15:10:42.573540"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent2@example.com"], ["encrypted_password", "$2a$12$AvijRpvnWWq/cq5OChpGDOieL18Ut95Ly5EGbl13Rf8GRwBqYjAlK"], ["first_name", "David"], ["last_name", "Guardian"], ["date_of_birth", "1987-07-09"], ["age", 38], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:10:42.879905"], ["updated_at", "2025-07-09 15:10:42.879905"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen1@youthacademy.org"], ["encrypted_password", "$2a$12$GdgT3xAEzXmeIq2RTfysWuBWbmcTw9pQ/dzyS/8WOwEPiRo6Iizxa"], ["first_name", "Alex"], ["last_name", "Teen"], ["date_of_birth", "2010-07-09"], ["age", 15], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:10:43.179504"], ["updated_at", "2025-07-09 15:10:43.179504"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen2@communitycenter.org"], ["encrypted_password", "$2a$12$Qr7h6MynrSh4rV7UTlHR7.jlrwF2hoZeRL1dVM112jBTVWI9yk0tS"], ["first_name", "Jordan"], ["last_name", "Student"], ["date_of_birth", "2009-07-09"], ["age", 16], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:10:43.486403"], ["updated_at", "2025-07-09 15:10:43.486403"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child1@youthacademy.org"], ["encrypted_password", "$2a$12$mBLsEhxx9bIbEgsdNkD2deCugHUm.6KKr2MjABE6suA1.xfdaIXXW"], ["first_name", "Emma"], ["last_name", "Child"], ["date_of_birth", "2015-07-09"], ["age", 10], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:10:43.793034"], ["updated_at", "2025-07-09 15:10:43.793034"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child2@communitycenter.org"], ["encrypted_password", "$2a$12$I6NcCO2.RmIdRCDHUfRi7Ol.58Q5RLRN6VSKqhKaJGxfGv2LkN3Vm"], ["first_name", "Lucas"], ["last_name", "Young"], ["date_of_birth", "2017-07-09"], ["age", 8], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:10:44.098728"], ["updated_at", "2025-07-09 15:10:44.098728"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:63:in `add_role'
  [1m[36mUserRole Load (2.5ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:64:in `add_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user.rb:64:in `add_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" IS NULL LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:64:in `add_role'
  [1m[36mUserRole Create (2.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "created_at", "updated_at") VALUES ($1, $2, $3) RETURNING "id"[0m  [["user_id", 1], ["created_at", "2025-07-09 15:10:44.168513"], ["updated_at", "2025-07-09 15:10:44.168513"]]
  ↳ app/models/user.rb:64:in `add_role'
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/models/user.rb:64:in `add_role'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (138.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[35m (83.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db_test"[0m
  [1m[35m (204.6ms)[0m  [1m[35mCREATE DATABASE "org_access_db" ENCODING = 'unicode'[0m
  [1m[35m (154.8ms)[0m  [1m[35mCREATE DATABASE "org_access_db_test" ENCODING = 'unicode'[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1458885612628655505)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrganizations (20240101000001)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" bigserial primary key, "name" character varying NOT NULL, "domain" character varying NOT NULL, "description" text, "participation_type" character varying DEFAULT 'private', "active" boolean DEFAULT TRUE, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_name" ON "organizations"  ("name")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_domain" ON "organizations"  ("domain")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_participation_type" ON "organizations"  ("participation_type")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_active" ON "organizations"  ("active")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000001"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20240101000002)
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "date_of_birth" date NOT NULL, "age" integer, "phone_number" character varying, "bio" text, "avatar_url" character varying, "organization_id" bigint, "email_verified" boolean DEFAULT FALSE, "phone_verified" boolean DEFAULT FALSE, "identity_verified" boolean DEFAULT FALSE, "active" boolean DEFAULT TRUE, "last_login_at" timestamp, "last_login_ip" inet, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d7b9ff90af"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_organization_id" ON "users"  ("organization_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_age" ON "users"  ("age")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_active" ON "users"  ("active")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email_verified" ON "users"  ("email_verified")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_identity_verified" ON "users"  ("identity_verified")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000002"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRoles (20240101000003)
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE TABLE "roles" ("id" bigserial primary key, "name" character varying, "resource_type" character varying, "resource_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (3.3ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_resource_type_and_resource_id" ON "roles"  ("resource_type", "resource_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "users_roles" ("user_id" bigint, "role_id" bigint)[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id" ON "users_roles"  ("user_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_role_id" ON "users_roles"  ("role_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_name_and_resource_type_and_resource_id" ON "roles"  ("name", "resource_type", "resource_id")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id_and_role_id" ON "users_roles"  ("user_id", "role_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000003"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipationRules (20240101000005)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "participation_rules" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "age_group" character varying NOT NULL, "minimum_age" integer NOT NULL, "maximum_age" integer NOT NULL, "enabled" boolean DEFAULT TRUE, "requires_parental_consent" boolean DEFAULT FALSE, "content_filtering_level" character varying DEFAULT 'minimal', "participation_restrictions" jsonb DEFAULT '[]', "description" text, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f4e4065e2e"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_organization_id" ON "participation_rules"  ("organization_id")[0m
  [1m[35m (5.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_participation_rules_on_organization_id_and_age_group" ON "participation_rules"  ("organization_id", "age_group")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_enabled" ON "participation_rules"  ("enabled")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_requires_parental_consent" ON "participation_rules"  ("requires_parental_consent")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_content_filtering_level" ON "participation_rules"  ("content_filtering_level")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000005"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParentalConsents (20240101000006)
  [1m[35m (1.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.6ms)[0m  [1m[35mCREATE TABLE "parental_consents" ("id" bigserial primary key, "parent_id" bigint NOT NULL, "child_id" bigint NOT NULL, "approved" boolean DEFAULT FALSE, "consent_date" date NOT NULL, "expiry_date" date NOT NULL, "approved_by_id" bigint, "approved_at" timestamp, "revoked_by_id" bigint, "revoked_at" timestamp, "notes" text, "consent_details" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1fd0aaaf75"
FOREIGN KEY ("parent_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_28627dc0dc"
FOREIGN KEY ("child_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_32eaa27bbd"
FOREIGN KEY ("approved_by_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_1eec64c65c"
FOREIGN KEY ("revoked_by_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_parental_consents_on_child_id" ON "parental_consents"  ("child_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_approved" ON "parental_consents"  ("approved")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_expiry_date" ON "parental_consents"  ("expiry_date")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_consent_date" ON "parental_consents"  ("consent_date")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000006"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrganizationAnalytics (20240101000007)
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.6ms)[0m  [1m[35mCREATE TABLE "organization_analytics" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "total_members" integer DEFAULT 0 NOT NULL, "admin_count" integer DEFAULT 0 NOT NULL, "age_group_breakdown" jsonb DEFAULT '{}', "participation_rate" decimal(5,2) DEFAULT 0.0 NOT NULL, "generated_at" timestamp NOT NULL, "report_period" character varying, "period_start" timestamp, "period_end" timestamp, "new_members_count" integer DEFAULT 0, "active_members_count" integer DEFAULT 0, "active_users_7_days" integer DEFAULT 0, "active_users_30_days" integer DEFAULT 0, "new_members_this_month" integer DEFAULT 0, "members_by_role" jsonb DEFAULT '{}', "average_age" decimal(4,1), "minor_percentage" decimal(5,2), "additional_metrics" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_aaf02dc4fd"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_organization_id" ON "organization_analytics"  ("organization_id")[0m
  [1m[35m (3.0ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_generated_at" ON "organization_analytics"  ("generated_at")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_report_period" ON "organization_analytics"  ("report_period")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_org_analytics_on_org_id_and_generated_at" ON "organization_analytics"  ("organization_id", "generated_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000007"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2025-07-09 15:18:56.550782"], ["updated_at", "2025-07-09 15:18:56.550782"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(1458885612628655505)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (0.9ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (0.9ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[36mRole Load (2.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles"[0m
  [1m[36mParticipationRule Load (4.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules"[0m
  [1m[36mParentalConsent Load (3.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[36mOrganizationAnalytics Load (3.5ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "techcorp.com"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.0ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "TechCorp Inc."], ["domain", "techcorp.com"], ["description", "A technology company focused on innovation and collaboration"], ["created_at", "2025-07-09 15:20:23.087850"], ["updated_at", "2025-07-09 15:20:23.087850"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:20:23.135481"], ["updated_at", "2025-07-09 15:20:23.135481"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:20:23.144365"], ["updated_at", "2025-07-09 15:20:23.144365"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:20:23.152397"], ["updated_at", "2025-07-09 15:20:23.152397"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:20:23.159084"], ["updated_at", "2025-07-09 15:20:23.159084"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:20:23.164651"], ["updated_at", "2025-07-09 15:20:23.164651"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "youthacademy.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Youth Academy"], ["domain", "youthacademy.org"], ["description", "Educational organization for young learners"], ["participation_type", "restricted"], ["created_at", "2025-07-09 15:20:23.175186"], ["updated_at", "2025-07-09 15:20:23.175186"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:20:23.179961"], ["updated_at", "2025-07-09 15:20:23.179961"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:20:23.186193"], ["updated_at", "2025-07-09 15:20:23.186193"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:20:23.191951"], ["updated_at", "2025-07-09 15:20:23.191951"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:20:23.198287"], ["updated_at", "2025-07-09 15:20:23.198287"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:20:23.207298"], ["updated_at", "2025-07-09 15:20:23.207298"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.7ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Community Center"], ["domain", "communitycenter.org"], ["description", "Public community organization open to all ages"], ["participation_type", "public"], ["created_at", "2025-07-09 15:20:23.223506"], ["updated_at", "2025-07-09 15:20:23.223506"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:20:23.233034"], ["updated_at", "2025-07-09 15:20:23.233034"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:20:23.242233"], ["updated_at", "2025-07-09 15:20:23.242233"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.9ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:20:23.250827"], ["updated_at", "2025-07-09 15:20:23.250827"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:20:23.262446"], ["updated_at", "2025-07-09 15:20:23.262446"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:20:23.273320"], ["updated_at", "2025-07-09 15:20:23.273320"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "admin@techcorp.com"], ["encrypted_password", "$2a$12$a/.iL8DH1jXUjx0y/bFziek/6YjokiM0oFqz3MuBm0bcvJsWBfz3e"], ["first_name", "John"], ["last_name", "Admin"], ["date_of_birth", "1990-07-09"], ["age", 35], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 15:20:23.656633"], ["updated_at", "2025-07-09 15:20:23.656633"]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "manager@techcorp.com"], ["encrypted_password", "$2a$12$ql.ApkO1VhugqeR3DR8FmuKa/IH4cFXFkZnakkFurU8PbmUegYPUG"], ["first_name", "Sarah"], ["last_name", "Manager"], ["date_of_birth", "1997-07-09"], ["age", 28], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 15:20:23.966214"], ["updated_at", "2025-07-09 15:20:23.966214"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teacher@youthacademy.org"], ["encrypted_password", "$2a$12$wzbyGUaAQzSwMP8Io8uI9.N2DqZlE4W7m6xT2bxQbzTFDgLrW31VG"], ["first_name", "Michael"], ["last_name", "Teacher"], ["date_of_birth", "1983-07-09"], ["age", 42], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:20:24.299750"], ["updated_at", "2025-07-09 15:20:24.299750"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent1@example.com"], ["encrypted_password", "$2a$12$5ohYsjdFGVuaX0f9oUTKt.ETg83BevRG4eEB54cIBCTjZL2do3tuu"], ["first_name", "Lisa"], ["last_name", "Parent"], ["date_of_birth", "1985-07-09"], ["age", 40], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:20:24.605980"], ["updated_at", "2025-07-09 15:20:24.605980"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent2@example.com"], ["encrypted_password", "$2a$12$iUojysM1FaQ1m9o2NdXR..HF1spc.k5jpeZyKe3hHubXKCNWiUw/C"], ["first_name", "David"], ["last_name", "Guardian"], ["date_of_birth", "1987-07-09"], ["age", 38], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:20:24.918061"], ["updated_at", "2025-07-09 15:20:24.918061"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen1@youthacademy.org"], ["encrypted_password", "$2a$12$lBsjFRj/BHHe8pq7xLOSI.ZpanRbB7E8APHVDuQLM0zwnNT2Idz26"], ["first_name", "Alex"], ["last_name", "Teen"], ["date_of_birth", "2010-07-09"], ["age", 15], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:20:25.229361"], ["updated_at", "2025-07-09 15:20:25.229361"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen2@communitycenter.org"], ["encrypted_password", "$2a$12$DJjdDpgbq/p6gTglB6zwqe5h6Sc/O.OUaZ1P6YGB7617JRllWhgWy"], ["first_name", "Jordan"], ["last_name", "Student"], ["date_of_birth", "2009-07-09"], ["age", 16], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:20:25.539340"], ["updated_at", "2025-07-09 15:20:25.539340"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child1@youthacademy.org"], ["encrypted_password", "$2a$12$Xdz6hpV3c3PZ9ey/XPy2Zuh3qkcXrti0tH3oQ8jEj7AN55OXglMv2"], ["first_name", "Emma"], ["last_name", "Child"], ["date_of_birth", "2015-07-09"], ["age", 10], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:20:25.856466"], ["updated_at", "2025-07-09 15:20:25.856466"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child2@communitycenter.org"], ["encrypted_password", "$2a$12$MAl8oEfZM9YFUNSvqEfTUOspjq3Gm9tfWUGbx/.STh.ESP1dOUo1u"], ["first_name", "Lucas"], ["last_name", "Young"], ["date_of_birth", "2017-07-09"], ["age", 8], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:20:26.162047"], ["updated_at", "2025-07-09 15:20:26.162047"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  [1m[36mHABTM_Roles Load (2.2ms)[0m  [1m[34mSELECT "users_roles".* FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 1]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 1]]
  [1m[36mUser Destroy (1.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 2]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 3]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 6]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mUser Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.2ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 8]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 9]]
  [1m[36mUser Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.9ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "organization_id" = $1 WHERE "users"."organization_id" = $2[0m  [["organization_id", nil], ["organization_id", 1]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."resource_id" = $1 AND "roles"."resource_type" = $2[0m  [["resource_id", 1], ["resource_type", "Organization"]]
  [1m[36mParticipationRule Load (0.8ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  [1m[36mParticipationRule Destroy (0.5ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 1]]
  [1m[36mParticipationRule Destroy (0.2ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 2]]
  [1m[36mParticipationRule Destroy (0.2ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 3]]
  [1m[36mParticipationRule Destroy (0.2ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 4]]
  [1m[36mParticipationRule Destroy (0.2ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (2.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (6.7ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (1.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "organization_id" = $1 WHERE "users"."organization_id" = $2[0m  [["organization_id", nil], ["organization_id", 1]]
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."resource_id" = $1 AND "roles"."resource_type" = $2[0m  [["resource_id", 1], ["resource_type", "Organization"]]
  [1m[36mParticipationRule Load (1.8ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  [1m[36mParticipationRule Destroy (1.3ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 1]]
  [1m[36mParticipationRule Destroy (1.2ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 2]]
  [1m[36mParticipationRule Destroy (1.3ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 3]]
  [1m[36mParticipationRule Destroy (0.8ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 4]]
  [1m[36mParticipationRule Destroy (0.5ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (4.5ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (2.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update All (1.0ms)[0m  [1m[33mUPDATE "users" SET "organization_id" = $1 WHERE "users"."organization_id" = $2[0m  [["organization_id", nil], ["organization_id", 1]]
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."resource_id" = $1 AND "roles"."resource_type" = $2[0m  [["resource_id", 1], ["resource_type", "Organization"]]
  [1m[36mParticipationRule Load (1.5ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  [1m[36mParticipationRule Destroy (0.7ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 1]]
  [1m[36mParticipationRule Destroy (0.4ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 2]]
  [1m[36mParticipationRule Destroy (1.4ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 3]]
  [1m[36mParticipationRule Destroy (0.4ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 4]]
  [1m[36mParticipationRule Destroy (0.6ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 5]]
  [1m[36mOrganizationAnalytics Load (2.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1[0m  [["organization_id", 1]]
  [1m[36mOrganization Destroy (1.7ms)[0m  [1m[31mDELETE FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 1]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update All (0.9ms)[0m  [1m[33mUPDATE "users" SET "organization_id" = $1 WHERE "users"."organization_id" = $2[0m  [["organization_id", nil], ["organization_id", 2]]
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."resource_id" = $1 AND "roles"."resource_type" = $2[0m  [["resource_id", 2], ["resource_type", "Organization"]]
  [1m[36mParticipationRule Load (1.1ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  [1m[36mParticipationRule Destroy (0.6ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 6]]
  [1m[36mParticipationRule Destroy (0.8ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 7]]
  [1m[36mParticipationRule Destroy (0.5ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 8]]
  [1m[36mParticipationRule Destroy (0.5ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 9]]
  [1m[36mParticipationRule Destroy (0.9ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 10]]
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1[0m  [["organization_id", 2]]
  [1m[36mOrganization Destroy (1.6ms)[0m  [1m[31mDELETE FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 2]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update All (0.6ms)[0m  [1m[33mUPDATE "users" SET "organization_id" = $1 WHERE "users"."organization_id" = $2[0m  [["organization_id", nil], ["organization_id", 3]]
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."resource_id" = $1 AND "roles"."resource_type" = $2[0m  [["resource_id", 3], ["resource_type", "Organization"]]
  [1m[36mParticipationRule Load (1.0ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 3]]
  [1m[36mParticipationRule Destroy (1.2ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 11]]
  [1m[36mParticipationRule Destroy (0.5ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 12]]
  [1m[36mParticipationRule Destroy (0.5ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 13]]
  [1m[36mParticipationRule Destroy (0.4ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 14]]
  [1m[36mParticipationRule Destroy (0.3ms)[0m  [1m[31mDELETE FROM "participation_rules" WHERE "participation_rules"."id" = $1[0m  [["id", 15]]
  [1m[36mOrganizationAnalytics Load (0.5ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1[0m  [["organization_id", 3]]
  [1m[36mOrganization Destroy (1.3ms)[0m  [1m[31mDELETE FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles"[0m
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules"[0m
  [1m[36mParentalConsent Load (1.8ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[36mOrganizationAnalytics Load (0.5ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "techcorp.com"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "TechCorp Inc."], ["domain", "techcorp.com"], ["description", "A technology company focused on innovation and collaboration"], ["created_at", "2025-07-09 15:25:33.350904"], ["updated_at", "2025-07-09 15:25:33.350904"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.8ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 4], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:25:33.360507"], ["updated_at", "2025-07-09 15:25:33.360507"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.0ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 4], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:25:33.375168"], ["updated_at", "2025-07-09 15:25:33.375168"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.6ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 4], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:25:33.387858"], ["updated_at", "2025-07-09 15:25:33.387858"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.8ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 4], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:25:33.401305"], ["updated_at", "2025-07-09 15:25:33.401305"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.3ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 4], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:25:33.410733"], ["updated_at", "2025-07-09 15:25:33.410733"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (2.1ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "youthacademy.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.9ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Youth Academy"], ["domain", "youthacademy.org"], ["description", "Educational organization for young learners"], ["participation_type", "restricted"], ["created_at", "2025-07-09 15:25:33.439610"], ["updated_at", "2025-07-09 15:25:33.439610"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (2.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 5], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:25:33.453481"], ["updated_at", "2025-07-09 15:25:33.453481"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 5], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:25:33.468856"], ["updated_at", "2025-07-09 15:25:33.468856"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.6ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 5], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:25:33.484686"], ["updated_at", "2025-07-09 15:25:33.484686"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 5], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:25:33.497084"], ["updated_at", "2025-07-09 15:25:33.497084"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.0ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 5], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:25:33.528919"], ["updated_at", "2025-07-09 15:25:33.528919"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.8ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Community Center"], ["domain", "communitycenter.org"], ["description", "Public community organization open to all ages"], ["participation_type", "public"], ["created_at", "2025-07-09 15:25:33.555240"], ["updated_at", "2025-07-09 15:25:33.555240"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.1ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 6], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:25:33.568201"], ["updated_at", "2025-07-09 15:25:33.568201"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 6], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:25:33.583395"], ["updated_at", "2025-07-09 15:25:33.583395"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (2.2ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 6], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:25:33.593877"], ["updated_at", "2025-07-09 15:25:33.593877"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.6ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 6], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:25:33.610613"], ["updated_at", "2025-07-09 15:25:33.610613"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.6ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 6], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:25:33.625979"], ["updated_at", "2025-07-09 15:25:33.625979"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (1.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (3.0ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "admin@techcorp.com"], ["encrypted_password", "$2a$12$n5ckhmY/XKBss7np5TMrQOgVxVU2eyGC616DgkbntDaokq5dgh2oe"], ["first_name", "John"], ["last_name", "Admin"], ["date_of_birth", "1990-07-09"], ["age", 35], ["organization_id", 4], ["email_verified", true], ["created_at", "2025-07-09 15:25:34.080393"], ["updated_at", "2025-07-09 15:25:34.080393"]]
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "manager@techcorp.com"], ["encrypted_password", "$2a$12$9Wz1GjUjGy6MH4gwCpx4OeLe/O/va.MhLJaYfkMYTTd4ez4H3oc/C"], ["first_name", "Sarah"], ["last_name", "Manager"], ["date_of_birth", "1997-07-09"], ["age", 28], ["organization_id", 4], ["email_verified", true], ["created_at", "2025-07-09 15:25:34.415646"], ["updated_at", "2025-07-09 15:25:34.415646"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teacher@youthacademy.org"], ["encrypted_password", "$2a$12$QBLR448EPQvqvHUJFam2y.QEEJPUMNhEfgL7R4pSmxXHztibpOvau"], ["first_name", "Michael"], ["last_name", "Teacher"], ["date_of_birth", "1983-07-09"], ["age", 42], ["organization_id", 5], ["email_verified", true], ["created_at", "2025-07-09 15:25:34.749988"], ["updated_at", "2025-07-09 15:25:34.749988"]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent1@example.com"], ["encrypted_password", "$2a$12$xGs3uuOdEYPLvFcwlBGy2u1W3z7X7gQarfh9xOzpbkdbbmy6IWjNu"], ["first_name", "Lisa"], ["last_name", "Parent"], ["date_of_birth", "1985-07-09"], ["age", 40], ["organization_id", 6], ["email_verified", true], ["created_at", "2025-07-09 15:25:35.075978"], ["updated_at", "2025-07-09 15:25:35.075978"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent2@example.com"], ["encrypted_password", "$2a$12$fpxnf7VRH96E4rKgCFg8Qu6846U3oxjpwbgvdtGJRD7uGigWJo9Om"], ["first_name", "David"], ["last_name", "Guardian"], ["date_of_birth", "1987-07-09"], ["age", 38], ["organization_id", 6], ["email_verified", true], ["created_at", "2025-07-09 15:25:35.403955"], ["updated_at", "2025-07-09 15:25:35.403955"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (1.9ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen1@youthacademy.org"], ["encrypted_password", "$2a$12$PzOSOJ0N1r40FgobAPEpIem//Gq1LL4oOgAkxwBHnoD2xiPyGFqsy"], ["first_name", "Alex"], ["last_name", "Teen"], ["date_of_birth", "2010-07-09"], ["age", 15], ["organization_id", 5], ["email_verified", true], ["created_at", "2025-07-09 15:25:35.726809"], ["updated_at", "2025-07-09 15:25:35.726809"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen2@communitycenter.org"], ["encrypted_password", "$2a$12$pDPXMfMYEALuB4gN6tYph.38YlzJSksdIP64Pzu/tAMRwXcJK2Jba"], ["first_name", "Jordan"], ["last_name", "Student"], ["date_of_birth", "2009-07-09"], ["age", 16], ["organization_id", 6], ["email_verified", true], ["created_at", "2025-07-09 15:25:36.057295"], ["updated_at", "2025-07-09 15:25:36.057295"]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child1@youthacademy.org"], ["encrypted_password", "$2a$12$kxMNjXpa6TDRGL3kInzJ3eFt2JQq74PlFrg3vhVaH.bg5TegsJaGu"], ["first_name", "Emma"], ["last_name", "Child"], ["date_of_birth", "2015-07-09"], ["age", 10], ["organization_id", 5], ["email_verified", true], ["created_at", "2025-07-09 15:25:36.385232"], ["updated_at", "2025-07-09 15:25:36.385232"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child2@communitycenter.org"], ["encrypted_password", "$2a$12$kVbODIoFclXNstVFC/xmZOh1jodx/A4MKXoUl0aVTwb24BL4qLF1O"], ["first_name", "Lucas"], ["last_name", "Young"], ["date_of_birth", "2017-07-09"], ["age", 8], ["organization_id", 6], ["email_verified", true], ["created_at", "2025-07-09 15:25:36.716676"], ["updated_at", "2025-07-09 15:25:36.716676"]]
  [1m[35m (2.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.9ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 4], ["created_at", "2025-07-09 15:25:36.749928"], ["updated_at", "2025-07-09 15:25:36.749928"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 10], ["id", 1], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 10], ["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.7ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 10], ["role_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.4ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 4], ["created_at", "2025-07-09 15:25:36.800864"], ["updated_at", "2025-07-09 15:25:36.800864"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 10], ["id", 2], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 10], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.3ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 10], ["role_id", 2]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.6ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 4], ["created_at", "2025-07-09 15:25:36.826579"], ["updated_at", "2025-07-09 15:25:36.826579"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 11], ["id", 3], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 11], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.5ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 11], ["role_id", 3]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 4], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 11], ["id", 2], ["LIMIT", 1]]
  [1m[36mRole Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 11], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.6ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 11], ["role_id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 5], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.7ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 5], ["created_at", "2025-07-09 15:25:36.897347"], ["updated_at", "2025-07-09 15:25:36.897347"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 12], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 12], ["id", 4], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (1.0ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 12], ["role_id", 4]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 5], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.7ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 5], ["created_at", "2025-07-09 15:25:36.939395"], ["updated_at", "2025-07-09 15:25:36.939395"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 12], ["id", 5], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 12], ["id", 5], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.7ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 12], ["role_id", 5]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 5], ["LIMIT", 1]]
  [1m[36mRole Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 15], ["id", 5], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 15], ["id", 5], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.4ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 15], ["role_id", 5]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 5], ["LIMIT", 1]]
  [1m[36mRole Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 17], ["id", 5], ["LIMIT", 1]]
  [1m[36mRole Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 17], ["id", 5], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.8ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 17], ["role_id", 5]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 6], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.5ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 6], ["created_at", "2025-07-09 15:25:37.031149"], ["updated_at", "2025-07-09 15:25:37.031149"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 13], ["id", 6], ["LIMIT", 1]]
  [1m[36mRole Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 13], ["id", 6], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.7ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 13], ["role_id", 6]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 6], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.4ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 6], ["created_at", "2025-07-09 15:25:37.068619"], ["updated_at", "2025-07-09 15:25:37.068619"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 13], ["id", 7], ["LIMIT", 1]]
  [1m[36mRole Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 13], ["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.5ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 13], ["role_id", 7]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 6], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.4ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 6], ["created_at", "2025-07-09 15:25:37.098251"], ["updated_at", "2025-07-09 15:25:37.098251"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 14], ["id", 8], ["LIMIT", 1]]
  [1m[36mRole Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 14], ["id", 8], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.4ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 14], ["role_id", 8]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 6], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 14], ["id", 7], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 14], ["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.3ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 14], ["role_id", 7]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 6], ["LIMIT", 1]]
  [1m[36mRole Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 16], ["id", 7], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 16], ["id", 7], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.3ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 16], ["role_id", 7]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 6], ["LIMIT", 1]]
  [1m[36mRole Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 7], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 18], ["id", 7], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.4ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 18], ["role_id", 7]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:26:in `create_for_minor'
  [1m[36mParentalConsent Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 15], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:26:in `create_for_minor'
  [1m[36mParentalConsent Create (1.4ms)[0m  [1m[32mINSERT INTO "parental_consents" ("parent_id", "child_id", "consent_date", "expiry_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_id", 13], ["child_id", 15], ["consent_date", "2025-07-09"], ["expiry_date", "2026-07-09"], ["created_at", "2025-07-09 15:25:37.219045"], ["updated_at", "2025-07-09 15:25:37.219045"]]
  ↳ app/models/parental_consent.rb:26:in `create_for_minor'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ↳ app/models/user.rb:92:in `organization'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "users_roles" ON "users_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 5], ["name", "admin"]]
  ↳ app/models/parental_consent.rb:133:in `notify_organization_admins'
Parental consent request created for Alex Teen in Youth Academy. Admin teacher@youthacademy.org notified.
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:26:in `create_for_minor'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 10]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 10]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 11]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 11]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 12]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 13]]
  [1m[36mUser Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 13]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mParentalConsent Load (1.1ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mParentalConsent Destroy (0.6ms)[0m  [1m[31mDELETE FROM "parental_consents" WHERE "parental_consents"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 13]]
  [1m[36mUser Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 14]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 14]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 15]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 15]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 16]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 16]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 17]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 18]]
  [1m[36mUser Destroy (0.7ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 18]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.9ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update All (0.3ms)[0m  [1m[33mUPDATE "users" SET "organization_id" = $1 WHERE "users"."organization_id" = $2[0m  [["organization_id", nil], ["organization_id", 4]]
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."resource_id" = $1 AND "roles"."resource_type" = $2[0m  [["resource_id", 4], ["resource_type", "Organization"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (54.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[35m (46.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db_test"[0m
  [1m[35m (202.0ms)[0m  [1m[35mCREATE DATABASE "org_access_db" ENCODING = 'unicode'[0m
  [1m[35m (147.2ms)[0m  [1m[35mCREATE DATABASE "org_access_db_test" ENCODING = 'unicode'[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1458885612628655505)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrganizations (20240101000001)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" bigserial primary key, "name" character varying NOT NULL, "domain" character varying NOT NULL, "description" text, "participation_type" character varying DEFAULT 'private', "active" boolean DEFAULT TRUE, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_name" ON "organizations"  ("name")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_domain" ON "organizations"  ("domain")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_participation_type" ON "organizations"  ("participation_type")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_active" ON "organizations"  ("active")[0m
  [1m[36mActiveRecord::SchemaMigration Create (2.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000001"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20240101000002)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "date_of_birth" date NOT NULL, "age" integer, "phone_number" character varying, "bio" text, "avatar_url" character varying, "organization_id" bigint, "email_verified" boolean DEFAULT FALSE, "phone_verified" boolean DEFAULT FALSE, "identity_verified" boolean DEFAULT FALSE, "active" boolean DEFAULT TRUE, "last_login_at" timestamp, "last_login_ip" inet, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d7b9ff90af"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_organization_id" ON "users"  ("organization_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_age" ON "users"  ("age")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_active" ON "users"  ("active")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email_verified" ON "users"  ("email_verified")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_identity_verified" ON "users"  ("identity_verified")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000002"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRoles (20240101000003)
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE TABLE "roles" ("id" bigserial primary key, "name" character varying, "resource_type" character varying, "resource_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_resource_type_and_resource_id" ON "roles"  ("resource_type", "resource_id")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE TABLE "users_roles" ("user_id" bigint, "role_id" bigint)[0m
  [1m[35m (3.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id" ON "users_roles"  ("user_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_role_id" ON "users_roles"  ("role_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_name_and_resource_type_and_resource_id" ON "roles"  ("name", "resource_type", "resource_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id_and_role_id" ON "users_roles"  ("user_id", "role_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000003"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipationRules (20240101000005)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mCREATE TABLE "participation_rules" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "age_group" character varying NOT NULL, "minimum_age" integer NOT NULL, "maximum_age" integer NOT NULL, "enabled" boolean DEFAULT TRUE, "requires_parental_consent" boolean DEFAULT FALSE, "content_filtering_level" character varying DEFAULT 'minimal', "participation_restrictions" jsonb DEFAULT '[]', "description" text, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f4e4065e2e"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_organization_id" ON "participation_rules"  ("organization_id")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_participation_rules_on_organization_id_and_age_group" ON "participation_rules"  ("organization_id", "age_group")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_enabled" ON "participation_rules"  ("enabled")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_requires_parental_consent" ON "participation_rules"  ("requires_parental_consent")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_content_filtering_level" ON "participation_rules"  ("content_filtering_level")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000005"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParentalConsents (20240101000006)
  [1m[35m (1.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.0ms)[0m  [1m[35mCREATE TABLE "parental_consents" ("id" bigserial primary key, "parent_id" bigint NOT NULL, "child_id" bigint NOT NULL, "approved" boolean DEFAULT FALSE, "consent_date" date NOT NULL, "expiry_date" date NOT NULL, "approved_by_id" bigint, "approved_at" timestamp, "revoked_by_id" bigint, "revoked_at" timestamp, "notes" text, "consent_details" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1fd0aaaf75"
FOREIGN KEY ("parent_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_28627dc0dc"
FOREIGN KEY ("child_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_32eaa27bbd"
FOREIGN KEY ("approved_by_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_1eec64c65c"
FOREIGN KEY ("revoked_by_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_parental_consents_on_child_id" ON "parental_consents"  ("child_id")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_approved" ON "parental_consents"  ("approved")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_expiry_date" ON "parental_consents"  ("expiry_date")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_consent_date" ON "parental_consents"  ("consent_date")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000006"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrganizationAnalytics (20240101000007)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.6ms)[0m  [1m[35mCREATE TABLE "organization_analytics" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "total_members" integer DEFAULT 0 NOT NULL, "admin_count" integer DEFAULT 0 NOT NULL, "age_group_breakdown" jsonb DEFAULT '{}', "participation_rate" decimal(5,2) DEFAULT 0.0 NOT NULL, "generated_at" timestamp NOT NULL, "report_period" character varying, "period_start" timestamp, "period_end" timestamp, "new_members_count" integer DEFAULT 0, "active_members_count" integer DEFAULT 0, "active_users_7_days" integer DEFAULT 0, "active_users_30_days" integer DEFAULT 0, "new_members_this_month" integer DEFAULT 0, "members_by_role" jsonb DEFAULT '{}', "average_age" decimal(4,1), "minor_percentage" decimal(5,2), "additional_metrics" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_aaf02dc4fd"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_organization_id" ON "organization_analytics"  ("organization_id")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_generated_at" ON "organization_analytics"  ("generated_at")[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_report_period" ON "organization_analytics"  ("report_period")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_org_analytics_on_org_id_and_generated_at" ON "organization_analytics"  ("organization_id", "generated_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000007"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2025-07-09 15:30:32.225048"], ["updated_at", "2025-07-09 15:30:32.225048"]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(1458885612628655505)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mParentalConsent Load (1.0ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles"[0m
  [1m[36mParticipationRule Load (0.8ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules"[0m
  [1m[36mOrganizationAnalytics Load (0.8ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics"[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "techcorp.com"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.2ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "TechCorp Inc."], ["domain", "techcorp.com"], ["description", "A technology company focused on innovation and collaboration"], ["created_at", "2025-07-09 15:30:32.505632"], ["updated_at", "2025-07-09 15:30:32.505632"]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.2ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:30:32.552390"], ["updated_at", "2025-07-09 15:30:32.552390"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:30:32.558126"], ["updated_at", "2025-07-09 15:30:32.558126"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:30:32.562764"], ["updated_at", "2025-07-09 15:30:32.562764"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:30:32.567291"], ["updated_at", "2025-07-09 15:30:32.567291"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:30:32.571605"], ["updated_at", "2025-07-09 15:30:32.571605"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "youthacademy.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Youth Academy"], ["domain", "youthacademy.org"], ["description", "Educational organization for young learners"], ["participation_type", "restricted"], ["created_at", "2025-07-09 15:30:32.579501"], ["updated_at", "2025-07-09 15:30:32.579501"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:30:32.584266"], ["updated_at", "2025-07-09 15:30:32.584266"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:30:32.589814"], ["updated_at", "2025-07-09 15:30:32.589814"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.3ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:30:32.594199"], ["updated_at", "2025-07-09 15:30:32.594199"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:30:32.599203"], ["updated_at", "2025-07-09 15:30:32.599203"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.0ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:30:32.605058"], ["updated_at", "2025-07-09 15:30:32.605058"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.1ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Community Center"], ["domain", "communitycenter.org"], ["description", "Public community organization open to all ages"], ["participation_type", "public"], ["created_at", "2025-07-09 15:30:32.621533"], ["updated_at", "2025-07-09 15:30:32.621533"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:30:32.629747"], ["updated_at", "2025-07-09 15:30:32.629747"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:30:32.636632"], ["updated_at", "2025-07-09 15:30:32.636632"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:30:32.646090"], ["updated_at", "2025-07-09 15:30:32.646090"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.1ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:30:32.651910"], ["updated_at", "2025-07-09 15:30:32.651910"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:30:32.661116"], ["updated_at", "2025-07-09 15:30:32.661116"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "admin@techcorp.com"], ["encrypted_password", "$2a$12$rjPT437l2jsYp3Q9B4kGIu6JX.suaSjK2K.iM.KmgvImYih/kmVGW"], ["first_name", "John"], ["last_name", "Admin"], ["date_of_birth", "1990-07-09"], ["age", 35], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 15:30:33.022232"], ["updated_at", "2025-07-09 15:30:33.022232"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "manager@techcorp.com"], ["encrypted_password", "$2a$12$YsTJvLWFpppagO59wmIfcefKRnnbipt9Q4Mz3DeX/9IY8ZncqeQ4q"], ["first_name", "Sarah"], ["last_name", "Manager"], ["date_of_birth", "1997-07-09"], ["age", 28], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 15:30:33.322174"], ["updated_at", "2025-07-09 15:30:33.322174"]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teacher@youthacademy.org"], ["encrypted_password", "$2a$12$.MZJ.aZFovpKLnyGAqyEnO4QAI1IITqW1UNRj6pYsYiQ5wqjKIg3e"], ["first_name", "Michael"], ["last_name", "Teacher"], ["date_of_birth", "1983-07-09"], ["age", 42], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:30:33.623414"], ["updated_at", "2025-07-09 15:30:33.623414"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.5ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent1@example.com"], ["encrypted_password", "$2a$12$HSHrefRgnvtXNOrDlhEFfuz1jsnTAv6Ys8Y5sBZJHBi.VsKO2uFAu"], ["first_name", "Lisa"], ["last_name", "Parent"], ["date_of_birth", "1985-07-09"], ["age", 40], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:30:33.925866"], ["updated_at", "2025-07-09 15:30:33.925866"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent2@example.com"], ["encrypted_password", "$2a$12$/v/f31v6rDPOFBw/AyqIyOKIR2hvIklvCck5zmR1PAwLzIWAYAHei"], ["first_name", "David"], ["last_name", "Guardian"], ["date_of_birth", "1987-07-09"], ["age", 38], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:30:34.234433"], ["updated_at", "2025-07-09 15:30:34.234433"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen1@youthacademy.org"], ["encrypted_password", "$2a$12$Y.DsQtmcJTQYv5L2NLYIWekAY5v.p7mmnK2E3pLGgQ85q6qKswn8C"], ["first_name", "Alex"], ["last_name", "Teen"], ["date_of_birth", "2010-07-09"], ["age", 15], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:30:34.533219"], ["updated_at", "2025-07-09 15:30:34.533219"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen2@communitycenter.org"], ["encrypted_password", "$2a$12$tKksx187E8sikvIFR.Ta8.wgmI3FN6TpWT/u1Qc3gMgzZ.bPWDqVq"], ["first_name", "Jordan"], ["last_name", "Student"], ["date_of_birth", "2009-07-09"], ["age", 16], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:30:34.839875"], ["updated_at", "2025-07-09 15:30:34.839875"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child1@youthacademy.org"], ["encrypted_password", "$2a$12$q7c.S.f9uCcpgvkmN0Ti8eRuNspQ2ntS2WLTpr3FrYS39TsuIHyO6"], ["first_name", "Emma"], ["last_name", "Child"], ["date_of_birth", "2015-07-09"], ["age", 10], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:30:35.139604"], ["updated_at", "2025-07-09 15:30:35.139604"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child2@communitycenter.org"], ["encrypted_password", "$2a$12$oPvmHg.gvd6qpPoYdPO/Zeg0b5R3kh5ysY3K.qjNQX4NQK2vmT6Be"], ["first_name", "Lucas"], ["last_name", "Young"], ["date_of_birth", "2017-07-09"], ["age", 8], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:30:35.443581"], ["updated_at", "2025-07-09 15:30:35.443581"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (1.1ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:30:35.461387"], ["updated_at", "2025-07-09 15:30:35.461387"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 1], ["id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.5ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 1], ["role_id", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.2ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:30:35.496779"], ["updated_at", "2025-07-09 15:30:35.496779"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 1], ["id", 2], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 1], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 1], ["role_id", 2]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.2ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:30:35.510002"], ["updated_at", "2025-07-09 15:30:35.510002"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 2], ["id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 2], ["role_id", 3]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 2], ["id", 2], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 2], ["id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 2], ["role_id", 2]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.3ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 15:30:35.537544"], ["updated_at", "2025-07-09 15:30:35.537544"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 3], ["id", 4], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 3], ["id", 4], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.5ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 3], ["role_id", 4]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.4ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 15:30:35.562320"], ["updated_at", "2025-07-09 15:30:35.562320"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 3], ["id", 5], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 3], ["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 3], ["role_id", 5]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 6], ["id", 5], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 6], ["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 6], ["role_id", 5]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 8], ["id", 5], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 8], ["id", 5], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 8], ["role_id", 5]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mRole Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.5ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:30:35.603925"], ["updated_at", "2025-07-09 15:30:35.603925"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 4], ["id", 6], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 4], ["id", 6], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 4], ["role_id", 6]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (1.0ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:30:35.624957"], ["updated_at", "2025-07-09 15:30:35.624957"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 4], ["id", 7], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 4], ["id", 7], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 4], ["role_id", 7]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mRole Create (0.3ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:30:35.646119"], ["updated_at", "2025-07-09 15:30:35.646119"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 5], ["id", 8], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 5], ["id", 8], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 5], ["role_id", 8]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 5], ["id", 7], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 5], ["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 5], ["role_id", 7]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 7], ["id", 7], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 7], ["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 7], ["role_id", 7]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 ORDER BY "roles"."id" ASC LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 9], ["id", 7], ["LIMIT", 1]]
  [1m[36mRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "users_roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users_roles"."user_id" = $1 AND "roles"."id" = $2 LIMIT $3[0m  [["user_id", 9], ["id", 7], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Create (0.2ms)[0m  [1m[32mINSERT INTO "users_roles" ("user_id", "role_id") VALUES ($1, $2)[0m  [["user_id", 9], ["role_id", 7]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:26:in `create_for_minor'
  [1m[36mParentalConsent Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:26:in `create_for_minor'
  [1m[36mParentalConsent Create (2.6ms)[0m  [1m[32mINSERT INTO "parental_consents" ("parent_id", "child_id", "consent_date", "expiry_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_id", 4], ["child_id", 6], ["consent_date", "2025-07-09"], ["expiry_date", "2026-07-09"], ["created_at", "2025-07-09 15:30:35.714703"], ["updated_at", "2025-07-09 15:30:35.714703"]]
  ↳ app/models/parental_consent.rb:26:in `create_for_minor'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:92:in `organization'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "users_roles" ON "users_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "users_roles"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 2], ["name", "admin"]]
  ↳ app/models/parental_consent.rb:133:in `notify_organization_admins'
Parental consent request created for Alex Teen in Youth Academy. Admin teacher@youthacademy.org notified.
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:26:in `create_for_minor'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mParentalConsent Load (1.6ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mParentalConsent Destroy (0.9ms)[0m  [1m[31mDELETE FROM "parental_consents" WHERE "parental_consents"."id" = $1[0m  [["id", 1]]
  [1m[35m (6.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (1.3ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 1]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (1.4ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 2]]
  [1m[36mUser Destroy (2.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 3]]
  [1m[36mUser Destroy (3.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 3]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 4]]
  [1m[36mUser Destroy (1.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 5]]
  [1m[36mUser Destroy (0.9ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 6]]
  [1m[36mUser Destroy (1.8ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 7]]
  [1m[36mUser Destroy (0.6ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 7]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 8]]
  [1m[36mUser Destroy (0.5ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser::HABTM_Roles Destroy (0.4ms)[0m  [1m[31mDELETE FROM "users_roles" WHERE "users_roles"."user_id" = $1[0m  [["user_id", 9]]
  [1m[36mUser Destroy (1.0ms)[0m  [1m[31mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 9]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (2.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update All (1.8ms)[0m  [1m[33mUPDATE "users" SET "organization_id" = $1 WHERE "users"."organization_id" = $2[0m  [["organization_id", nil], ["organization_id", 1]]
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."resource_id" = $1 AND "roles"."resource_type" = $2[0m  [["resource_id", 1], ["resource_type", "Organization"]]
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (142.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[35m (54.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db_test"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[35m (0.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db_test"[0m
  [1m[35m (213.2ms)[0m  [1m[35mCREATE DATABASE "org_access_db" ENCODING = 'unicode'[0m
  [1m[35m (161.2ms)[0m  [1m[35mCREATE DATABASE "org_access_db_test" ENCODING = 'unicode'[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1458885612628655505)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrganizations (20240101000001)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" bigserial primary key, "name" character varying NOT NULL, "domain" character varying NOT NULL, "description" text, "participation_type" character varying DEFAULT 'private', "active" boolean DEFAULT TRUE, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_name" ON "organizations"  ("name")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_domain" ON "organizations"  ("domain")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_participation_type" ON "organizations"  ("participation_type")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_active" ON "organizations"  ("active")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000001"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20240101000002)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (6.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "date_of_birth" date NOT NULL, "age" integer, "phone_number" character varying, "bio" text, "avatar_url" character varying, "organization_id" bigint, "email_verified" boolean DEFAULT FALSE, "phone_verified" boolean DEFAULT FALSE, "identity_verified" boolean DEFAULT FALSE, "active" boolean DEFAULT TRUE, "last_login_at" timestamp, "last_login_ip" inet, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d7b9ff90af"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_organization_id" ON "users"  ("organization_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_age" ON "users"  ("age")[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_active" ON "users"  ("active")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email_verified" ON "users"  ("email_verified")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_identity_verified" ON "users"  ("identity_verified")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000002"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRoles (20240101000003)
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "roles" ("id" bigserial primary key, "name" character varying, "resource_type" character varying, "resource_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_resource_type_and_resource_id" ON "roles"  ("resource_type", "resource_id")[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE TABLE "users_roles" ("user_id" bigint, "role_id" bigint)[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id" ON "users_roles"  ("user_id")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_role_id" ON "users_roles"  ("role_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_name_and_resource_type_and_resource_id" ON "roles"  ("name", "resource_type", "resource_id")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id_and_role_id" ON "users_roles"  ("user_id", "role_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000003"]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipationRules (20240101000005)
  [1m[35m (1.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (5.5ms)[0m  [1m[35mCREATE TABLE "participation_rules" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "age_group" character varying NOT NULL, "minimum_age" integer NOT NULL, "maximum_age" integer NOT NULL, "enabled" boolean DEFAULT TRUE, "requires_parental_consent" boolean DEFAULT FALSE, "content_filtering_level" character varying DEFAULT 'minimal', "participation_restrictions" jsonb DEFAULT '[]', "description" text, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f4e4065e2e"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_organization_id" ON "participation_rules"  ("organization_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_participation_rules_on_organization_id_and_age_group" ON "participation_rules"  ("organization_id", "age_group")[0m
  [1m[35m (2.0ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_enabled" ON "participation_rules"  ("enabled")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_requires_parental_consent" ON "participation_rules"  ("requires_parental_consent")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_content_filtering_level" ON "participation_rules"  ("content_filtering_level")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000005"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParentalConsents (20240101000006)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.9ms)[0m  [1m[35mCREATE TABLE "parental_consents" ("id" bigserial primary key, "parent_id" bigint NOT NULL, "child_id" bigint NOT NULL, "approved" boolean DEFAULT FALSE, "consent_date" date NOT NULL, "expiry_date" date NOT NULL, "approved_by_id" bigint, "approved_at" timestamp, "revoked_by_id" bigint, "revoked_at" timestamp, "notes" text, "consent_details" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1fd0aaaf75"
FOREIGN KEY ("parent_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_28627dc0dc"
FOREIGN KEY ("child_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_32eaa27bbd"
FOREIGN KEY ("approved_by_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_1eec64c65c"
FOREIGN KEY ("revoked_by_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_parental_consents_on_child_id" ON "parental_consents"  ("child_id")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_approved" ON "parental_consents"  ("approved")[0m
  [1m[35m (6.2ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_expiry_date" ON "parental_consents"  ("expiry_date")[0m
  [1m[35m (1.6ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_consent_date" ON "parental_consents"  ("consent_date")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000006"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrganizationAnalytics (20240101000007)
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.8ms)[0m  [1m[35mCREATE TABLE "organization_analytics" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "total_members" integer DEFAULT 0 NOT NULL, "admin_count" integer DEFAULT 0 NOT NULL, "age_group_breakdown" jsonb DEFAULT '{}', "participation_rate" decimal(5,2) DEFAULT 0.0 NOT NULL, "generated_at" timestamp NOT NULL, "report_period" character varying, "period_start" timestamp, "period_end" timestamp, "new_members_count" integer DEFAULT 0, "active_members_count" integer DEFAULT 0, "active_users_7_days" integer DEFAULT 0, "active_users_30_days" integer DEFAULT 0, "new_members_this_month" integer DEFAULT 0, "members_by_role" jsonb DEFAULT '{}', "average_age" decimal(4,1), "minor_percentage" decimal(5,2), "additional_metrics" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_aaf02dc4fd"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_organization_id" ON "organization_analytics"  ("organization_id")[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_generated_at" ON "organization_analytics"  ("generated_at")[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_report_period" ON "organization_analytics"  ("report_period")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_org_analytics_on_org_id_and_generated_at" ON "organization_analytics"  ("organization_id", "generated_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000007"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserRoles (20250709153411)
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.2ms)[0m  [1m[35mCREATE TABLE "user_roles" ("id" bigserial primary key, "user_id" bigint NOT NULL, "role_id" bigint NOT NULL, "resource_type" character varying, "resource_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_318345354e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_3369e0d5fc"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")
)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_user_id" ON "user_roles"  ("user_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_role_id" ON "user_roles"  ("role_id")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_user_roles_on_user_role_resource" ON "user_roles"  ("user_id", "role_id", "resource_type", "resource_id")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_resource_type_and_resource_id" ON "user_roles"  ("resource_type", "resource_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20250709153411"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2025-07-09 15:37:03.333305"], ["updated_at", "2025-07-09 15:37:03.333305"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_advisory_unlock(1458885612628655505)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mParentalConsent Load (1.0ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (0.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles"[0m
  [1m[36mParticipationRule Load (0.8ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules"[0m
  [1m[36mOrganizationAnalytics Load (0.8ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics"[0m
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "techcorp.com"], ["LIMIT", 1]]
  [1m[36mOrganization Create (2.0ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "TechCorp Inc."], ["domain", "techcorp.com"], ["description", "A technology company focused on innovation and collaboration"], ["created_at", "2025-07-09 15:37:03.622569"], ["updated_at", "2025-07-09 15:37:03.622569"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.2ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:37:03.673040"], ["updated_at", "2025-07-09 15:37:03.673040"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:37:03.679054"], ["updated_at", "2025-07-09 15:37:03.679054"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:37:03.683668"], ["updated_at", "2025-07-09 15:37:03.683668"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:37:03.688101"], ["updated_at", "2025-07-09 15:37:03.688101"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:37:03.692623"], ["updated_at", "2025-07-09 15:37:03.692623"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "youthacademy.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Youth Academy"], ["domain", "youthacademy.org"], ["description", "Educational organization for young learners"], ["participation_type", "restricted"], ["created_at", "2025-07-09 15:37:03.701083"], ["updated_at", "2025-07-09 15:37:03.701083"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:37:03.705246"], ["updated_at", "2025-07-09 15:37:03.705246"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:37:03.714931"], ["updated_at", "2025-07-09 15:37:03.714931"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:37:03.725010"], ["updated_at", "2025-07-09 15:37:03.725010"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.0ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:37:03.732498"], ["updated_at", "2025-07-09 15:37:03.732498"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:37:03.741331"], ["updated_at", "2025-07-09 15:37:03.741331"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.4ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Community Center"], ["domain", "communitycenter.org"], ["description", "Public community organization open to all ages"], ["participation_type", "public"], ["created_at", "2025-07-09 15:37:03.752383"], ["updated_at", "2025-07-09 15:37:03.752383"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 15:37:03.757321"], ["updated_at", "2025-07-09 15:37:03.757321"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.6ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 15:37:03.768058"], ["updated_at", "2025-07-09 15:37:03.768058"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 15:37:03.780246"], ["updated_at", "2025-07-09 15:37:03.780246"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.3ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 15:37:03.788206"], ["updated_at", "2025-07-09 15:37:03.788206"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 15:37:03.796774"], ["updated_at", "2025-07-09 15:37:03.796774"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "admin@techcorp.com"], ["encrypted_password", "$2a$12$njqCtgLzKJbiCrdDf0OEaePRYsTot1T6GuJVejBKNAtUM9Fl/dIY."], ["first_name", "John"], ["last_name", "Admin"], ["date_of_birth", "1990-07-09"], ["age", 35], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 15:37:04.150224"], ["updated_at", "2025-07-09 15:37:04.150224"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "manager@techcorp.com"], ["encrypted_password", "$2a$12$F3xpwbvU313X6oJkzYC8Uul2NDSCpKp1EKuKL7QcWYs/n2UGX4k3S"], ["first_name", "Sarah"], ["last_name", "Manager"], ["date_of_birth", "1997-07-09"], ["age", 28], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 15:37:04.449844"], ["updated_at", "2025-07-09 15:37:04.449844"]]
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teacher@youthacademy.org"], ["encrypted_password", "$2a$12$h.cYCGtTBnzNG5phHzPZeu5.qoNdidJFKpGCTPKpM679H7aXiAJHO"], ["first_name", "Michael"], ["last_name", "Teacher"], ["date_of_birth", "1983-07-09"], ["age", 42], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:37:04.751329"], ["updated_at", "2025-07-09 15:37:04.751329"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent1@example.com"], ["encrypted_password", "$2a$12$no0YW8bm4tj4xXPaldOTNO53zOqmrlxJE/L6DVW1JON4PSNQSjssW"], ["first_name", "Lisa"], ["last_name", "Parent"], ["date_of_birth", "1985-07-09"], ["age", 40], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:37:05.054282"], ["updated_at", "2025-07-09 15:37:05.054282"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent2@example.com"], ["encrypted_password", "$2a$12$2Gu299HU4JOJSA9HIpdH3uSXVPYB.cxtMAqb69rGyVgkTT/isH.ji"], ["first_name", "David"], ["last_name", "Guardian"], ["date_of_birth", "1987-07-09"], ["age", 38], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:37:05.359577"], ["updated_at", "2025-07-09 15:37:05.359577"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen1@youthacademy.org"], ["encrypted_password", "$2a$12$Xk9htkmWOsHN0NE5INAyoe7LKXhtW0tQe0PMSK1gonGZbijmjT0k6"], ["first_name", "Alex"], ["last_name", "Teen"], ["date_of_birth", "2010-07-09"], ["age", 15], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:37:05.659290"], ["updated_at", "2025-07-09 15:37:05.659290"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen2@communitycenter.org"], ["encrypted_password", "$2a$12$H4fsEV7.VLIob2xzAqOTGuRsT0U4OYrlNL9EChhgUfdWbhi.OQD.q"], ["first_name", "Jordan"], ["last_name", "Student"], ["date_of_birth", "2009-07-09"], ["age", 16], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:37:05.964294"], ["updated_at", "2025-07-09 15:37:05.964294"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child1@youthacademy.org"], ["encrypted_password", "$2a$12$LFL.shvYZ6rmKds2a8UXA..X4u1owI1CxvQTM8g2IjsPKMqCsOyjW"], ["first_name", "Emma"], ["last_name", "Child"], ["date_of_birth", "2015-07-09"], ["age", 10], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 15:37:06.262716"], ["updated_at", "2025-07-09 15:37:06.262716"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child2@communitycenter.org"], ["encrypted_password", "$2a$12$A8VC7V1dl30ga47q/BzQfOgN2tR5GQe67WiBTHkLUjaslmFE34hPK"], ["first_name", "Lucas"], ["last_name", "Young"], ["date_of_birth", "2017-07-09"], ["age", 8], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 15:37:06.568692"], ["updated_at", "2025-07-09 15:37:06.568692"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.9ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:37:06.587863"], ["updated_at", "2025-07-09 15:37:06.587863"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 1], ["role_id", 1], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (1.2ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["role_id", 1], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:37:06.612241"], ["updated_at", "2025-07-09 15:37:06.612241"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.3ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:37:06.619022"], ["updated_at", "2025-07-09 15:37:06.619022"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 1], ["role_id", 2], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["role_id", 2], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:37:06.625480"], ["updated_at", "2025-07-09 15:37:06.625480"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.2ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:37:06.629720"], ["updated_at", "2025-07-09 15:37:06.629720"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 2], ["role_id", 3], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["role_id", 3], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:37:06.636002"], ["updated_at", "2025-07-09 15:37:06.636002"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 2], ["role_id", 2], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["role_id", 2], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 15:37:06.642630"], ["updated_at", "2025-07-09 15:37:06.642630"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.3ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 15:37:06.651281"], ["updated_at", "2025-07-09 15:37:06.651281"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 3], ["role_id", 4], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 3], ["role_id", 4], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 15:37:06.662043"], ["updated_at", "2025-07-09 15:37:06.662043"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.6ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 15:37:06.668361"], ["updated_at", "2025-07-09 15:37:06.668361"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 3], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.8ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 3], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 15:37:06.680082"], ["updated_at", "2025-07-09 15:37:06.680082"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 6], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 15:37:06.690135"], ["updated_at", "2025-07-09 15:37:06.690135"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 8], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 8], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 15:37:06.696268"], ["updated_at", "2025-07-09 15:37:06.696268"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.7ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:37:06.705816"], ["updated_at", "2025-07-09 15:37:06.705816"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 4], ["role_id", 6], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.5ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 4], ["role_id", 6], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:37:06.717233"], ["updated_at", "2025-07-09 15:37:06.717233"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.3ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:37:06.722349"], ["updated_at", "2025-07-09 15:37:06.722349"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 4], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.5ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 4], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:37:06.733973"], ["updated_at", "2025-07-09 15:37:06.733973"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.3ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:37:06.739985"], ["updated_at", "2025-07-09 15:37:06.739985"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 5], ["role_id", 8], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["role_id", 8], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:37:06.747691"], ["updated_at", "2025-07-09 15:37:06.747691"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 5], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:37:06.754252"], ["updated_at", "2025-07-09 15:37:06.754252"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 7], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 7], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:37:06.760890"], ["updated_at", "2025-07-09 15:37:06.760890"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 9], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 9], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 15:37:06.767637"], ["updated_at", "2025-07-09 15:37:06.767637"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Create (2.2ms)[0m  [1m[32mINSERT INTO "parental_consents" ("parent_id", "child_id", "consent_date", "expiry_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_id", 4], ["child_id", 6], ["consent_date", "2025-07-09"], ["expiry_date", "2026-07-09"], ["created_at", "2025-07-09 15:37:06.795451"], ["updated_at", "2025-07-09 15:37:06.795451"]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 2], ["name", "admin"]]
  ↳ app/models/parental_consent.rb:129:in `notify_organization_admins'
Parental consent request created for Alex Teen in Youth Academy. Admin teacher@youthacademy.org notified.
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 AND "parental_consents"."id" != $2 LIMIT $3[0m  [["child_id", 6], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mParentalConsent Update (0.8ms)[0m  [1m[33mUPDATE "parental_consents" SET "approved" = $1, "approved_by_id" = $2, "approved_at" = $3, "updated_at" = $4 WHERE "parental_consents"."id" = $5[0m  [["approved", true], ["approved_by_id", 4], ["approved_at", "2025-07-09 15:37:06.820462"], ["updated_at", "2025-07-09 15:37:06.823639"], ["id", 1]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 8], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Create (0.4ms)[0m  [1m[32mINSERT INTO "parental_consents" ("parent_id", "child_id", "consent_date", "expiry_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_id", 3], ["child_id", 8], ["consent_date", "2025-07-09"], ["expiry_date", "2026-07-09"], ["created_at", "2025-07-09 15:37:06.832855"], ["updated_at", "2025-07-09 15:37:06.832855"]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 2], ["name", "admin"]]
  ↳ app/models/parental_consent.rb:129:in `notify_organization_admins'
Parental consent request created for Emma Child in Youth Academy. Admin teacher@youthacademy.org notified.
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mParentalConsent Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 AND "parental_consents"."id" != $2 LIMIT $3[0m  [["child_id", 8], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mParentalConsent Update (0.6ms)[0m  [1m[33mUPDATE "parental_consents" SET "approved" = $1, "approved_by_id" = $2, "approved_at" = $3, "updated_at" = $4 WHERE "parental_consents"."id" = $5[0m  [["approved", true], ["approved_by_id", 3], ["approved_at", "2025-07-09 15:37:06.839768"], ["updated_at", "2025-07-09 15:37:06.847362"], ["id", 2]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 7], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Create (0.7ms)[0m  [1m[32mINSERT INTO "parental_consents" ("parent_id", "child_id", "consent_date", "expiry_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_id", 5], ["child_id", 7], ["consent_date", "2025-07-09"], ["expiry_date", "2026-07-09"], ["created_at", "2025-07-09 15:37:06.860005"], ["updated_at", "2025-07-09 15:37:06.860005"]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mOrganization Load (0.9ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 3], ["name", "admin"]]
  ↳ app/models/parental_consent.rb:129:in `notify_organization_admins'
Parental consent request created for Jordan Student in Community Center. Admin parent1@example.com notified.
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
Started GET "/" for ::1 at 2025-07-09 20:41:21 +0500
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 21ms (ActiveRecord: 0.0ms | Allocations: 3246)


Started GET "/users/sign_in" for ::1 at 2025-07-09 20:41:21 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.6ms | Allocations: 651)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 16.4ms | Allocations: 4353)
[Webpacker] Compiling...
[Webpacker] Compilation failed:
/Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/activesupport-6.0.6.1/lib/active_support/logger_thread_safe_level.rb:16:in `<module:LoggerThreadSafeLevel>': uninitialized constant ActiveSupport::LoggerThreadSafeLevel::Logger (NameError)
	from /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/activesupport-6.0.6.1/lib/active_support/logger_thread_safe_level.rb:9:in `<module:ActiveSupport>'
	from /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/activesupport-6.0.6.1/lib/active_support/logger_thread_safe_level.rb:8:in `<top (required)>'
	from /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/activesupport-6.0.6.1/lib/active_support/logger_silence.rb:5:in `require'
	from /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/activesupport-6.0.6.1/lib/active_support/logger_silence.rb:5:in `<top (required)>'
	from /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/activesupport-6.0.6.1/lib/active_support/logger.rb:3:in `require'
	from /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/activesupport-6.0.6.1/lib/active_support/logger.rb:3:in `<top (required)>'
	from /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/webpacker-4.3.0/lib/webpacker.rb:3:in `require'
	from /Users/sabarafique/.rvm/gems/ruby-2.5.9/gems/webpacker-4.3.0/lib/webpacker.rb:3:in `<top (required)>'
	from ./bin/webpack:12:in `require'
	from ./bin/webpack:12:in `<main>'

Completed 500 Internal Server Error in 1053ms (ActiveRecord: 5.5ms | Allocations: 43782)


  
ActionView::Template::Error (Webpacker can't find application in /Users/sabarafique/Desktop/projects/org_access_control_app/public/packs/manifest.json. Possible causes:
1. You want to set webpacker.yml value of compile to true for your environment
   unless you are using the `webpack -w` or the webpack-dev-server.
2. webpack has not yet re-run to reflect updates.
3. You have misconfigured Webpacker's config/webpacker.yml file.
4. Your webpack configuration is not creating a manifest.
Your manifest contains:
{
}
):
     7:     <%= csp_meta_tag %>
     8: 
     9:     <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    10:     <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    11:     <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    12:     <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    13:     <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.min.js"></script>
  
app/views/layouts/application.html.erb:10
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (5066.5ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (6.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (74.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db"[0m
  [1m[35m (62.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "org_access_db_test"[0m
  [1m[35m (202.6ms)[0m  [1m[35mCREATE DATABASE "org_access_db" ENCODING = 'unicode'[0m
  [1m[35m (152.4ms)[0m  [1m[35mCREATE DATABASE "org_access_db_test" ENCODING = 'unicode'[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(1458885612628655505)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateOrganizations (20240101000001)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.6ms)[0m  [1m[35mCREATE TABLE "organizations" ("id" bigserial primary key, "name" character varying NOT NULL, "domain" character varying NOT NULL, "description" text, "participation_type" character varying DEFAULT 'private', "active" boolean DEFAULT TRUE, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_name" ON "organizations"  ("name")[0m
  [1m[35m (3.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_organizations_on_domain" ON "organizations"  ("domain")[0m
  [1m[35m (1.7ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_participation_type" ON "organizations"  ("participation_type")[0m
  [1m[35m (2.1ms)[0m  [1m[35mCREATE  INDEX  "index_organizations_on_active" ON "organizations"  ("active")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000001"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsers (20240101000002)
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (12.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "first_name" character varying NOT NULL, "last_name" character varying NOT NULL, "date_of_birth" date NOT NULL, "age" integer, "phone_number" character varying, "bio" text, "avatar_url" character varying, "organization_id" bigint, "email_verified" boolean DEFAULT FALSE, "phone_verified" boolean DEFAULT FALSE, "identity_verified" boolean DEFAULT FALSE, "active" boolean DEFAULT TRUE, "last_login_at" timestamp, "last_login_ip" inet, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_d7b9ff90af"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_organization_id" ON "users"  ("organization_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (4.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_age" ON "users"  ("age")[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_active" ON "users"  ("active")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_email_verified" ON "users"  ("email_verified")[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_users_on_identity_verified" ON "users"  ("identity_verified")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000002"]]
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateRoles (20240101000003)
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE TABLE "roles" ("id" bigserial primary key, "name" character varying, "resource_type" character varying, "resource_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_resource_type_and_resource_id" ON "roles"  ("resource_type", "resource_id")[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "users_roles" ("user_id" bigint, "role_id" bigint)[0m
  [1m[35m (2.5ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id" ON "users_roles"  ("user_id")[0m
  [1m[35m (3.7ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_role_id" ON "users_roles"  ("role_id")[0m
  [1m[35m (2.7ms)[0m  [1m[35mCREATE  INDEX  "index_roles_on_name_and_resource_type_and_resource_id" ON "roles"  ("name", "resource_type", "resource_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_users_roles_on_user_id_and_role_id" ON "users_roles"  ("user_id", "role_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000003"]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParticipationRules (20240101000005)
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.8ms)[0m  [1m[35mCREATE TABLE "participation_rules" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "age_group" character varying NOT NULL, "minimum_age" integer NOT NULL, "maximum_age" integer NOT NULL, "enabled" boolean DEFAULT TRUE, "requires_parental_consent" boolean DEFAULT FALSE, "content_filtering_level" character varying DEFAULT 'minimal', "participation_restrictions" jsonb DEFAULT '[]', "description" text, "settings" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_f4e4065e2e"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_organization_id" ON "participation_rules"  ("organization_id")[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_participation_rules_on_organization_id_and_age_group" ON "participation_rules"  ("organization_id", "age_group")[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_enabled" ON "participation_rules"  ("enabled")[0m
  [1m[35m (3.4ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_requires_parental_consent" ON "participation_rules"  ("requires_parental_consent")[0m
  [1m[35m (8.0ms)[0m  [1m[35mCREATE  INDEX  "index_participation_rules_on_content_filtering_level" ON "participation_rules"  ("content_filtering_level")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000005"]]
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateParentalConsents (20240101000006)
  [1m[35m (2.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (20.1ms)[0m  [1m[35mCREATE TABLE "parental_consents" ("id" bigserial primary key, "parent_id" bigint NOT NULL, "child_id" bigint NOT NULL, "approved" boolean DEFAULT FALSE, "consent_date" date NOT NULL, "expiry_date" date NOT NULL, "approved_by_id" bigint, "approved_at" timestamp, "revoked_by_id" bigint, "revoked_at" timestamp, "notes" text, "consent_details" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_1fd0aaaf75"
FOREIGN KEY ("parent_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_28627dc0dc"
FOREIGN KEY ("child_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_32eaa27bbd"
FOREIGN KEY ("approved_by_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_1eec64c65c"
FOREIGN KEY ("revoked_by_id")
  REFERENCES "users" ("id")
)[0m
  [1m[35m (2.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_parental_consents_on_child_id" ON "parental_consents"  ("child_id")[0m
  [1m[35m (3.1ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_approved" ON "parental_consents"  ("approved")[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_expiry_date" ON "parental_consents"  ("expiry_date")[0m
  [1m[35m (3.5ms)[0m  [1m[35mCREATE  INDEX  "index_parental_consents_on_consent_date" ON "parental_consents"  ("consent_date")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000006"]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateOrganizationAnalytics (20240101000007)
  [1m[35m (3.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (14.5ms)[0m  [1m[35mCREATE TABLE "organization_analytics" ("id" bigserial primary key, "organization_id" bigint NOT NULL, "total_members" integer DEFAULT 0 NOT NULL, "admin_count" integer DEFAULT 0 NOT NULL, "age_group_breakdown" jsonb DEFAULT '{}', "participation_rate" decimal(5,2) DEFAULT 0.0 NOT NULL, "generated_at" timestamp NOT NULL, "report_period" character varying, "period_start" timestamp, "period_end" timestamp, "new_members_count" integer DEFAULT 0, "active_members_count" integer DEFAULT 0, "active_users_7_days" integer DEFAULT 0, "active_users_30_days" integer DEFAULT 0, "new_members_this_month" integer DEFAULT 0, "members_by_role" jsonb DEFAULT '{}', "average_age" decimal(4,1), "minor_percentage" decimal(5,2), "additional_metrics" jsonb DEFAULT '{}', "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_aaf02dc4fd"
FOREIGN KEY ("organization_id")
  REFERENCES "organizations" ("id")
)[0m
  [1m[35m (4.1ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_organization_id" ON "organization_analytics"  ("organization_id")[0m
  [1m[35m (2.2ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_generated_at" ON "organization_analytics"  ("generated_at")[0m
  [1m[35m (1.5ms)[0m  [1m[35mCREATE  INDEX  "index_organization_analytics_on_report_period" ON "organization_analytics"  ("report_period")[0m
  [1m[35m (4.0ms)[0m  [1m[35mCREATE  INDEX  "index_org_analytics_on_org_id_and_generated_at" ON "organization_analytics"  ("organization_id", "generated_at")[0m
  [1m[36mActiveRecord::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20240101000007"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUserRoles (20250709153411)
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.5ms)[0m  [1m[35mCREATE TABLE "user_roles" ("id" bigserial primary key, "user_id" bigint NOT NULL, "role_id" bigint NOT NULL, "resource_type" character varying, "resource_id" bigint, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, CONSTRAINT "fk_rails_318345354e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
, CONSTRAINT "fk_rails_3369e0d5fc"
FOREIGN KEY ("role_id")
  REFERENCES "roles" ("id")
)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_user_id" ON "user_roles"  ("user_id")[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_role_id" ON "user_roles"  ("role_id")[0m
  [1m[35m (3.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_user_roles_on_user_role_resource" ON "user_roles"  ("user_id", "role_id", "resource_type", "resource_id")[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE  INDEX  "index_user_roles_on_resource_type_and_resource_id" ON "user_roles"  ("resource_type", "resource_id")[0m
  [1m[36mActiveRecord::SchemaMigration Create (1.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20250709153411"]]
  [1m[35m (2.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.0ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2025-07-09 16:10:44.077912"], ["updated_at", "2025-07-09 16:10:44.077912"]]
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(1458885612628655505)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mParentalConsent Load (1.0ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents"[0m
  [1m[36mUserRole Load (0.8ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles"[0m
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users"[0m
  [1m[36mOrganization Load (0.9ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles"[0m
  [1m[36mParticipationRule Load (0.9ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules"[0m
  [1m[36mOrganizationAnalytics Load (1.2ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics"[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "techcorp.com"], ["LIMIT", 1]]
  [1m[36mOrganization Create (1.9ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "TechCorp Inc."], ["domain", "techcorp.com"], ["description", "A technology company focused on innovation and collaboration"], ["created_at", "2025-07-09 16:10:44.396074"], ["updated_at", "2025-07-09 16:10:44.396074"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (2.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 16:10:44.451096"], ["updated_at", "2025-07-09 16:10:44.451096"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 16:10:44.458853"], ["updated_at", "2025-07-09 16:10:44.458853"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 16:10:44.463184"], ["updated_at", "2025-07-09 16:10:44.463184"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 16:10:44.467633"], ["updated_at", "2025-07-09 16:10:44.467633"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 1], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 16:10:44.472557"], ["updated_at", "2025-07-09 16:10:44.472557"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "youthacademy.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.3ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Youth Academy"], ["domain", "youthacademy.org"], ["description", "Educational organization for young learners"], ["participation_type", "restricted"], ["created_at", "2025-07-09 16:10:44.481000"], ["updated_at", "2025-07-09 16:10:44.481000"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 16:10:44.485118"], ["updated_at", "2025-07-09 16:10:44.485118"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 16:10:44.495173"], ["updated_at", "2025-07-09 16:10:44.495173"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.1ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 16:10:44.504823"], ["updated_at", "2025-07-09 16:10:44.504823"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.6ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 16:10:44.516368"], ["updated_at", "2025-07-09 16:10:44.516368"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 2], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 16:10:44.526627"], ["updated_at", "2025-07-09 16:10:44.526627"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mOrganization Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "organizations" WHERE "organizations"."domain" = $1 LIMIT $2[0m  [["domain", "communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Create (0.4ms)[0m  [1m[32mINSERT INTO "organizations" ("name", "domain", "description", "participation_type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "Community Center"], ["domain", "communitycenter.org"], ["description", "Public community organization open to all ages"], ["participation_type", "public"], ["created_at", "2025-07-09 16:10:44.539747"], ["updated_at", "2025-07-09 16:10:44.539747"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.6ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "child"], ["minimum_age", 0], ["maximum_age", 12], ["requires_parental_consent", true], ["content_filtering_level", "strict"], ["participation_restrictions", "[\"supervised_participation\",\"limited_content_creation\"]"], ["created_at", "2025-07-09 16:10:44.545874"], ["updated_at", "2025-07-09 16:10:44.545874"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.3ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "requires_parental_consent", "content_filtering_level", "participation_restrictions", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "teen"], ["minimum_age", 13], ["maximum_age", 17], ["requires_parental_consent", true], ["content_filtering_level", "moderate"], ["participation_restrictions", "[\"moderated_content\",\"limited_private_messaging\"]"], ["created_at", "2025-07-09 16:10:44.560986"], ["updated_at", "2025-07-09 16:10:44.560986"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (1.7ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "young_adult"], ["minimum_age", 18], ["maximum_age", 25], ["created_at", "2025-07-09 16:10:44.574187"], ["updated_at", "2025-07-09 16:10:44.574187"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.5ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "adult"], ["minimum_age", 26], ["maximum_age", 64], ["created_at", "2025-07-09 16:10:44.589607"], ["updated_at", "2025-07-09 16:10:44.589607"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mParticipationRule Create (0.4ms)[0m  [1m[32mINSERT INTO "participation_rules" ("organization_id", "age_group", "minimum_age", "maximum_age", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["organization_id", 3], ["age_group", "senior"], ["minimum_age", 65], ["maximum_age", 120], ["created_at", "2025-07-09 16:10:44.599196"], ["updated_at", "2025-07-09 16:10:44.599196"]]
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/participation_rule.rb:24:in `block in default_rules_for_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "admin@techcorp.com"], ["encrypted_password", "$2a$12$HpFPhZVwQKoIkN80WbJQv.rrOLkHVQdaQmn1BC1XV1UaTRa/bZZW2"], ["first_name", "John"], ["last_name", "Admin"], ["date_of_birth", "1990-07-09"], ["age", 35], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 16:10:44.957764"], ["updated_at", "2025-07-09 16:10:44.957764"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "manager@techcorp.com"], ["encrypted_password", "$2a$12$EBRQgmetU98ZEOVmOItAuuu.dBBNAWbTt3Cc1.Px/.v3QA9y.eZnq"], ["first_name", "Sarah"], ["last_name", "Manager"], ["date_of_birth", "1997-07-09"], ["age", 28], ["organization_id", 1], ["email_verified", true], ["created_at", "2025-07-09 16:10:45.264170"], ["updated_at", "2025-07-09 16:10:45.264170"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teacher@youthacademy.org"], ["encrypted_password", "$2a$12$H5eKe8XSww.mDzqk7HoKL.XuWWfdIZJgyAaZeKTZpEMcIdCOy1eBy"], ["first_name", "Michael"], ["last_name", "Teacher"], ["date_of_birth", "1983-07-09"], ["age", 42], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 16:10:45.569366"], ["updated_at", "2025-07-09 16:10:45.569366"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent1@example.com"], ["encrypted_password", "$2a$12$LMCcAfm8rALdYfgYXEYAIOggAL4JSg8zAeT4/LbX7KXrliuKZSeny"], ["first_name", "Lisa"], ["last_name", "Parent"], ["date_of_birth", "1985-07-09"], ["age", 40], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 16:10:45.950869"], ["updated_at", "2025-07-09 16:10:45.950869"]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "parent2@example.com"], ["encrypted_password", "$2a$12$BWT04GUL0Ekuy2fD2a0jTOrij2YQssLreYZlzostcsCp38RcTyJMW"], ["first_name", "David"], ["last_name", "Guardian"], ["date_of_birth", "1987-07-09"], ["age", 38], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 16:10:46.251952"], ["updated_at", "2025-07-09 16:10:46.251952"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.4ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen1@youthacademy.org"], ["encrypted_password", "$2a$12$s7WYdTeWprFzgfZ1zcEfaugY8i67.JMA9gIXsv6Ds1YlY/LpQbgu."], ["first_name", "Alex"], ["last_name", "Teen"], ["date_of_birth", "2010-07-09"], ["age", 15], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 16:10:46.551651"], ["updated_at", "2025-07-09 16:10:46.551651"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "teen2@communitycenter.org"], ["encrypted_password", "$2a$12$VhsrOemr4m4/GiGKKDZ0FuvtKB7IfqGTjBVPeQPp6c21aV8SgmxMG"], ["first_name", "Jordan"], ["last_name", "Student"], ["date_of_birth", "2009-07-09"], ["age", 16], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 16:10:46.856565"], ["updated_at", "2025-07-09 16:10:46.856565"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child1@youthacademy.org"], ["encrypted_password", "$2a$12$y2BXzUguenuTCkqSLNkP.ut/jOd6W.Y./JWSw5LicSNnYsy2mYRkq"], ["first_name", "Emma"], ["last_name", "Child"], ["date_of_birth", "2015-07-09"], ["age", 10], ["organization_id", 2], ["email_verified", true], ["created_at", "2025-07-09 16:10:47.155890"], ["updated_at", "2025-07-09 16:10:47.155890"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Create (0.3ms)[0m  [1m[32mINSERT INTO "users" ("email", "encrypted_password", "first_name", "last_name", "date_of_birth", "age", "organization_id", "email_verified", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10) RETURNING "id"[0m  [["email", "child2@communitycenter.org"], ["encrypted_password", "$2a$12$F275fk.nukGZKKakELa4Ju7jR.bll6jgAvVaq65eChV/rEv3u51Wq"], ["first_name", "Lucas"], ["last_name", "Young"], ["date_of_birth", "2017-07-09"], ["age", 8], ["organization_id", 3], ["email_verified", true], ["created_at", "2025-07-09 16:10:47.460663"], ["updated_at", "2025-07-09 16:10:47.460663"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "TechCorp Inc."], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "manager@techcorp.com"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.9ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 16:10:47.480545"], ["updated_at", "2025-07-09 16:10:47.480545"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 1], ["role_id", 1], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (1.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["role_id", 1], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 16:10:47.506889"], ["updated_at", "2025-07-09 16:10:47.506889"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.3ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 16:10:47.512902"], ["updated_at", "2025-07-09 16:10:47.512902"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 1], ["role_id", 2], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 1], ["role_id", 2], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 16:10:47.521075"], ["updated_at", "2025-07-09 16:10:47.521075"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.2ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 16:10:47.526659"], ["updated_at", "2025-07-09 16:10:47.526659"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 2], ["role_id", 3], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["role_id", 3], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 16:10:47.532720"], ["updated_at", "2025-07-09 16:10:47.532720"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 2], ["role_id", 2], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 2], ["role_id", 2], ["resource_type", "Organization"], ["resource_id", 1], ["created_at", "2025-07-09 16:10:47.539488"], ["updated_at", "2025-07-09 16:10:47.539488"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Youth Academy"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.3ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 16:10:47.548112"], ["updated_at", "2025-07-09 16:10:47.548112"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 3], ["role_id", 4], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (1.0ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 3], ["role_id", 4], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 16:10:47.558035"], ["updated_at", "2025-07-09 16:10:47.558035"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.7ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 16:10:47.566560"], ["updated_at", "2025-07-09 16:10:47.566560"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 3], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (1.2ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 3], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 16:10:47.579189"], ["updated_at", "2025-07-09 16:10:47.579189"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 6], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 6], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 16:10:47.587944"], ["updated_at", "2025-07-09 16:10:47.587944"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 8], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 8], ["role_id", 5], ["resource_type", "Organization"], ["resource_id", 2], ["created_at", "2025-07-09 16:10:47.594212"], ["updated_at", "2025-07-09 16:10:47.594212"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."name" = $1 LIMIT $2[0m  [["name", "Community Center"], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.3ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 16:10:47.604157"], ["updated_at", "2025-07-09 16:10:47.604157"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 4], ["role_id", 6], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 4], ["role_id", 6], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 16:10:47.610759"], ["updated_at", "2025-07-09 16:10:47.610759"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (0.4ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 16:10:47.614838"], ["updated_at", "2025-07-09 16:10:47.614838"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 4], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.6ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 4], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 16:10:47.627585"], ["updated_at", "2025-07-09 16:10:47.627585"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[36mRole Create (1.2ms)[0m  [1m[32mINSERT INTO "roles" ("name", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "moderator"], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 16:10:47.634479"], ["updated_at", "2025-07-09 16:10:47.634479"]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 5], ["role_id", 8], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["role_id", 8], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 16:10:47.646528"], ["updated_at", "2025-07-09 16:10:47.646528"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 5], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 5], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 16:10:47.654892"], ["updated_at", "2025-07-09 16:10:47.654892"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 7], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.4ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 7], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 16:10:47.661922"], ["updated_at", "2025-07-09 16:10:47.661922"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "participant"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:13:in `assign_role'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 AND "user_roles"."resource_type" = $3 AND "user_roles"."resource_id" = $4 LIMIT $5[0m  [["user_id", 9], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUserRole Create (0.3ms)[0m  [1m[32mINSERT INTO "user_roles" ("user_id", "role_id", "resource_type", "resource_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["user_id", 9], ["role_id", 7], ["resource_type", "Organization"], ["resource_id", 3], ["created_at", "2025-07-09 16:10:47.668890"], ["updated_at", "2025-07-09 16:10:47.668890"]]
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/user_role.rb:14:in `assign_role'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Create (1.5ms)[0m  [1m[32mINSERT INTO "parental_consents" ("parent_id", "child_id", "consent_date", "expiry_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_id", 4], ["child_id", 6], ["consent_date", "2025-07-09"], ["expiry_date", "2026-07-09"], ["created_at", "2025-07-09 16:10:47.707452"], ["updated_at", "2025-07-09 16:10:47.707452"]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 2], ["name", "admin"]]
  ↳ app/models/parental_consent.rb:129:in `notify_organization_admins'
Parental consent request created for Alex Teen in Youth Academy. Admin teacher@youthacademy.org notified.
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 AND "parental_consents"."id" != $2 LIMIT $3[0m  [["child_id", 6], ["id", 1], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mParentalConsent Update (0.6ms)[0m  [1m[33mUPDATE "parental_consents" SET "approved" = $1, "approved_by_id" = $2, "approved_at" = $3, "updated_at" = $4 WHERE "parental_consents"."id" = $5[0m  [["approved", true], ["approved_by_id", 4], ["approved_at", "2025-07-09 16:10:47.729273"], ["updated_at", "2025-07-09 16:10:47.732381"], ["id", 1]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 8], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Create (0.5ms)[0m  [1m[32mINSERT INTO "parental_consents" ("parent_id", "child_id", "consent_date", "expiry_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_id", 3], ["child_id", 8], ["consent_date", "2025-07-09"], ["expiry_date", "2026-07-09"], ["created_at", "2025-07-09 16:10:47.740871"], ["updated_at", "2025-07-09 16:10:47.740871"]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 2], ["name", "admin"]]
  ↳ app/models/parental_consent.rb:129:in `notify_organization_admins'
Parental consent request created for Emma Child in Youth Academy. Admin teacher@youthacademy.org notified.
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mParentalConsent Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 AND "parental_consents"."id" != $2 LIMIT $3[0m  [["child_id", 8], ["id", 2], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mParentalConsent Update (1.4ms)[0m  [1m[33mUPDATE "parental_consents" SET "approved" = $1, "approved_by_id" = $2, "approved_at" = $3, "updated_at" = $4 WHERE "parental_consents"."id" = $5[0m  [["approved", true], ["approved_by_id", 3], ["approved_at", "2025-07-09 16:10:47.747678"], ["updated_at", "2025-07-09 16:10:47.754169"], ["id", 2]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "teen2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "parent2@example.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 7], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mParentalConsent Create (1.5ms)[0m  [1m[32mINSERT INTO "parental_consents" ("parent_id", "child_id", "consent_date", "expiry_date", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["parent_id", 5], ["child_id", 7], ["consent_date", "2025-07-09"], ["expiry_date", "2026-07-09"], ["created_at", "2025-07-09 16:10:47.771617"], ["updated_at", "2025-07-09 16:10:47.771617"]]
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 3], ["name", "admin"]]
  ↳ app/models/parental_consent.rb:129:in `notify_organization_admins'
Parental consent request created for Jordan Student in Community Center. Admin parent1@example.com notified.
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:28:in `create_for_minor'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "child2@communitycenter.org"], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
Started GET "/users/sign_in" for ::1 at 2025-07-09 21:11:07 +0500
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.9ms | Allocations: 651)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 24.3ms | Allocations: 6781)
Completed 200 OK in 102ms (Views: 51.1ms | ActiveRecord: 6.3ms | Allocations: 34840)


Started POST "/users/sign_in" for ::1 at 2025-07-09 21:11:50 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"4cZytylkRzk6o0/LczlWOgdIX0wWJWyRk+NWi7slM0x1150fijwNpWd6rccFg8gWOAVYRFcgjLtzxufoSQlbjg==", "user"=>{"email"=>"admin@techcorp.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-09 16:11:50.458379"], ["updated_at", "2025-07-09 16:11:50.458989"], ["id", 1]]
  [1m[35m (0.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 335ms (ActiveRecord: 3.6ms | Allocations: 13257)


Started GET "/" for ::1 at 2025-07-09 21:11:50 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.8ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:7:in `index'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 48.4ms | Allocations: 21659)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 500 Internal Server Error in 152ms (Views: 51.4ms | ActiveRecord: 23.6ms | Allocations: 64483)


  
Pundit::PolicyScopingNotPerformedError (DashboardController):
  
pundit (2.5.0) lib/pundit/authorization.rb:185:in `verify_policy_scoped'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/" for ::1 at 2025-07-09 21:12:00 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:7:in `index'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.9ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 16.6ms | Allocations: 5836)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 500 Internal Server Error in 44ms (Views: 20.3ms | ActiveRecord: 7.1ms | Allocations: 16721)


  
Pundit::PolicyScopingNotPerformedError (DashboardController):
  
pundit (2.5.0) lib/pundit/authorization.rb:185:in `verify_policy_scoped'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/" for ::1 at 2025-07-09 21:12:01 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:7:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 16.4ms | Allocations: 5789)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 500 Internal Server Error in 47ms (Views: 23.6ms | ActiveRecord: 6.7ms | Allocations: 16180)


  
Pundit::PolicyScopingNotPerformedError (DashboardController):
  
pundit (2.5.0) lib/pundit/authorization.rb:185:in `verify_policy_scoped'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/" for ::1 at 2025-07-09 21:22:28 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.9ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (1.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (3.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 37.4ms | Allocations: 19856)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 149ms (Views: 48.2ms | ActiveRecord: 12.4ms | Allocations: 70132)


Started GET "/organizations/1" for ::1 at 2025-07-09 21:22:54 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.5ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 23.8ms | Allocations: 8498)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 51ms (Views: 29.2ms | ActiveRecord: 5.8ms | Allocations: 19673)


Started GET "/organizations/1/members" for ::1 at 2025-07-09 21:22:56 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (4.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/controllers/organizations_controller.rb:75:in `members'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2)[0m  [["child_id", 1], ["child_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 1], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 2], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 52.1ms | Allocations: 21442)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 90ms (Views: 53.1ms | ActiveRecord: 14.3ms | Allocations: 35997)


Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 21:23:05 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 406 Not Acceptable in 28ms (ActiveRecord: 2.1ms | Allocations: 8893)


  
ActionController::MissingExactTemplate (OrganizationsController#participation_rules is missing a template for request formats: text/html):
  
actionpack (6.0.6.1) lib/action_controller/metal/implicit_render.rb:45:in `default_render'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `block in send_action'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `tap'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:195:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:112:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 21:23:15 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
Completed 422 Unprocessable Entity in 68ms (ActiveRecord: 8.9ms | Allocations: 30226)


  
ActiveRecord::RecordInvalid (Validation failed: Participation rate must be less than or equal to 100):
  
app/models/organization.rb:71:in `generate_analytics'
app/models/organization_analytics.rb:13:in `generate_daily_report'
app/controllers/organizations_controller.rb:66:in `analytics'
Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 21:23:26 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 406 Not Acceptable in 15ms (ActiveRecord: 1.4ms | Allocations: 7123)


  
ActionController::MissingExactTemplate (OrganizationsController#participation_rules is missing a template for request formats: text/html):
  
actionpack (6.0.6.1) lib/action_controller/metal/implicit_render.rb:45:in `default_render'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `block in send_action'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `tap'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:195:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:112:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/parental_consents" for ::1 at 2025-07-09 21:23:32 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 4.4ms | Allocations: 1500)
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 22ms (Views: 15.1ms | ActiveRecord: 1.3ms | Allocations: 9798)


Started GET "/parental_consents/new" for ::1 at 2025-07-09 21:23:33 +0500
Processing by ParentalConsentsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/new.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (age < 18)[0m
  ↳ app/views/parental_consents/new.html.erb:23
  Rendered parental_consents/new.html.erb within layouts/application (Duration: 13.0ms | Allocations: 4174)
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 47ms (Views: 22.4ms | ActiveRecord: 3.8ms | Allocations: 20856)


Started GET "/parental_consents" for ::1 at 2025-07-09 21:23:36 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 1.6ms | Allocations: 804)
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 19ms (Views: 14.1ms | ActiveRecord: 1.7ms | Allocations: 7610)


Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 21:23:39 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 406 Not Acceptable in 16ms (ActiveRecord: 1.5ms | Allocations: 7118)


  
ActionController::MissingExactTemplate (OrganizationsController#participation_rules is missing a template for request formats: text/html):
  
actionpack (6.0.6.1) lib/action_controller/metal/implicit_render.rb:45:in `default_render'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `block in send_action'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `tap'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:195:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:112:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/organizations/1/members" for ::1 at 2025-07-09 21:24:00 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/controllers/organizations_controller.rb:75:in `members'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2)[0m  [["child_id", 1], ["child_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 1], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 2], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 24.4ms | Allocations: 12058)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 52ms (Views: 27.9ms | ActiveRecord: 6.3ms | Allocations: 26406)


Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 21:24:02 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 406 Not Acceptable in 16ms (ActiveRecord: 1.3ms | Allocations: 7116)


  
ActionController::MissingExactTemplate (OrganizationsController#participation_rules is missing a template for request formats: text/html):
  
actionpack (6.0.6.1) lib/action_controller/metal/implicit_render.rb:45:in `default_render'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `block in send_action'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `tap'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:195:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:112:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/organizations" for ::1 at 2025-07-09 21:24:06 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 30.0ms | Allocations: 12701)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 47ms (Views: 30.9ms | ActiveRecord: 6.1ms | Allocations: 21015)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 21:24:15 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
Completed 422 Unprocessable Entity in 35ms (ActiveRecord: 6.9ms | Allocations: 14685)


  
ActiveRecord::RecordInvalid (Validation failed: Participation rate must be less than or equal to 100):
  
app/models/organization.rb:71:in `generate_analytics'
app/models/organization_analytics.rb:13:in `generate_daily_report'
app/controllers/organizations_controller.rb:66:in `analytics'
Started GET "/organizations/1" for ::1 at 2025-07-09 21:24:19 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 20.8ms | Allocations: 7720)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 47ms (Views: 26.7ms | ActiveRecord: 4.5ms | Allocations: 17676)


Started GET "/organizations/1/edit" for ::1 at 2025-07-09 21:24:23 +0500
Processing by OrganizationsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/edit.html.erb within layouts/application
  Rendered organizations/edit.html.erb within layouts/application (Duration: 4.8ms | Allocations: 2282)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 28ms (Views: 11.2ms | ActiveRecord: 1.8ms | Allocations: 12714)


Started GET "/organizations/1" for ::1 at 2025-07-09 21:24:25 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.8ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 19.0ms | Allocations: 7721)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 45ms (Views: 23.0ms | ActiveRecord: 4.6ms | Allocations: 17661)


Started GET "/dashboard" for ::1 at 2025-07-09 21:24:33 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 13.6ms | Allocations: 5791)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 37ms (Views: 17.6ms | ActiveRecord: 4.7ms | Allocations: 15844)


Started GET "/organizations/1" for ::1 at 2025-07-09 21:24:35 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 17.5ms | Allocations: 7720)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 38ms (Views: 21.8ms | ActiveRecord: 4.0ms | Allocations: 17681)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 21:24:36 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
Completed 422 Unprocessable Entity in 32ms (ActiveRecord: 5.8ms | Allocations: 14665)


  
ActiveRecord::RecordInvalid (Validation failed: Participation rate must be less than or equal to 100):
  
app/models/organization.rb:71:in `generate_analytics'
app/models/organization_analytics.rb:13:in `generate_daily_report'
app/controllers/organizations_controller.rb:66:in `analytics'
Started GET "/organizations/1/members" for ::1 at 2025-07-09 21:24:40 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/controllers/organizations_controller.rb:75:in `members'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2)[0m  [["child_id", 1], ["child_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 1], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 2], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 25.8ms | Allocations: 12054)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 54ms (Views: 29.8ms | ActiveRecord: 6.5ms | Allocations: 26381)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 21:24:41 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
Completed 422 Unprocessable Entity in 31ms (ActiveRecord: 5.8ms | Allocations: 14673)


  
ActiveRecord::RecordInvalid (Validation failed: Participation rate must be less than or equal to 100):
  
app/models/organization.rb:71:in `generate_analytics'
app/models/organization_analytics.rb:13:in `generate_daily_report'
app/controllers/organizations_controller.rb:66:in `analytics'
Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 21:24:53 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 406 Not Acceptable in 13ms (ActiveRecord: 1.4ms | Allocations: 7121)


  
ActionController::MissingExactTemplate (OrganizationsController#participation_rules is missing a template for request formats: text/html):
  
actionpack (6.0.6.1) lib/action_controller/metal/implicit_render.rb:45:in `default_render'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `block in send_action'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `tap'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:195:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:112:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/organizations" for ::1 at 2025-07-09 21:24:57 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 30.0ms | Allocations: 12219)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 44ms (Views: 31.4ms | ActiveRecord: 5.6ms | Allocations: 20390)


Started GET "/parental_consents" for ::1 at 2025-07-09 21:25:03 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 1.8ms | Allocations: 809)
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 16ms (Views: 9.9ms | ActiveRecord: 1.4ms | Allocations: 7640)


Started GET "/users/sign_out" for ::1 at 2025-07-09 21:25:08 +0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"sign_out"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
Completed 404 Not Found in 5ms (ActiveRecord: 0.6ms | Allocations: 3117)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=sign_out):
  
app/controllers/users_controller.rb:117:in `set_user'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:25:16 +0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"sign_out"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
Completed 404 Not Found in 7ms (ActiveRecord: 0.8ms | Allocations: 2919)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=sign_out):
  
app/controllers/users_controller.rb:117:in `set_user'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:25:18 +0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"sign_out"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
Completed 404 Not Found in 7ms (ActiveRecord: 0.7ms | Allocations: 2919)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=sign_out):
  
app/controllers/users_controller.rb:117:in `set_user'
Started GET "/" for ::1 at 2025-07-09 21:25:23 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 15.9ms | Allocations: 5788)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 42ms (Views: 21.6ms | ActiveRecord: 6.3ms | Allocations: 15795)


Started GET "/users/sign_out" for ::1 at 2025-07-09 21:25:26 +0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"sign_out"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", nil], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
Completed 404 Not Found in 8ms (ActiveRecord: 0.7ms | Allocations: 2928)


  
ActiveRecord::RecordNotFound (Couldn't find User with 'id'=sign_out):
  
app/controllers/users_controller.rb:117:in `set_user'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:38:46 +0500
  
ActionController::RoutingError (No route matches [GET] "/users/sign_out"):
  
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:41:18 +0500
  
ActionController::RoutingError (No route matches [GET] "/users/sign_out"):
  
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:41:22 +0500
  
ActionController::RoutingError (No route matches [GET] "/users/sign_out"):
  
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:42:11 +0500
  
ActionController::RoutingError (No route matches [GET] "/users/sign_out"):
  
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/parental_consents" for ::1 at 2025-07-09 21:42:15 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (1.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 5.9ms | Allocations: 1492)
Completed 500 Internal Server Error in 62ms (ActiveRecord: 4.2ms | Allocations: 31051)


  
ActionView::Template::Error (The asset "application.js" is not present in the asset pipeline.
):
     7:     <%= csp_meta_tag %>
     8: 
     9:     <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    10:     <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    11:     <%# Temporarily disabled due to Webpacker compilation issues %>
    12:     <%#= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    13:     <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  
app/views/layouts/application.html.erb:10
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:42:20 +0500
  
ActionController::RoutingError (No route matches [GET] "/users/sign_out"):
  
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:45:50 +0500
  [1m[35m (2.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActionController::RoutingError (No route matches [GET] "/users/sign_out"):
  
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:49:53 +0500
  
ActionController::RoutingError (No route matches [GET] "/users/sign_out"):
  
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:49:59 +0500
  
ActionController::RoutingError (No route matches [GET] "/users/sign_out"):
  
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/sign_out" for ::1 at 2025-07-09 21:50:04 +0500
  
ActionController::RoutingError (No route matches [GET] "/users/sign_out"):
  
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:36:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/users/1/edit" for ::1 at 2025-07-09 21:50:08 +0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (1.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (1.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (2.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering users/edit.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/users/edit.html.erb:48
  Rendered users/edit.html.erb within layouts/application (Duration: 22.2ms | Allocations: 7961)
Completed 500 Internal Server Error in 884ms (ActiveRecord: 21.4ms | Allocations: 82088)


  
ActionView::Template::Error (Asset `application.js` was not declared to be precompiled in production.
Declare links to your assets in `app/assets/config/manifest.js`.

  //= link application.js

and restart your server):
     7:     <%= csp_meta_tag %>
     8: 
     9:     <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    10:     <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
    11:     <%# Temporarily disabled due to Webpacker compilation issues %>
    12:     <%#= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
    13:     <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  
app/views/layouts/application.html.erb:10
Started GET "/users/1/edit" for ::1 at 2025-07-09 21:51:42 +0500
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (1.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering users/edit.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/users/edit.html.erb:48
  Rendered users/edit.html.erb within layouts/application (Duration: 27.4ms | Allocations: 8474)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 204ms (Views: 79.6ms | ActiveRecord: 19.6ms | Allocations: 73323)


Started GET "/users/1" for ::1 at 2025-07-09 21:51:45 +0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mParentalConsent Load (1.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering users/show.html.erb within layouts/application
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/views/users/show.html.erb:86
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/show.html.erb:87
  [1m[36mCACHE Organization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  Rendered users/show.html.erb within layouts/application (Duration: 23.1ms | Allocations: 9453)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 71ms (Views: 31.5ms | ActiveRecord: 6.9ms | Allocations: 30236)


Started GET "/sign_out" for ::1 at 2025-07-09 21:51:47 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
[Devise] Could not find devise mapping for path "/sign_out".
This may happen for two reasons:

1) You forgot to wrap your route inside the scope block. For example:

  devise_scope :user do
    get "/some/route" => "some_devise_controller"
  end

2) You are testing a Devise controller bypassing the router.
   If so, you can explicitly tell Devise which mapping to use:

   @request.env["devise.mapping"] = Devise.mappings[:user]


Completed 404 Not Found in 4ms (ActiveRecord: 0.4ms | Allocations: 2347)


  
AbstractController::ActionNotFound (Could not find devise mapping for path "/sign_out".
This may happen for two reasons:

1) You forgot to wrap your route inside the scope block. For example:

  devise_scope :user do
    get "/some/route" => "some_devise_controller"
  end

2) You are testing a Devise controller bypassing the router.
   If so, you can explicitly tell Devise which mapping to use:

   @request.env["devise.mapping"] = Devise.mappings[:user]

):
  
devise (4.9.4) app/controllers/devise_controller.rb:104:in `unknown_action!'
devise (4.9.4) app/controllers/devise_controller.rb:79:in `assert_is_devise_resource!'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:200:in `block (2 levels) in halting'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:34:in `block (2 levels) in <module:Callbacks>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:201:in `block in halting'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:513:in `block in invoke_before'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:513:in `each'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:513:in `invoke_before'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:110:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/sign_out" for ::1 at 2025-07-09 21:54:15 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-09 16:54:15.331144"], ["id", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 48ms (ActiveRecord: 6.0ms | Allocations: 25116)


Started GET "/" for ::1 at 2025-07-09 21:54:15 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.0ms | Allocations: 445)


Started GET "/users/sign_in" for ::1 at 2025-07-09 21:54:15 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.7ms | Allocations: 656)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 8.5ms | Allocations: 3154)
Completed 200 OK in 24ms (Views: 22.3ms | ActiveRecord: 0.0ms | Allocations: 9914)


Started POST "/users/sign_in" for ::1 at 2025-07-09 21:54:55 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"JqqnKBoRRN7yltMlDcyRY6xG0pQDNUV2M8hxgD5jZGbEHN+kdwqx/mNlxwn52IvIxm6XUxRpZWyYtewbxG+T5Q==", "user"=>{"email"=>"admin@techcorp.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-09 16:54:56.043879"], ["updated_at", "2025-07-09 16:54:56.044239"], ["id", 1]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 324ms (ActiveRecord: 6.9ms | Allocations: 10758)


Started GET "/" for ::1 at 2025-07-09 21:54:56 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (2.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (1.7ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 40.6ms | Allocations: 21580)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 138ms (Views: 48.5ms | ActiveRecord: 24.0ms | Allocations: 60568)


Started GET "/sign_out" for ::1 at 2025-07-09 21:55:00 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-09 16:55:00.687125"], ["id", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 19ms (ActiveRecord: 7.2ms | Allocations: 6907)


Started GET "/" for ::1 at 2025-07-09 21:55:00 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms | Allocations: 345)


Started GET "/users/sign_in" for ::1 at 2025-07-09 21:55:00 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.3ms | Allocations: 154)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 1426)
Completed 200 OK in 9ms (Views: 8.1ms | ActiveRecord: 0.0ms | Allocations: 6190)


Started POST "/users/sign_in" for ::1 at 2025-07-09 21:55:03 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"8U3NkzSoUnlq+WWj70z12Z+Dd67N2X/EyFuC2MV5VXLHEKTcjNMh7nVKzvnYxRVCvsF7638Wy/g8ZXmlfv67Vw==", "user"=>{"email"=>"admin@techcorp.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-09 16:55:04.021211"], ["updated_at", "2025-07-09 16:55:04.021581"], ["id", 1]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 317ms (ActiveRecord: 7.0ms | Allocations: 7889)


Started GET "/" for ::1 at 2025-07-09 21:55:04 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.7ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 15.7ms | Allocations: 5792)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 40ms (Views: 23.0ms | ActiveRecord: 5.4ms | Allocations: 18088)


Started GET "/profile" for ::1 at 2025-07-09 21:55:07 +0500
Processing by UsersController#profile as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering users/profile.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/views/users/profile.html.erb:71
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/profile.html.erb:72
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  Rendered users/profile.html.erb within layouts/application (Duration: 14.2ms | Allocations: 6726)
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 23.1ms | ActiveRecord: 2.2ms | Allocations: 15570)


Started GET "/sign_out" for ::1 at 2025-07-09 21:55:10 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-09 16:55:10.105874"], ["id", 1]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 20ms (ActiveRecord: 3.1ms | Allocations: 6894)


Started GET "/" for ::1 at 2025-07-09 21:55:10 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms | Allocations: 337)


Started GET "/users/sign_in" for ::1 at 2025-07-09 21:55:10 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.3ms | Allocations: 154)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 1426)
Completed 200 OK in 9ms (Views: 8.2ms | ActiveRecord: 0.0ms | Allocations: 6193)


Started POST "/users/sign_in" for ::1 at 2025-07-09 21:55:33 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"kBBeeCG1rcObNvNSacehv8ktsImd4ssMAploND5dLaeCStTAzm6RWYyoD8VnVwUWualqp/0iBembrlj8c8wcuA==", "user"=>{"email"=>"teen1@youthacademy.org", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-09 16:55:33.929885"], ["updated_at", "2025-07-09 16:55:33.930271"], ["id", 6]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 310ms (ActiveRecord: 1.7ms | Allocations: 7891)


Started GET "/" for ::1 at 2025-07-09 21:55:33 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "teen"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 11.3ms | Allocations: 5163)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 51ms (Views: 19.0ms | ActiveRecord: 6.1ms | Allocations: 27848)


Started GET "/dashboard" for ::1 at 2025-07-09 21:55:46 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "teen"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 12.6ms | Allocations: 5162)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 36ms (Views: 18.5ms | ActiveRecord: 4.6ms | Allocations: 17874)


Started GET "/organizations/2" for ::1 at 2025-07-09 21:55:47 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 16.6ms | Allocations: 8341)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 43ms (Views: 24.5ms | ActiveRecord: 4.0ms | Allocations: 21605)


Started GET "/organizations" for ::1 at 2025-07-09 21:55:50 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 2]]
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 10.7ms | Allocations: 5033)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 34ms (Views: 19.3ms | ActiveRecord: 2.7ms | Allocations: 15509)


Started GET "/organizations/2" for ::1 at 2025-07-09 21:55:53 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 17.6ms | Allocations: 7584)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 43ms (Views: 23.3ms | ActiveRecord: 4.9ms | Allocations: 19627)


Started GET "/parental_consents" for ::1 at 2025-07-09 21:55:55 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.7ms | Allocations: 3283)


  
Pundit::PolicyScopingNotPerformedError (ParentalConsentsController):
  
pundit (2.5.0) lib/pundit/authorization.rb:185:in `verify_policy_scoped'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/organizations/2" for ::1 at 2025-07-09 21:56:02 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 16.4ms | Allocations: 7583)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 44ms (Views: 24.8ms | ActiveRecord: 4.3ms | Allocations: 19624)


Started GET "/parental_consents" for ::1 at 2025-07-09 21:56:04 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.6ms | Allocations: 3203)


  
Pundit::PolicyScopingNotPerformedError (ParentalConsentsController):
  
pundit (2.5.0) lib/pundit/authorization.rb:185:in `verify_policy_scoped'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/organizations/2" for ::1 at 2025-07-09 21:56:06 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.2ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 14.2ms | Allocations: 7583)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 37ms (Views: 22.3ms | ActiveRecord: 3.7ms | Allocations: 19631)


Started GET "/sign_out" for ::1 at 2025-07-09 21:56:12 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-09 16:56:12.128610"], ["id", 6]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 17ms (ActiveRecord: 6.8ms | Allocations: 6886)


Started GET "/" for ::1 at 2025-07-09 21:56:12 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms | Allocations: 335)


Started GET "/users/sign_in" for ::1 at 2025-07-09 21:56:12 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.2ms | Allocations: 154)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.9ms | Allocations: 1426)
Completed 200 OK in 10ms (Views: 9.1ms | ActiveRecord: 0.0ms | Allocations: 6191)


Started POST "/users/sign_in" for ::1 at 2025-07-09 21:56:17 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"VDB6C7B8LK0his7wvWh4F0pJ/OYEqvsDOS6NPLm8vfDdUz9CQ9mmvYULB/LrQY2qkzw2pTreAdnSh1CPvGZj2w==", "user"=>{"email"=>"admin@techcorp.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-09 16:56:17.656887"], ["updated_at", "2025-07-09 16:56:17.657228"], ["id", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 318ms (ActiveRecord: 6.8ms | Allocations: 7865)


Started GET "/" for ::1 at 2025-07-09 21:56:17 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.2ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 14.6ms | Allocations: 5789)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 37ms (Views: 21.6ms | ActiveRecord: 4.8ms | Allocations: 18103)


Started GET "/parental_consents" for ::1 at 2025-07-09 21:56:19 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 6.7ms | Allocations: 2130)
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 44ms (Views: 17.9ms | ActiveRecord: 1.4ms | Allocations: 17237)


Started GET "/organizations" for ::1 at 2025-07-09 21:56:21 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 29.1ms | Allocations: 12227)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 49ms (Views: 32.7ms | ActiveRecord: 6.7ms | Allocations: 22672)


Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 21:56:21 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 406 Not Acceptable in 20ms (ActiveRecord: 1.5ms | Allocations: 8875)


  
ActionController::MissingExactTemplate (OrganizationsController#participation_rules is missing a template for request formats: text/html):
  
actionpack (6.0.6.1) lib/action_controller/metal/implicit_render.rb:45:in `default_render'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `block in send_action'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `tap'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:195:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:112:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/organizations" for ::1 at 2025-07-09 21:56:24 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 28.1ms | Allocations: 12217)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 48ms (Views: 32.0ms | ActiveRecord: 5.9ms | Allocations: 22642)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 21:56:25 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
Completed 422 Unprocessable Entity in 59ms (ActiveRecord: 7.6ms | Allocations: 30190)


  
ActiveRecord::RecordInvalid (Validation failed: Participation rate must be less than or equal to 100):
  
app/models/organization.rb:71:in `generate_analytics'
app/models/organization_analytics.rb:13:in `generate_daily_report'
app/controllers/organizations_controller.rb:66:in `analytics'
Started GET "/organizations" for ::1 at 2025-07-09 21:56:28 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 26.4ms | Allocations: 12217)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 49ms (Views: 32.3ms | ActiveRecord: 6.2ms | Allocations: 22666)


Started GET "/sign_out" for ::1 at 2025-07-09 21:56:30 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-09 16:56:30.355811"], ["id", 1]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 18ms (ActiveRecord: 6.6ms | Allocations: 6890)


Started GET "/" for ::1 at 2025-07-09 21:56:30 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms | Allocations: 359)


Started GET "/users/sign_in" for ::1 at 2025-07-09 21:56:30 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.2ms | Allocations: 154)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 1426)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms | Allocations: 6189)


Started POST "/users/sign_in" for ::1 at 2025-07-09 21:56:37 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"KpLBtdYYFMDXQ8QZBkzseNvb/70ynuAq8XycFXFOyNoIiu63w1hRQXLbygZuD7/oLY3Yv8+P41bQTUN6598uMQ==", "user"=>{"email"=>"teen1@youthacademy.org", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-09 16:56:37.681215"], ["updated_at", "2025-07-09 16:56:37.681583"], ["id", 6]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 319ms (ActiveRecord: 7.0ms | Allocations: 7885)


Started GET "/" for ::1 at 2025-07-09 21:56:37 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.2ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (3.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.2ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "teen"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 11.9ms | Allocations: 5163)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 37ms (Views: 19.9ms | ActiveRecord: 6.5ms | Allocations: 17894)


Started GET "/parental_consents" for ::1 at 2025-07-09 21:56:39 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.5ms | Allocations: 3193)


  
Pundit::PolicyScopingNotPerformedError (ParentalConsentsController):
  
pundit (2.5.0) lib/pundit/authorization.rb:185:in `verify_policy_scoped'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/parental_consents" for ::1 at 2025-07-09 21:57:42 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 57ms (ActiveRecord: 7.2ms | Allocations: 33610)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 21:57:42 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 28.4ms | Allocations: 14366)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 80ms (Views: 60.4ms | ActiveRecord: 9.8ms | Allocations: 35765)


Started GET "/parental_consents" for ::1 at 2025-07-09 21:57:44 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 0.5ms | Allocations: 2819)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 21:57:44 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 5.5ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 27ms (Views: 17.0ms | ActiveRecord: 2.2ms | Allocations: 13668)


Started GET "/organizations" for ::1 at 2025-07-09 21:57:45 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 2]]
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 16.1ms | Allocations: 6149)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 40ms (Views: 27.2ms | ActiveRecord: 3.0ms | Allocations: 17000)


Started GET "/organizations/2" for ::1 at 2025-07-09 21:57:45 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.2ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 48.4ms | Allocations: 19748)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 92ms (Views: 57.9ms | ActiveRecord: 8.4ms | Allocations: 35070)


Started GET "/parental_consents" for ::1 at 2025-07-09 21:57:46 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 0.5ms | Allocations: 2811)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 21:57:46 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 19.6ms | ActiveRecord: 2.3ms | Allocations: 13650)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:00:29 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (1.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 11ms (ActiveRecord: 3.5ms | Allocations: 3073)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:00:29 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 4.5ms | Allocations: 2617)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (1.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (1.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 27ms (Views: 15.1ms | ActiveRecord: 4.8ms | Allocations: 13674)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:00:32 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 9ms (ActiveRecord: 1.0ms | Allocations: 2825)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:00:32 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 8.2ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 19.6ms | ActiveRecord: 2.9ms | Allocations: 13670)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:00:33 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 0.7ms | Allocations: 2811)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:00:33 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 11.0ms | Allocations: 2614)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 35ms (Views: 22.3ms | ActiveRecord: 3.2ms | Allocations: 13664)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:00:35 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 0.6ms | Allocations: 2821)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:00:35 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 4.8ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 32ms (Views: 18.4ms | ActiveRecord: 2.6ms | Allocations: 13664)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:00:35 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.8ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 14ms (ActiveRecord: 1.2ms | Allocations: 2807)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:00:35 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 8.5ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 32ms (Views: 21.6ms | ActiveRecord: 2.3ms | Allocations: 13662)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:00:36 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 9ms (ActiveRecord: 0.7ms | Allocations: 2815)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:00:36 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 6.1ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 18.0ms | ActiveRecord: 2.1ms | Allocations: 13670)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:00:36 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 8ms (ActiveRecord: 0.6ms | Allocations: 2807)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:00:36 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 6.1ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 18.3ms | ActiveRecord: 2.4ms | Allocations: 13648)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:00:36 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 12ms (ActiveRecord: 0.5ms | Allocations: 2831)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:00:36 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 6.4ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 19.1ms | ActiveRecord: 2.2ms | Allocations: 13665)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:00:36 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 8ms (ActiveRecord: 0.7ms | Allocations: 2811)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:00:36 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 5.2ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 32ms (Views: 18.4ms | ActiveRecord: 2.4ms | Allocations: 13662)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:01:01 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 8ms (ActiveRecord: 0.6ms | Allocations: 2807)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:01:01 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 4.9ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 18.2ms | ActiveRecord: 2.2ms | Allocations: 13660)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:01:02 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 10ms (ActiveRecord: 0.7ms | Allocations: 2805)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:01:02 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 18.8ms | ActiveRecord: 2.1ms | Allocations: 13648)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:01:03 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 9ms (ActiveRecord: 0.8ms | Allocations: 2801)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:01:03 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 8.4ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 32ms (Views: 22.4ms | ActiveRecord: 2.2ms | Allocations: 13669)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:01:03 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 6ms (ActiveRecord: 0.5ms | Allocations: 2807)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:01:03 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 7.1ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 32ms (Views: 19.3ms | ActiveRecord: 2.4ms | Allocations: 13673)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:01:03 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 9ms (ActiveRecord: 0.7ms | Allocations: 2807)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:01:03 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 8.2ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 21.3ms | ActiveRecord: 2.5ms | Allocations: 13668)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:01:04 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 0.5ms | Allocations: 2815)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:01:04 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.8ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 18.6ms | ActiveRecord: 2.8ms | Allocations: 13660)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:01:04 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 6ms (ActiveRecord: 0.5ms | Allocations: 2833)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:01:04 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 5.4ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 18.5ms | ActiveRecord: 2.2ms | Allocations: 13652)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:01:04 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 12ms (ActiveRecord: 0.9ms | Allocations: 2816)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:01:04 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 7.0ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 29ms (Views: 17.7ms | ActiveRecord: 2.1ms | Allocations: 13667)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:18:16 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.6ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 1.5ms | Allocations: 3066)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:18:16 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 4.4ms | Allocations: 2617)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 23ms (Views: 12.7ms | ActiveRecord: 3.0ms | Allocations: 13686)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:18:18 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.6ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 10ms (ActiveRecord: 1.2ms | Allocations: 2821)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:18:18 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.8ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (1.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 11.9ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 49ms (Views: 29.7ms | ActiveRecord: 5.1ms | Allocations: 13681)


Started GET "/organizations" for ::1 at 2025-07-09 23:18:18 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (1.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 2]]
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 13.2ms | Allocations: 4576)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 40ms (Views: 19.8ms | ActiveRecord: 6.8ms | Allocations: 14884)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:18:19 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 9ms (ActiveRecord: 1.8ms | Allocations: 2815)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:18:19 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 5.3ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 14.9ms | ActiveRecord: 2.7ms | Allocations: 13674)


Started GET "/organizations" for ::1 at 2025-07-09 23:18:20 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 2]]
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 12.1ms | Allocations: 4541)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 42ms (Views: 21.0ms | ActiveRecord: 4.0ms | Allocations: 14851)


Started GET "/organizations/2" for ::1 at 2025-07-09 23:18:22 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (11.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (2.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (2.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (1.5ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 33.6ms | Allocations: 7591)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 91ms (Views: 40.7ms | ActiveRecord: 25.1ms | Allocations: 19688)


Started GET "/organizations/2/participation_rules" for ::1 at 2025-07-09 23:18:24 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (1.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Redirected to http://localhost:3000/organizations/2
Filter chain halted as :require_organization_admin rendered or redirected
Completed 302 Found in 19ms (ActiveRecord: 2.9ms | Allocations: 5091)


Started GET "/organizations/2" for ::1 at 2025-07-09 23:18:24 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.5ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.6ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 27.1ms | Allocations: 7583)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 55ms (Views: 36.5ms | ActiveRecord: 5.1ms | Allocations: 19688)


Started GET "/dashboard" for ::1 at 2025-07-09 23:18:31 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.2ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.2ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "teen"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 8.9ms | Allocations: 5206)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 14.4ms | ActiveRecord: 3.4ms | Allocations: 18292)


Started GET "/organizations/2" for ::1 at 2025-07-09 23:18:33 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 16.6ms | Allocations: 7583)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 45ms (Views: 22.8ms | ActiveRecord: 4.9ms | Allocations: 19642)


Started GET "/organizations/2" for ::1 at 2025-07-09 23:18:42 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 18.3ms | Allocations: 7583)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 46ms (Views: 24.9ms | ActiveRecord: 5.0ms | Allocations: 19632)


Started GET "/organizations" for ::1 at 2025-07-09 23:18:43 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 2]]
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 9.9ms | Allocations: 4541)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 35ms (Views: 19.0ms | ActiveRecord: 3.1ms | Allocations: 14855)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:18:44 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.8ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 11ms (ActiveRecord: 1.1ms | Allocations: 2817)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:18:44 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 6.3ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 28ms (Views: 18.0ms | ActiveRecord: 2.1ms | Allocations: 13669)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:19:00 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 10ms (ActiveRecord: 0.8ms | Allocations: 2819)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:19:00 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 4.7ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 17.6ms | ActiveRecord: 2.9ms | Allocations: 13671)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:19:10 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (1.1ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 12ms (ActiveRecord: 1.6ms | Allocations: 2817)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:19:11 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 7.0ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 33ms (Views: 19.3ms | ActiveRecord: 2.5ms | Allocations: 13675)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:19:41 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 11ms (ActiveRecord: 1.1ms | Allocations: 2809)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:19:41 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 10.3ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 18.7ms | ActiveRecord: 2.4ms | Allocations: 13666)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:20:01 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 11ms (ActiveRecord: 1.0ms | Allocations: 2823)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:20:01 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 363.8ms | Allocations: 171677)
Completed 500 Internal Server Error in 376ms (ActiveRecord: 1.6ms | Allocations: 177087)


  
ActionView::Template::Error (undefined local variable or method `_path' for #<#<Class:0x00007fee3dc92010>:0x00007fee4606e258>):
    112:                     class: 'btn btn-warning' %>
    113:               <% end %>
    114:               
    115:               <%= link_to 'Back', _path, class: 'btn btn-secondary' %>
    116:             </div>
    117:           </div>
    118:         </div>
  
app/views/parental_consents/show.html.erb:115
Started GET "/" for ::1 at 2025-07-09 23:20:09 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.5ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "teen"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 12.5ms | Allocations: 6280)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 39ms (Views: 20.4ms | ActiveRecord: 4.9ms | Allocations: 20559)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:20:13 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (1.0ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 1.2ms | Allocations: 2813)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:20:13 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 342.5ms | Allocations: 170455)
Completed 500 Internal Server Error in 351ms (ActiveRecord: 1.2ms | Allocations: 175004)


  
ActionView::Template::Error (undefined local variable or method `_path' for #<#<Class:0x00007fee3dc92010>:0x00007fee3ec1a910>):
    112:                     class: 'btn btn-warning' %>
    113:               <% end %>
    114:               
    115:               <%= link_to 'Back', _path, class: 'btn btn-secondary' %>
    116:             </div>
    117:           </div>
    118:         </div>
  
app/views/parental_consents/show.html.erb:115
Started GET "/parental_consents" for ::1 at 2025-07-09 23:20:22 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 5ms (ActiveRecord: 0.5ms | Allocations: 2837)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:20:22 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 473.4ms | Allocations: 171583)
Completed 500 Internal Server Error in 487ms (ActiveRecord: 1.6ms | Allocations: 176968)


  
ActionView::Template::Error (undefined local variable or method `home_path' for #<#<Class:0x00007fee465ace90>:0x00007fee3f3950c8>):
    112:                     class: 'btn btn-warning' %>
    113:               <% end %>
    114:               
    115:               <%= link_to 'Back', home_path, class: 'btn btn-secondary' %>
    116:             </div>
    117:           </div>
    118:         </div>
  
app/views/parental_consents/show.html.erb:115
Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:21:36 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 401.6ms | Allocations: 171565)
Completed 500 Internal Server Error in 417ms (ActiveRecord: 2.7ms | Allocations: 176948)


  
ActionView::Template::Error (undefined local variable or method `_path' for #<#<Class:0x00007fee3f2fc850>:0x00007fee3dd205e0>):
    112:                     class: 'btn btn-warning' %>
    113:               <% end %>
    114:               
    115:               <%= link_to 'Back', parental_consents_path, class: 'btn btn-secondary' %>
    116:             </div>
    117:           </div>
    118:         </div>
  
app/views/parental_consents/show.html.erb:115
Started GET "/parental_consents/" for ::1 at 2025-07-09 23:21:40 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 8ms (ActiveRecord: 0.6ms | Allocations: 2804)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:21:40 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 9.9ms | Allocations: 3788)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 38ms (Views: 25.7ms | ActiveRecord: 2.6ms | Allocations: 16564)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:21:42 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 0.5ms | Allocations: 2809)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:21:42 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 32ms (Views: 17.1ms | ActiveRecord: 2.8ms | Allocations: 13665)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:21:44 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 10ms (ActiveRecord: 0.6ms | Allocations: 2835)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:21:44 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 6.2ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 28ms (Views: 18.7ms | ActiveRecord: 1.9ms | Allocations: 13668)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:21:45 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 8ms (ActiveRecord: 0.6ms | Allocations: 2819)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:21:45 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 7.0ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 19.3ms | ActiveRecord: 2.4ms | Allocations: 13667)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:21:59 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 8ms (ActiveRecord: 0.5ms | Allocations: 2809)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:21:59 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 9.9ms | Allocations: 3793)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 38ms (Views: 25.8ms | ActiveRecord: 2.3ms | Allocations: 16551)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:22:03 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 0.7ms | Allocations: 2801)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:22:03 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 7.0ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 36ms (Views: 20.4ms | ActiveRecord: 2.5ms | Allocations: 13639)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:23:44 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 5ms (ActiveRecord: 0.4ms | Allocations: 2811)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:23:44 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.1ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 4.8ms | Allocations: 2613)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 22ms (Views: 14.5ms | ActiveRecord: 1.6ms | Allocations: 13664)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:26:02 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 9.5ms | Allocations: 3858)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 37ms (Views: 24.4ms | ActiveRecord: 2.1ms | Allocations: 16633)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:26:03 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 7.1ms | Allocations: 2617)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 35ms (Views: 22.1ms | ActiveRecord: 2.5ms | Allocations: 13634)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:26:03 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2616)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 29ms (Views: 19.7ms | ActiveRecord: 1.9ms | Allocations: 13652)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:26:03 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 9.9ms | Allocations: 2616)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 36ms (Views: 25.8ms | ActiveRecord: 2.4ms | Allocations: 13641)


Started GET "/dashboard" for ::1 at 2025-07-09 23:26:05 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.2ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "teen"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 13.0ms | Allocations: 6282)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 45ms (Views: 23.4ms | ActiveRecord: 5.1ms | Allocations: 19679)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:26:08 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/1
Completed 302 Found in 7ms (ActiveRecord: 0.6ms | Allocations: 2801)


Started GET "/parental_consents/1" for ::1 at 2025-07-09 23:26:08 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:123:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.7ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 7.2ms | Allocations: 2622)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 28ms (Views: 17.4ms | ActiveRecord: 2.6ms | Allocations: 13682)


Started GET "/dashboard" for ::1 at 2025-07-09 23:26:10 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "teen"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 15.1ms | Allocations: 5162)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 48ms (Views: 23.1ms | ActiveRecord: 5.3ms | Allocations: 17863)


Started GET "/sign_out" for ::1 at 2025-07-09 23:26:13 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-09 18:26:13.794641"], ["id", 6]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 11ms (ActiveRecord: 2.4ms | Allocations: 7262)


Started GET "/" for ::1 at 2025-07-09 23:26:13 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms | Allocations: 359)


Started GET "/users/sign_in" for ::1 at 2025-07-09 23:26:13 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.7ms | Allocations: 560)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 4.8ms | Allocations: 2280)
Completed 200 OK in 15ms (Views: 13.9ms | ActiveRecord: 0.0ms | Allocations: 8880)


Started POST "/users/sign_in" for ::1 at 2025-07-09 23:26:19 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"Vd1IQVa4fn7RyFe5aJpM9weG6XTDTxznLmbfQaFAoaBeDJe80o+Of0WG7IDsJs7IyKWmFmOKqgQfvaM0FNm81w==", "user"=>{"email"=>"admin@techcorp.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.3ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-09 18:26:19.809821"], ["updated_at", "2025-07-09 18:26:19.810116"], ["id", 1]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 257ms (ActiveRecord: 6.6ms | Allocations: 9381)


Started GET "/" for ::1 at 2025-07-09 23:26:19 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 15.5ms | Allocations: 5824)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 42ms (Views: 23.2ms | ActiveRecord: 5.8ms | Allocations: 18157)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:26:22 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1473)
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 21ms (Views: 15.3ms | ActiveRecord: 1.9ms | Allocations: 10689)


Started GET "/parental_consents/new" for ::1 at 2025-07-09 23:26:26 +0500
Processing by ParentalConsentsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/new.html.erb within layouts/application
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (age < 18)[0m
  ↳ app/views/parental_consents/new.html.erb:23
  Rendered parental_consents/new.html.erb within layouts/application (Duration: 5.9ms | Allocations: 3358)
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 25ms (Views: 17.7ms | ActiveRecord: 1.5ms | Allocations: 12526)


Started POST "/parental_consents" for ::1 at 2025-07-09 23:26:39 +0500
Processing by ParentalConsentsController#create as HTML
  Parameters: {"authenticity_token"=>"iBYgQTj5lshqGsiCFxO+Y1HE2FWNF/nrdSeOb5+STzvRwsAn5yqqqAc+csAOs6AeYyuW2Hy5zKiKjdx/pCUDaw==", "parental_consent"=>{"child_id"=>"6", "consent_date"=>"2025-07-09", "expiry_date"=>"2026-07-09", "notes"=>"Working ", "consent_details"=>"{}"}, "commit"=>"Create Consent Request"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" IS NULL LIMIT $1[0m  [["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:49:in `create'
Redirected to http://localhost:3000/parental_consents/new
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.7ms | Allocations: 3332)


  
Pundit::AuthorizationNotPerformedError (ParentalConsentsController):
  
pundit (2.5.0) lib/pundit/authorization.rb:119:in `verify_authorized'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:428:in `block in make_lambda'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:238:in `block in halting_and_conditional'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `block in invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `each'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:517:in `invoke_after'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:126:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:40:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/parental_consents" for ::1 at 2025-07-09 23:30:09 +0500
Processing by ParentalConsentsController#create as HTML
  Parameters: {"authenticity_token"=>"iBYgQTj5lshqGsiCFxO+Y1HE2FWNF/nrdSeOb5+STzvRwsAn5yqqqAc+csAOs6AeYyuW2Hy5zKiKjdx/pCUDaw==", "parental_consent"=>{"child_id"=>"6", "consent_date"=>"2025-07-09", "expiry_date"=>"2026-07-09", "notes"=>"Working ", "consent_details"=>"{}"}, "commit"=>"Create Consent Request"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:41:in `create'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/parental_consents_controller.rb:47:in `create'
  [1m[36mParentalConsent Exists? (2.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:47:in `create'
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  ↳ app/controllers/parental_consents_controller.rb:47:in `create'
  Rendering parental_consents/new.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_id" IS NULL LIMIT $2[0m  [["name", "admin"], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE (age < 18)[0m
  ↳ app/views/parental_consents/new.html.erb:34
  Rendered parental_consents/new.html.erb within layouts/application (Duration: 20.6ms | Allocations: 7439)
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 158ms (Views: 59.5ms | ActiveRecord: 27.7ms | Allocations: 70029)


Started POST "/parental_consents" for ::1 at 2025-07-09 23:30:18 +0500
Processing by ParentalConsentsController#create as HTML
  Parameters: {"authenticity_token"=>"nwI3VQwsvKzTbJnJt3O5ARRwYQzLlVbHw/UvSJYsJ7DGVWDMDSLso7SUO8ckX1tFBKdQ84dn8ePngXLgWe+/EA==", "parental_consent"=>{"child_id"=>"9", "consent_date"=>"2025-07-09", "expiry_date"=>"2026-07-09", "notes"=>"Working ", "consent_details"=>"{}"}, "commit"=>"Create Consent Request"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:41:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/controllers/parental_consents_controller.rb:47:in `create'
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 9], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:47:in `create'
  [1m[36mParentalConsent Create (1.0ms)[0m  [1m[32mINSERT INTO "parental_consents" ("parent_id", "child_id", "consent_date", "expiry_date", "notes", "consent_details", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["parent_id", 1], ["child_id", 9], ["consent_date", "2025-07-09"], ["expiry_date", "2026-07-09"], ["notes", "Working "], ["consent_details", "\"{}\""], ["created_at", "2025-07-09 18:30:18.507889"], ["updated_at", "2025-07-09 18:30:18.507889"]]
  ↳ app/controllers/parental_consents_controller.rb:47:in `create'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 3], ["name", "admin"]]
  ↳ app/models/parental_consent.rb:129:in `notify_organization_admins'
Parental consent request created for Lucas Young in Community Center. Admin parent1@example.com notified.
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/controllers/parental_consents_controller.rb:47:in `create'
Redirected to http://localhost:3000/parental_consents/4
Completed 302 Found in 26ms (ActiveRecord: 3.8ms | Allocations: 10523)


Started GET "/parental_consents/4" for ::1 at 2025-07-09 23:30:18 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:110:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 10.5ms | Allocations: 6138)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 1.3ms | Allocations: 10291)


  
ActionView::Template::Error (undefined method `each' for "{}":String):
    176:       </div>
    177:       <div class="card-body">
    178:         <% if @parental_consent.consent_details.present? %>
    179:           <% @parental_consent.consent_details.each do |key, value| %>
    180:             <p><strong><%= key.titleize %>:</strong> <%= value %></p>
    181:           <% end %>
    182:         <% else %>
  
app/views/parental_consents/show.html.erb:179
Started GET "/parental_consents/4" for ::1 at 2025-07-09 23:35:17 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Completed 500 Internal Server Error in 42ms (ActiveRecord: 6.9ms | Allocations: 23394)


  
ActiveRecord::AttributeMethods::Serialization::ColumnNotSerializableError (Column `consent_details` of type ActiveRecord::ConnectionAdapters::PostgreSQL::OID::Jsonb does not support `serialize` feature.
Usually it means that you are trying to use `serialize`
on a column that already implements serialization natively.
):
  
app/controllers/parental_consents_controller.rb:119:in `set_parental_consent'
Started GET "/parental_consents/4" for ::1 at 2025-07-09 23:36:25 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:112:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 52.6ms | Allocations: 17779)
Completed 500 Internal Server Error in 118ms (ActiveRecord: 11.6ms | Allocations: 53854)


  
ActionView::Template::Error (private method `consent_details' called for #<ParentalConsent:0x00007fee45072688>
Did you mean?  consent_details?
               consent_details=
               consent_details_was):
    175:         <h6>Consent Details</h6>
    176:       </div>
    177:       <div class="card-body">
    178:         <% if @parental_consent.consent_details.present? && @parental_consent.consent_details.is_a?(Hash) && @parental_consent.consent_details.any? %>
    179:           <% @parental_consent.consent_details.each do |key, value| %>
    180:             <p><strong><%= key.titleize %>:</strong> <%= value %></p>
    181:           <% end %>
  
app/views/parental_consents/show.html.erb:178
Started GET "/parental_consents/4" for ::1 at 2025-07-09 23:37:49 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:112:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 24.6ms | Allocations: 13357)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 114ms (Views: 56.7ms | ActiveRecord: 14.0ms | Allocations: 64879)


Started PATCH "/parental_consents/4/approve" for ::1 at 2025-07-09 23:38:07 +0500
Processing by ParentalConsentsController#approve as HTML
  Parameters: {"authenticity_token"=>"2nhJqMctCg5EVyZK8JmwgLoc5D4opMxlPt3SAiAk4X+DLx4xxiNaASOvhERjtVLEqsvVwWRWa0EaqY+q7+d53w==", "id"=>"4"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.7ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:112:in `set_parental_consent'
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/parental_consent.rb:52:in `child'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  [1m[36mParentalConsent Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 AND "parental_consents"."id" != $2 LIMIT $3[0m  [["child_id", 9], ["id", 4], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[36mParentalConsent Update (1.2ms)[0m  [1m[33mUPDATE "parental_consents" SET "approved" = $1, "approved_by_id" = $2, "approved_at" = $3, "updated_at" = $4 WHERE "parental_consents"."id" = $5[0m  [["approved", true], ["approved_by_id", 1], ["approved_at", "2025-07-09 18:38:07.388132"], ["updated_at", "2025-07-09 18:38:07.395276"], ["id", 4]]
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/parental_consent.rb:86:in `approve_consent'
Redirected to http://localhost:3000/parental_consents/4
Completed 302 Found in 26ms (ActiveRecord: 7.3ms | Allocations: 8666)


Started GET "/parental_consents/4" for ::1 at 2025-07-09 23:38:07 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"4"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:112:in `set_parental_consent'
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 9], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  [1m[36mOrganization Load (1.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 10.3ms | Allocations: 3791)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.8ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 19.8ms | ActiveRecord: 5.4ms | Allocations: 14170)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:38:10 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 9]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 14.6ms | Allocations: 4438)
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 31ms (Views: 24.6ms | ActiveRecord: 2.2ms | Allocations: 13659)


Started GET "/organizations/1/members" for ::1 at 2025-07-09 23:38:15 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/controllers/organizations_controller.rb:75:in `members'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2)[0m  [["child_id", 1], ["child_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 1], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 2], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 34.1ms | Allocations: 18614)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 67ms (Views: 37.7ms | ActiveRecord: 10.2ms | Allocations: 37988)


Started GET "/organizations/1/members" for ::1 at 2025-07-09 23:38:19 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/controllers/organizations_controller.rb:75:in `members'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2)[0m  [["child_id", 1], ["child_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 1], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 2], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 21.8ms | Allocations: 12277)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 61ms (Views: 29.6ms | ActiveRecord: 6.4ms | Allocations: 28868)


Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 23:38:20 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 406 Not Acceptable in 45ms (ActiveRecord: 4.5ms | Allocations: 16436)


  
ActionController::MissingExactTemplate (OrganizationsController#participation_rules is missing a template for request formats: text/html):
  
actionpack (6.0.6.1) lib/action_controller/metal/implicit_render.rb:45:in `default_render'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `block in send_action'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `tap'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:195:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:112:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/organizations/1/members" for ::1 at 2025-07-09 23:38:54 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (2.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/controllers/organizations_controller.rb:75:in `members'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.7ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2)[0m  [["child_id", 1], ["child_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 1], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 2], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 36.1ms | Allocations: 12278)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 88ms (Views: 49.0ms | ActiveRecord: 10.3ms | Allocations: 28898)


Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 23:38:55 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 406 Not Acceptable in 18ms (ActiveRecord: 2.0ms | Allocations: 7120)


  
ActionController::MissingExactTemplate (OrganizationsController#participation_rules is missing a template for request formats: text/html):
  
actionpack (6.0.6.1) lib/action_controller/metal/implicit_render.rb:45:in `default_render'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `block in send_action'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `tap'
actionpack (6.0.6.1) lib/action_controller/metal/basic_implicit_render.rb:6:in `send_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:195:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rendering.rb:30:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:42:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:112:in `block in run_callbacks'
actiontext (6.0.6.1) lib/action_text/rendering.rb:19:in `with_renderer'
actiontext (6.0.6.1) lib/action_text/engine.rb:55:in `block (4 levels) in <class:Engine>'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `instance_exec'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:121:in `block in run_callbacks'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:139:in `run_callbacks'
actionpack (6.0.6.1) lib/abstract_controller/callbacks.rb:41:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/rescue.rb:22:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:33:in `block in process_action'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `block in instrument'
activesupport (6.0.6.1) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activesupport (6.0.6.1) lib/active_support/notifications.rb:180:in `instrument'
actionpack (6.0.6.1) lib/action_controller/metal/instrumentation.rb:32:in `process_action'
actionpack (6.0.6.1) lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
activerecord (6.0.6.1) lib/active_record/railties/controller_runtime.rb:27:in `process_action'
actionpack (6.0.6.1) lib/abstract_controller/base.rb:136:in `process'
actionview (6.0.6.1) lib/action_view/rendering.rb:39:in `process'
actionpack (6.0.6.1) lib/action_controller/metal.rb:190:in `dispatch'
actionpack (6.0.6.1) lib/action_controller/metal.rb:254:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:33:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:49:in `block in serve'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `each'
actionpack (6.0.6.1) lib/action_dispatch/journey/router.rb:32:in `serve'
actionpack (6.0.6.1) lib/action_dispatch/routing/route_set.rb:834:in `call'
warden (1.2.9) lib/warden/manager.rb:36:in `block in call'
warden (1.2.9) lib/warden/manager.rb:34:in `catch'
warden (1.2.9) lib/warden/manager.rb:34:in `call'
rack (2.2.17) lib/rack/tempfile_reaper.rb:15:in `call'
rack (2.2.17) lib/rack/etag.rb:27:in `call'
rack (2.2.17) lib/rack/conditional_get.rb:27:in `call'
rack (2.2.17) lib/rack/head.rb:12:in `call'
actionpack (6.0.6.1) lib/action_dispatch/http/content_security_policy.rb:18:in `call'
rack (2.2.17) lib/rack/session/abstract/id.rb:266:in `context'
rack (2.2.17) lib/rack/session/abstract/id.rb:260:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/cookies.rb:654:in `call'
activerecord (6.0.6.1) lib/active_record/migration.rb:567:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.6.1) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.6.1) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.2.1) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.2.1) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `catch'
web-console (4.2.1) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.6.1) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.6.1) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.6.1) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.4.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.17) lib/rack/method_override.rb:24:in `call'
rack (2.2.17) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.6.1) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.17) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.6.1) lib/action_dispatch/middleware/host_authorization.rb:103:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.7.6) lib/rack/proxy.rb:87:in `call'
railties (6.0.6.1) lib/rails/engine.rb:527:in `call'
puma (4.3.12) lib/puma/configuration.rb:228:in `call'
puma (4.3.12) lib/puma/server.rb:727:in `handle_request'
puma (4.3.12) lib/puma/server.rb:476:in `process_client'
puma (4.3.12) lib/puma/server.rb:332:in `block in run'
puma (4.3.12) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 23:40:22 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/participation_rules.html.erb within layouts/application
  [1m[36mParticipationRule Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:17
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:31
  Rendered organizations/participation_rules.html.erb within layouts/application (Duration: 39.7ms | Allocations: 15002)
Completed 500 Internal Server Error in 57ms (ActiveRecord: 4.2ms | Allocations: 22782)


  
ActionView::Template::Error (undefined method `participation_type' for #<ParticipationRule:0x00007fee4588d548>
Did you mean?  participation_allowed?):
    34:                         <strong><%= rule.min_age %></strong> - <strong><%= rule.max_age %></strong> years
    35:                       </td>
    36:                       <td>
    37:                         <span class="badge badge-<%= rule.participation_type == 'full' ? 'success' : 'warning' %>">
    38:                           <%= rule.participation_type.titleize %>
    39:                         </span>
    40:                       </td>
  
app/views/organizations/participation_rules.html.erb:37
app/views/organizations/participation_rules.html.erb:31
Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 23:43:00 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/participation_rules.html.erb within layouts/application
  [1m[36mParticipationRule Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:17
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:32
  Rendered organizations/participation_rules.html.erb within layouts/application (Duration: 368.1ms | Allocations: 89331)
Completed 500 Internal Server Error in 398ms (ActiveRecord: 3.4ms | Allocations: 97112)


  
ActionView::Template::Error (undefined method `participation_rule_path' for #<#<Class:0x00007fee3f5d7cc8>:0x00007fee3f5d6288>
Did you mean?  participation_rules_organization_path):
    65:                       </td>
    66:                       <td>
    67:                         <div class="btn-group" role="group">
    68:                           <%= link_to 'View', participation_rule_path(rule), class: 'btn btn-sm btn-outline-primary' %>
    69:                           <%= link_to 'Edit', edit_participation_rule_path(rule), class: 'btn btn-sm btn-outline-warning' %>
    70:                           <%= link_to 'Delete', participation_rule_path(rule), 
    71:                               method: :delete, 
  
app/views/organizations/participation_rules.html.erb:68
app/views/organizations/participation_rules.html.erb:32
Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 23:46:05 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/participation_rules.html.erb within layouts/application
  [1m[36mParticipationRule Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:17
  [1m[36mParticipationRule Load (0.7ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:32
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 1], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:99
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:117
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 1], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:118
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."requires_parental_consent" = $2[0m  [["organization_id", 1], ["requires_parental_consent", true]]
  ↳ app/views/organizations/participation_rules.html.erb:119
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."content_filtering_level" = $2[0m  [["organization_id", 1], ["content_filtering_level", "strict"]]
  ↳ app/views/organizations/participation_rules.html.erb:120
  Rendered organizations/participation_rules.html.erb within layouts/application (Duration: 45.2ms | Allocations: 17429)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 209ms (Views: 56.7ms | ActiveRecord: 30.0ms | Allocations: 71582)


Started GET "/organizations/1/participation_rules/new" for ::1 at 2025-07-09 23:46:42 +0500
Processing by ParticipationRulesController#new as HTML
  Parameters: {"organization_id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/participation_rules_controller.rb:84:in `set_organization'
  [1m[36mOrganization Load (0.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering participation_rules/new.html.erb within layouts/application
  Rendered participation_rules/new.html.erb within layouts/application (Duration: 14.2ms | Allocations: 5815)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 45ms (Views: 24.5ms | ActiveRecord: 1.3ms | Allocations: 19715)


Started POST "/organizations/1/participation_rules" for ::1 at 2025-07-09 23:46:44 +0500
Processing by ParticipationRulesController#create as HTML
  Parameters: {"authenticity_token"=>"aoVpKb5oMp9Vd48ZAe8t8IEy8pEWYbk+V4ZHx12ZadsaVVefMUp5HMe/l4VntEEzjpWog7an2SMOBHmDVt1lTg==", "participation_rule"=>{"age_group"=>"child", "min_age"=>"", "max_age"=>"", "participation_allowed"=>"0", "parental_consent_required"=>"0", "content_filtering_level"=>"minimal", "supervision_required"=>"0", "time_restrictions"=>"", "restrictions"=>"", "description"=>""}, "commit"=>"Create Rule", "organization_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/participation_rules_controller.rb:84:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
[31mUnpermitted parameters: :min_age, :max_age, :participation_allowed, :parental_consent_required, :supervision_required, :time_restrictions, :restrictions[0m
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering participation_rules/new.html.erb within layouts/application
  Rendered participation_rules/new.html.erb within layouts/application (Duration: 6.8ms | Allocations: 4702)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 37ms (Views: 16.6ms | ActiveRecord: 1.8ms | Allocations: 20699)


Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-09 23:46:46 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/participation_rules.html.erb within layouts/application
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:17
  [1m[36mParticipationRule Load (0.2ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:32
  [1m[36mParticipationRule Load (0.5ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 1], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:99
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:117
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 1], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:118
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."requires_parental_consent" = $2[0m  [["organization_id", 1], ["requires_parental_consent", true]]
  ↳ app/views/organizations/participation_rules.html.erb:119
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."content_filtering_level" = $2[0m  [["organization_id", 1], ["content_filtering_level", "strict"]]
  ↳ app/views/organizations/participation_rules.html.erb:120
  Rendered organizations/participation_rules.html.erb within layouts/application (Duration: 14.9ms | Allocations: 7224)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 39ms (Views: 20.5ms | ActiveRecord: 5.1ms | Allocations: 19947)


Started GET "/organizations/1" for ::1 at 2025-07-09 23:46:48 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.9ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 19.2ms | Allocations: 8439)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 57ms (Views: 28.5ms | ActiveRecord: 6.8ms | Allocations: 24401)


Started GET "/parental_consents" for ::1 at 2025-07-09 23:46:49 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 9]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 25.4ms | Allocations: 13318)
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 51ms (Views: 35.4ms | ActiveRecord: 5.2ms | Allocations: 27143)


Started GET "/dashboard" for ::1 at 2025-07-09 23:46:51 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.2ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 12.5ms | Allocations: 6945)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 44ms (Views: 26.9ms | ActiveRecord: 4.2ms | Allocations: 21274)


Started GET "/organizations/1" for ::1 at 2025-07-09 23:46:51 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 17.4ms | Allocations: 7729)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 49ms (Views: 24.0ms | ActiveRecord: 5.3ms | Allocations: 19956)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 23:46:52 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
Completed 422 Unprocessable Entity in 54ms (ActiveRecord: 7.1ms | Allocations: 29411)


  
ActiveRecord::RecordInvalid (Validation failed: Participation rate must be less than or equal to 100):
  
app/models/organization.rb:71:in `generate_analytics'
app/models/organization_analytics.rb:13:in `generate_daily_report'
app/controllers/organizations_controller.rb:66:in `analytics'
Started GET "/organizations/1" for ::1 at 2025-07-09 23:47:02 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.7ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 16.1ms | Allocations: 7720)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 41ms (Views: 23.2ms | ActiveRecord: 4.4ms | Allocations: 19940)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 23:47:04 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:88:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
Completed 422 Unprocessable Entity in 34ms (ActiveRecord: 6.4ms | Allocations: 14659)


  
ActiveRecord::RecordInvalid (Validation failed: Participation rate must be less than or equal to 100):
  
app/models/organization.rb:71:in `generate_analytics'
app/models/organization_analytics.rb:13:in `generate_daily_report'
app/controllers/organizations_controller.rb:66:in `analytics'
Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 23:57:04 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.9ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[36mOrganizationAnalytics Create (7.8ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 18:57:04.614805"], ["created_at", "2025-07-09 18:57:04.636369"], ["updated_at", "2025-07-09 18:57:04.636369"]]
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-07-02 18:57:04.649830')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:18:in `generate_daily_report'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-09 18:57:04.653134')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:19:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (created_at >= '2025-06-09 18:57:04.656263')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:20:in `generate_daily_report'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:21:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT AVG("users"."age") FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:22:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[36mOrganizationAnalytics Update (0.8ms)[0m  [1m[33mUPDATE "organization_analytics" SET "active_users_7_days" = $1, "active_users_30_days" = $2, "new_members_this_month" = $3, "members_by_role" = $4, "average_age" = $5, "minor_percentage" = $6, "updated_at" = $7 WHERE "organization_analytics"."id" = $8[0m  [["active_users_7_days", 2], ["active_users_30_days", 2], ["new_members_this_month", 2], ["members_by_role", "{\"participant\":4,\"moderator\":2,\"admin\":2}"], ["average_age", "31.5"], ["minor_percentage", "0.0"], ["updated_at", "2025-07-09 18:57:04.668725"], ["id", 1]]
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-30 00:00:00"], ["created_at", "2025-07-06 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:45:in `generate_weekly_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-30 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:46:in `generate_weekly_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[36mOrganizationAnalytics Create (0.5ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 18:57:04.689966"], ["report_period", "weekly"], ["period_start", "2025-06-30 00:00:00"], ["period_end", "2025-07-06 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 18:57:04.694945"], ["updated_at", "2025-07-09 18:57:04.694945"]]
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-01 00:00:00"], ["created_at", "2025-06-30 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:65:in `generate_monthly_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-01 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:66:in `generate_monthly_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[36mOrganizationAnalytics Create (0.5ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 18:57:04.716264"], ["report_period", "monthly"], ["period_start", "2025-06-01 00:00:00"], ["period_end", "2025-06-30 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 18:57:04.721915"], ["updated_at", "2025-07-09 18:57:04.721915"]]
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  Rendering organizations/analytics.html.erb within layouts/application
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 10]]
  ↳ app/views/organizations/analytics.html.erb:113
  [1m[36mOrganizationAnalytics Load (0.5ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.716264') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.716264') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.7ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.689966') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.689966') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.614805') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.614805') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  Rendered organizations/analytics.html.erb within layouts/application (Duration: 21.7ms | Allocations: 7383)
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 239ms (Views: 28.8ms | ActiveRecord: 41.1ms | Allocations: 121020)


Started GET "/organizations/1" for ::1 at 2025-07-09 23:57:38 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.9ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 64.4ms | Allocations: 24436)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 96ms (Views: 72.7ms | ActiveRecord: 6.2ms | Allocations: 36669)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 23:57:42 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.6ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[36mOrganizationAnalytics Create (0.5ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 18:57:42.894217"], ["created_at", "2025-07-09 18:57:42.895480"], ["updated_at", "2025-07-09 18:57:42.895480"]]
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-07-02 18:57:42.906025')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:18:in `generate_daily_report'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-09 18:57:42.908849')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:19:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (created_at >= '2025-06-09 18:57:42.911303')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:20:in `generate_daily_report'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:21:in `generate_daily_report'
  [1m[35m (0.2ms)[0m  [1m[34mSELECT AVG("users"."age") FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:22:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[36mOrganizationAnalytics Update (0.4ms)[0m  [1m[33mUPDATE "organization_analytics" SET "active_users_7_days" = $1, "active_users_30_days" = $2, "new_members_this_month" = $3, "members_by_role" = $4, "average_age" = $5, "minor_percentage" = $6, "updated_at" = $7 WHERE "organization_analytics"."id" = $8[0m  [["active_users_7_days", 2], ["active_users_30_days", 2], ["new_members_this_month", 2], ["members_by_role", "{\"participant\":4,\"moderator\":2,\"admin\":2}"], ["average_age", "31.5"], ["minor_percentage", "0.0"], ["updated_at", "2025-07-09 18:57:42.920478"], ["id", 4]]
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-30 00:00:00"], ["created_at", "2025-07-06 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:45:in `generate_weekly_report'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-30 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:46:in `generate_weekly_report'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[36mOrganizationAnalytics Create (0.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 18:57:42.939617"], ["report_period", "weekly"], ["period_start", "2025-06-30 00:00:00"], ["period_end", "2025-07-06 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 18:57:42.944537"], ["updated_at", "2025-07-09 18:57:42.944537"]]
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-01 00:00:00"], ["created_at", "2025-06-30 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:65:in `generate_monthly_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-01 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:66:in `generate_monthly_report'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[36mOrganizationAnalytics Create (0.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 18:57:42.965289"], ["report_period", "monthly"], ["period_start", "2025-06-01 00:00:00"], ["period_end", "2025-06-30 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 18:57:42.971464"], ["updated_at", "2025-07-09 18:57:42.971464"]]
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  Rendering organizations/analytics.html.erb within layouts/application
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 10]]
  ↳ app/views/organizations/analytics.html.erb:113
  [1m[36mOrganizationAnalytics Load (0.7ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.965289') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.965289') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.939617') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.939617') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.894217') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.894217') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.716264') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.716264') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.689966') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.689966') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.5ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.614805') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.614805') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  Rendered organizations/analytics.html.erb within layouts/application (Duration: 27.2ms | Allocations: 11704)
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 163ms (Views: 34.4ms | ActiveRecord: 34.0ms | Allocations: 70950)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-09 23:57:45 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[36mOrganizationAnalytics Create (0.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 18:57:45.417000"], ["created_at", "2025-07-09 18:57:45.418089"], ["updated_at", "2025-07-09 18:57:45.418089"]]
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-07-02 18:57:45.429821')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:18:in `generate_daily_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-09 18:57:45.432692')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:19:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (created_at >= '2025-06-09 18:57:45.435177')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:20:in `generate_daily_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:21:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("users"."age") FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:22:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[36mOrganizationAnalytics Update (0.4ms)[0m  [1m[33mUPDATE "organization_analytics" SET "active_users_7_days" = $1, "active_users_30_days" = $2, "new_members_this_month" = $3, "members_by_role" = $4, "average_age" = $5, "minor_percentage" = $6, "updated_at" = $7 WHERE "organization_analytics"."id" = $8[0m  [["active_users_7_days", 2], ["active_users_30_days", 2], ["new_members_this_month", 2], ["members_by_role", "{\"participant\":4,\"moderator\":2,\"admin\":2}"], ["average_age", "31.5"], ["minor_percentage", "0.0"], ["updated_at", "2025-07-09 18:57:45.444505"], ["id", 7]]
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-30 00:00:00"], ["created_at", "2025-07-06 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:45:in `generate_weekly_report'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-30 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:46:in `generate_weekly_report'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[36mOrganizationAnalytics Create (0.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 18:57:45.464490"], ["report_period", "weekly"], ["period_start", "2025-06-30 00:00:00"], ["period_end", "2025-07-06 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 18:57:45.469253"], ["updated_at", "2025-07-09 18:57:45.469253"]]
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-01 00:00:00"], ["created_at", "2025-06-30 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:65:in `generate_monthly_report'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-01 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:66:in `generate_monthly_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[36mOrganizationAnalytics Create (0.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 18:57:45.489241"], ["report_period", "monthly"], ["period_start", "2025-06-01 00:00:00"], ["period_end", "2025-06-30 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 18:57:45.494170"], ["updated_at", "2025-07-09 18:57:45.494170"]]
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  Rendering organizations/analytics.html.erb within layouts/application
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 10]]
  ↳ app/views/organizations/analytics.html.erb:113
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.489241') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.489241') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.464490') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.464490') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.417000') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.417000') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.965289') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.965289') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.939617') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.939617') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.894217') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.894217') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.716264') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.716264') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.5ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.689966') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.689966') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.614805') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.614805') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  Rendered organizations/analytics.html.erb within layouts/application (Duration: 30.7ms | Allocations: 17009)
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 160ms (Views: 35.8ms | ActiveRecord: 34.4ms | Allocations: 76257)


Started GET "/organizations/1" for ::1 at 2025-07-09 23:57:46 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.9ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 16.3ms | Allocations: 7720)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 50ms (Views: 24.2ms | ActiveRecord: 5.0ms | Allocations: 19962)


Started GET "/organizations/1/members" for ::1 at 2025-07-09 23:57:48 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/controllers/organizations_controller.rb:93:in `members'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2)[0m  [["child_id", 1], ["child_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 1], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 2], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 38.3ms | Allocations: 18700)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 84ms (Views: 41.3ms | ActiveRecord: 10.8ms | Allocations: 38135)


Started GET "/users/new" for ::1 at 2025-07-09 23:57:50 +0500
Processing by UsersController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering users/new.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/users/new.html.erb:48
  Rendered users/new.html.erb within layouts/application (Duration: 6.9ms | Allocations: 4506)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 33ms (Views: 20.1ms | ActiveRecord: 1.8ms | Allocations: 16074)


Started GET "/users" for ::1 at 2025-07-09 23:57:52 +0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering users/index.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 1]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mUserRole Load (0.6ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 3]]
  ↳ app/views/users/index.html.erb:43
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/index.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 3]]
  ↳ app/views/users/index.html.erb:43
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 2]]
  ↳ app/views/users/index.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered users/index.html.erb within layouts/application (Duration: 30.4ms | Allocations: 14329)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 52ms (Views: 35.5ms | ActiveRecord: 4.9ms | Allocations: 24982)


Started GET "/parental_consents" for ::1 at 2025-07-10 00:35:39 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (3.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (1.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 9]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 29.4ms | Allocations: 12668)
  [1m[36mOrganization Load (2.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (1.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (1.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 80ms (Views: 58.3ms | ActiveRecord: 10.6ms | Allocations: 22952)


Started GET "/organizations" for ::1 at 2025-07-10 00:35:40 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 30.6ms | Allocations: 12715)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 51ms (Views: 34.5ms | ActiveRecord: 7.0ms | Allocations: 23294)


Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-10 00:35:41 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/participation_rules.html.erb within layouts/application
  [1m[36mParticipationRule Exists? (9.7ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:17
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:32
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 1], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:99
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:117
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 1], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:118
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."requires_parental_consent" = $2[0m  [["organization_id", 1], ["requires_parental_consent", true]]
  ↳ app/views/organizations/participation_rules.html.erb:119
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."content_filtering_level" = $2[0m  [["organization_id", 1], ["content_filtering_level", "strict"]]
  ↳ app/views/organizations/participation_rules.html.erb:120
  Rendered organizations/participation_rules.html.erb within layouts/application (Duration: 25.7ms | Allocations: 7268)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 66ms (Views: 23.9ms | ActiveRecord: 13.5ms | Allocations: 19968)


Started GET "/organizations/1/members" for ::1 at 2025-07-10 00:35:41 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/controllers/organizations_controller.rb:93:in `members'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2)[0m  [["child_id", 1], ["child_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 1], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 2], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 23.7ms | Allocations: 12286)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 60ms (Views: 31.2ms | ActiveRecord: 8.0ms | Allocations: 28886)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-10 00:35:42 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[36mOrganizationAnalytics Create (1.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 19:35:42.554973"], ["created_at", "2025-07-09 19:35:42.556753"], ["updated_at", "2025-07-09 19:35:42.556753"]]
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (2.7ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-07-02 19:35:42.566903')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:18:in `generate_daily_report'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-09 19:35:42.570086')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:19:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (created_at >= '2025-06-09 19:35:42.572656')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:20:in `generate_daily_report'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:21:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("users"."age") FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:22:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[36mOrganizationAnalytics Update (1.2ms)[0m  [1m[33mUPDATE "organization_analytics" SET "active_users_7_days" = $1, "active_users_30_days" = $2, "new_members_this_month" = $3, "members_by_role" = $4, "average_age" = $5, "minor_percentage" = $6, "updated_at" = $7 WHERE "organization_analytics"."id" = $8[0m  [["active_users_7_days", 2], ["active_users_30_days", 2], ["new_members_this_month", 2], ["members_by_role", "{\"participant\":4,\"moderator\":2,\"admin\":2}"], ["average_age", "31.5"], ["minor_percentage", "0.0"], ["updated_at", "2025-07-09 19:35:42.582525"], ["id", 10]]
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-30 00:00:00"], ["created_at", "2025-07-06 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:45:in `generate_weekly_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-30 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:46:in `generate_weekly_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[36mOrganizationAnalytics Create (0.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 19:35:42.604138"], ["report_period", "weekly"], ["period_start", "2025-06-30 00:00:00"], ["period_end", "2025-07-06 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 19:35:42.609911"], ["updated_at", "2025-07-09 19:35:42.609911"]]
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-01 00:00:00"], ["created_at", "2025-06-30 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:65:in `generate_monthly_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-01 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:66:in `generate_monthly_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[36mOrganizationAnalytics Create (0.5ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 19:35:42.633124"], ["report_period", "monthly"], ["period_start", "2025-06-01 00:00:00"], ["period_end", "2025-06-30 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 19:35:42.638671"], ["updated_at", "2025-07-09 19:35:42.638671"]]
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  Rendering organizations/analytics.html.erb within layouts/application
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 10]]
  ↳ app/views/organizations/analytics.html.erb:113
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.633124') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.633124') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.604138') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.604138') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.554973') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.554973') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.489241') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.489241') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.464490') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.1ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.464490') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.417000') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.417000') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.965289') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.965289') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.939617') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.939617') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.894217') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.894217') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.716264') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:04.716264') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  Rendered organizations/analytics.html.erb within layouts/application (Duration: 43.0ms | Allocations: 18854)
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 184ms (Views: 48.4ms | ActiveRecord: 35.8ms | Allocations: 78126)


Started GET "/organizations/1" for ::1 at 2025-07-10 00:35:43 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (1.2ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 24.0ms | Allocations: 7728)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 59ms (Views: 32.3ms | ActiveRecord: 6.3ms | Allocations: 19956)


Started GET "/dashboard" for ::1 at 2025-07-10 00:35:44 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.2ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 11.9ms | Allocations: 5829)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 36ms (Views: 19.3ms | ActiveRecord: 4.1ms | Allocations: 18528)


Started GET "/users/1/edit" for ::1 at 2025-07-10 00:35:47 +0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering users/edit.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/users/edit.html.erb:48
  Rendered users/edit.html.erb within layouts/application (Duration: 8.4ms | Allocations: 3968)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 17.1ms | ActiveRecord: 1.6ms | Allocations: 15351)


Started GET "/users/1" for ::1 at 2025-07-10 00:35:48 +0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering users/show.html.erb within layouts/application
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/views/users/show.html.erb:86
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/show.html.erb:87
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  Rendered users/show.html.erb within layouts/application (Duration: 17.4ms | Allocations: 7537)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 44ms (Views: 25.5ms | ActiveRecord: 2.9ms | Allocations: 20088)


Started GET "/users" for ::1 at 2025-07-10 00:35:53 +0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering users/index.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 1]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 3]]
  ↳ app/views/users/index.html.erb:43
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/index.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 3]]
  ↳ app/views/users/index.html.erb:43
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 2]]
  ↳ app/views/users/index.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered users/index.html.erb within layouts/application (Duration: 28.6ms | Allocations: 13701)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 53ms (Views: 34.6ms | ActiveRecord: 4.6ms | Allocations: 24207)


Started GET "/users/1/edit" for ::1 at 2025-07-10 00:35:55 +0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering users/edit.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/users/edit.html.erb:48
  Rendered users/edit.html.erb within layouts/application (Duration: 6.0ms | Allocations: 3394)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 37ms (Views: 17.0ms | ActiveRecord: 2.7ms | Allocations: 14504)


Started GET "/users/1" for ::1 at 2025-07-10 00:35:57 +0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering users/show.html.erb within layouts/application
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/views/users/show.html.erb:86
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/show.html.erb:87
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  Rendered users/show.html.erb within layouts/application (Duration: 12.8ms | Allocations: 5870)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 44ms (Views: 24.1ms | ActiveRecord: 3.8ms | Allocations: 18085)


Started GET "/users/1/roles" for ::1 at 2025-07-10 00:35:59 +0500
Processing by UsersController#roles as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  Rendering users/roles.html.erb within layouts/application
  [1m[36mRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/views/users/roles.html.erb:11
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/roles.html.erb:12
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/users/roles.html.erb:45
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/roles.html.erb:115
  Rendered users/roles.html.erb within layouts/application (Duration: 21.7ms | Allocations: 9491)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 53ms (Views: 29.7ms | ActiveRecord: 4.1ms | Allocations: 23250)


Started GET "/users" for ::1 at 2025-07-10 00:36:02 +0500
Processing by UsersController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering users/index.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 1]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/users/index.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 3]]
  ↳ app/views/users/index.html.erb:43
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/index.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 2], ["LIMIT", 3]]
  ↳ app/views/users/index.html.erb:43
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 2]]
  ↳ app/views/users/index.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered users/index.html.erb within layouts/application (Duration: 29.2ms | Allocations: 13694)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 55ms (Views: 35.2ms | ActiveRecord: 4.9ms | Allocations: 24202)


Started GET "/users/1" for ::1 at 2025-07-10 00:50:25 +0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.8ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (1.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mParentalConsent Load (1.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering users/show.html.erb within layouts/application
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/views/users/show.html.erb:86
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/show.html.erb:87
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  Rendered users/show.html.erb within layouts/application (Duration: 11.5ms | Allocations: 5873)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 43ms (Views: 22.5ms | ActiveRecord: 7.2ms | Allocations: 18358)


Started GET "/users/1/edit" for ::1 at 2025-07-10 00:50:27 +0500
Processing by UsersController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering users/edit.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/users/edit.html.erb:48
  Rendered users/edit.html.erb within layouts/application (Duration: 5.9ms | Allocations: 3394)
  [1m[36mCACHE Role Load (0.1ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 35ms (Views: 16.8ms | ActiveRecord: 3.1ms | Allocations: 14502)


Started GET "/users/1" for ::1 at 2025-07-10 00:50:28 +0500
Processing by UsersController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/users_controller.rb:117:in `set_user'
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (3.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering users/show.html.erb within layouts/application
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 LIMIT $2[0m  [["user_id", 1], ["LIMIT", 1]]
  ↳ app/views/users/show.html.erb:86
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1[0m  [["user_id", 1]]
  ↳ app/views/users/show.html.erb:87
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/role.rb:51:in `resource'
  Rendered users/show.html.erb within layouts/application (Duration: 14.1ms | Allocations: 5868)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 49ms (Views: 23.8ms | ActiveRecord: 7.5ms | Allocations: 18068)


Started GET "/dashboard" for ::1 at 2025-07-10 00:50:29 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (2.1ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (2.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 15.7ms | Allocations: 5794)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 51ms (Views: 21.1ms | ActiveRecord: 11.6ms | Allocations: 18198)


Started GET "/organizations/1" for ::1 at 2025-07-10 00:50:30 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (1.1ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 20.9ms | Allocations: 7738)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 49ms (Views: 27.7ms | ActiveRecord: 6.1ms | Allocations: 19978)


Started GET "/organizations/1/analytics" for ::1 at 2025-07-10 00:50:31 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[36mOrganizationAnalytics Create (1.1ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 19:50:31.190735"], ["created_at", "2025-07-09 19:50:31.191906"], ["updated_at", "2025-07-09 19:50:31.191906"]]
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-07-02 19:50:31.200658')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:18:in `generate_daily_report'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-09 19:50:31.203811')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:19:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (created_at >= '2025-06-09 19:50:31.206515')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:20:in `generate_daily_report'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:21:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("users"."age") FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:22:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[36mOrganizationAnalytics Update (0.5ms)[0m  [1m[33mUPDATE "organization_analytics" SET "active_users_7_days" = $1, "active_users_30_days" = $2, "new_members_this_month" = $3, "members_by_role" = $4, "average_age" = $5, "minor_percentage" = $6, "updated_at" = $7 WHERE "organization_analytics"."id" = $8[0m  [["active_users_7_days", 2], ["active_users_30_days", 2], ["new_members_this_month", 2], ["members_by_role", "{\"participant\":4,\"moderator\":2,\"admin\":2}"], ["average_age", "31.5"], ["minor_percentage", "0.0"], ["updated_at", "2025-07-09 19:50:31.216456"], ["id", 13]]
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-30 00:00:00"], ["created_at", "2025-07-06 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:45:in `generate_weekly_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-30 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:46:in `generate_weekly_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[36mOrganizationAnalytics Create (0.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 19:50:31.236720"], ["report_period", "weekly"], ["period_start", "2025-06-30 00:00:00"], ["period_end", "2025-07-06 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 19:50:31.242019"], ["updated_at", "2025-07-09 19:50:31.242019"]]
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 1], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["created_at", "2025-06-01 00:00:00"], ["created_at", "2025-06-30 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:65:in `generate_monthly_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-01 00:00:00')[0m  [["organization_id", 1]]
  ↳ app/models/organization_analytics.rb:66:in `generate_monthly_report'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[36mOrganizationAnalytics Create (0.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 1], ["total_members", 2], ["admin_count", 2], ["age_group_breakdown", "{\"child\":0,\"teen\":0,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-09 19:50:31.262218"], ["report_period", "monthly"], ["period_start", "2025-06-01 00:00:00"], ["period_end", "2025-06-30 23:59:59.999999"], ["active_members_count", 2], ["created_at", "2025-07-09 19:50:31.267480"], ["updated_at", "2025-07-09 19:50:31.267480"]]
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  Rendering organizations/analytics.html.erb within layouts/application
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 10]]
  ↳ app/views/organizations/analytics.html.erb:113
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:50:31.262218') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:50:31.262218') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.5ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:50:31.236720') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:50:31.236720') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:50:31.190735') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:50:31.190735') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.633124') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.633124') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.604138') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.604138') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.554973') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 19:35:42.554973') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.489241') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.489241') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.464490') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.464490') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.417000') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:45.417000') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.965289') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-09 18:57:42.965289') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  Rendered organizations/analytics.html.erb within layouts/application (Duration: 36.7ms | Allocations: 18810)
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 167ms (Views: 41.4ms | ActiveRecord: 34.4ms | Allocations: 78096)


Started GET "/organizations/1/members" for ::1 at 2025-07-10 00:50:32 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 1]]
  ↳ app/controllers/organizations_controller.rb:93:in `members'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 1], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.3ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2)[0m  [["user_id", 1], ["user_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 1], ["id", 2], ["id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.5ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2)[0m  [["child_id", 1], ["child_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 1], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 2], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 24.3ms | Allocations: 12286)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 65ms (Views: 32.0ms | ActiveRecord: 7.0ms | Allocations: 28886)


Started GET "/organizations/1/participation_rules" for ::1 at 2025-07-10 00:50:32 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.1ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/participation_rules.html.erb within layouts/application
  [1m[36mParticipationRule Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:17
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:32
  [1m[36mParticipationRule Load (0.7ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 1], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:99
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:117
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 1], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:118
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."requires_parental_consent" = $2[0m  [["organization_id", 1], ["requires_parental_consent", true]]
  ↳ app/views/organizations/participation_rules.html.erb:119
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."content_filtering_level" = $2[0m  [["organization_id", 1], ["content_filtering_level", "strict"]]
  ↳ app/views/organizations/participation_rules.html.erb:120
  Rendered organizations/participation_rules.html.erb within layouts/application (Duration: 19.0ms | Allocations: 7226)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 50ms (Views: 26.3ms | ActiveRecord: 5.9ms | Allocations: 19929)


Started GET "/organizations" for ::1 at 2025-07-10 00:50:33 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 27.2ms | Allocations: 12218)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 53ms (Views: 31.4ms | ActiveRecord: 6.0ms | Allocations: 22666)


Started GET "/parental_consents" for ::1 at 2025-07-10 00:50:34 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 9]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 1]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 6.5ms | Allocations: 3253)
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 25ms (Views: 18.6ms | ActiveRecord: 1.9ms | Allocations: 12330)


Started GET "/" for ::1 at 2025-07-10 17:48:55 +0500
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 22ms (ActiveRecord: 0.0ms | Allocations: 3249)


Started GET "/users/sign_in" for ::1 at 2025-07-10 17:48:56 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 1.3ms | Allocations: 651)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 14.7ms | Allocations: 4353)
Completed 200 OK in 100ms (Views: 56.5ms | ActiveRecord: 15.9ms | Allocations: 34882)


Started POST "/users/sign_in" for ::1 at 2025-07-10 17:49:36 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"mbsgOdeJm+ugG0jExCNOD1ZG7RbOitYYumIgEWmBNbDZox2eSvCWMzqp1zfKNzAiIyiQ/BfRdbOwcL43wcmhtA==", "user"=>{"email"=>"admin@techcorp.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@techcorp.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/
Completed 303 See Other in 370ms (ActiveRecord: 7.5ms | Allocations: 8373)


Started GET "/" for ::1 at 2025-07-10 17:49:36 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mOrganization Load (3.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (6.7ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 1], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (2.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (9.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 1]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (3.8ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 1], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (4.9ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 1], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 1], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 52.8ms | Allocations: 21663)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 1], ["role_id", 1], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 206ms (Views: 49.1ms | ActiveRecord: 55.8ms | Allocations: 82155)


Started GET "/sign_out" for ::1 at 2025-07-10 17:49:40 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (8.5ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-10 12:49:40.856406"], ["id", 1]]
  [1m[35m (0.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 25ms (ActiveRecord: 10.4ms | Allocations: 7215)


Started GET "/" for ::1 at 2025-07-10 17:49:40 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms | Allocations: 345)


Started GET "/users/sign_in" for ::1 at 2025-07-10 17:49:40 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.3ms | Allocations: 154)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 2.6ms | Allocations: 1427)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.0ms | Allocations: 6186)


Started POST "/users/sign_in" for ::1 at 2025-07-10 17:50:02 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"W1/6XX8pMKHPPO5dhL/5J6Gu4cHdktoEDXZ+1lhRZW2Je/9AaHAq9vf62k/U3GTiJsQMzR2sexbDkMXagWZ03w==", "user"=>{"email"=>"teen1@youthacademy.org", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "teen1@youthacademy.org"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-10 12:50:02.457134"], ["updated_at", "2025-07-10 12:50:02.457550"], ["id", 6]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 321ms (ActiveRecord: 6.9ms | Allocations: 7887)


Started GET "/" for ::1 at 2025-07-10 17:50:02 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.6ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 6], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "teen"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 12.0ms | Allocations: 5165)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 6], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 57ms (Views: 21.6ms | ActiveRecord: 6.6ms | Allocations: 28156)


Started GET "/sign_out" for ::1 at 2025-07-10 17:50:09 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 6], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-10 12:50:09.035566"], ["id", 6]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 22ms (ActiveRecord: 7.6ms | Allocations: 6925)


Started GET "/" for ::1 at 2025-07-10 17:50:09 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms | Allocations: 333)


Started GET "/users/sign_in" for ::1 at 2025-07-10 17:50:09 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.3ms | Allocations: 154)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 2.2ms | Allocations: 1418)
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms | Allocations: 6170)


Started POST "/users/sign_in" for ::1 at 2025-07-10 17:52:41 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"dJeF4Cf6vDxY4qvTaM4d5GK2ZxJlAmbhHxQ7obFP+R27SxyZONdSXAw3aUc8oBdEgTIZiK7fUTzjDtiMCTBVeA==", "user"=>{"email"=>"teacher@youthacademy.org", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "teacher@youthacademy.org"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-10 12:52:41.435585"], ["updated_at", "2025-07-10 12:52:41.436077"], ["id", 3]]
  [1m[35m (5.7ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 319ms (ActiveRecord: 6.9ms | Allocations: 7896)


Started GET "/" for ::1 at 2025-07-10 17:52:41 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.2ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 3], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 12.2ms | Allocations: 5791)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 37ms (Views: 22.0ms | ActiveRecord: 4.9ms | Allocations: 18087)


Started GET "/parental_consents" for ::1 at 2025-07-10 17:52:46 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.2ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 3]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 8]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 3]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 12.8ms | Allocations: 5142)
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 23.4ms | ActiveRecord: 1.9ms | Allocations: 15705)


Started GET "/organizations" for ::1 at 2025-07-10 17:52:47 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 25.4ms | Allocations: 12708)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 45ms (Views: 30.3ms | ActiveRecord: 5.8ms | Allocations: 24212)


Started GET "/organizations/2/participation_rules" for ::1 at 2025-07-10 17:52:48 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.9ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/participation_rules.html.erb within layouts/application
  [1m[36mParticipationRule Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:17
  [1m[36mParticipationRule Load (0.2ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/participation_rules.html.erb:32
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 2], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:99
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/participation_rules.html.erb:117
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 2], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:118
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."requires_parental_consent" = $2[0m  [["organization_id", 2], ["requires_parental_consent", true]]
  ↳ app/views/organizations/participation_rules.html.erb:119
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."content_filtering_level" = $2[0m  [["organization_id", 2], ["content_filtering_level", "strict"]]
  ↳ app/views/organizations/participation_rules.html.erb:120
  Rendered organizations/participation_rules.html.erb within layouts/application (Duration: 22.2ms | Allocations: 8149)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 50ms (Views: 28.2ms | ActiveRecord: 5.5ms | Allocations: 21163)


Started GET "/organizations/2/members" for ::1 at 2025-07-10 17:52:49 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.6ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (7.6ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 2]]
  ↳ app/controllers/organizations_controller.rb:93:in `members'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2, $3)[0m  [["user_id", 3], ["user_id", 6], ["user_id", 8]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2)[0m  [["id", 4], ["id", 5]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2, $3)[0m  [["child_id", 3], ["child_id", 6], ["child_id", 8]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.7ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 3], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 6], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 8], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 47.8ms | Allocations: 23333)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 92ms (Views: 52.1ms | ActiveRecord: 16.4ms | Allocations: 40129)


Started GET "/organizations/2/analytics" for ::1 at 2025-07-10 17:52:49 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 2], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[36mOrganizationAnalytics Create (5.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["organization_id", 2], ["total_members", 3], ["admin_count", 2], ["age_group_breakdown", "{\"child\":1,\"teen\":1,\"young_adult\":0,\"adult\":1,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-10 12:52:49.864714"], ["created_at", "2025-07-10 12:52:49.872559"], ["updated_at", "2025-07-10 12:52:49.872559"]]
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-07-03 12:52:49.882849')[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:18:in `generate_daily_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-10 12:52:49.887033')[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:19:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (created_at >= '2025-06-10 12:52:49.889548')[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:20:in `generate_daily_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:21:in `generate_daily_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT AVG("users"."age") FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:22:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[36mOrganizationAnalytics Update (0.4ms)[0m  [1m[33mUPDATE "organization_analytics" SET "active_users_7_days" = $1, "active_users_30_days" = $2, "new_members_this_month" = $3, "members_by_role" = $4, "average_age" = $5, "minor_percentage" = $6, "updated_at" = $7 WHERE "organization_analytics"."id" = $8[0m  [["active_users_7_days", 3], ["active_users_30_days", 3], ["new_members_this_month", 3], ["members_by_role", "{\"participant\":4,\"admin\":2}"], ["average_age", "22.3"], ["minor_percentage", "66.67"], ["updated_at", "2025-07-10 12:52:49.901294"], ["id", 16]]
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 2], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["created_at", "2025-06-30 00:00:00"], ["created_at", "2025-07-06 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:45:in `generate_weekly_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-30 00:00:00')[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:46:in `generate_weekly_report'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[36mOrganizationAnalytics Create (0.5ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 2], ["total_members", 3], ["admin_count", 2], ["age_group_breakdown", "{\"child\":1,\"teen\":1,\"young_adult\":0,\"adult\":1,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-10 12:52:49.919954"], ["report_period", "weekly"], ["period_start", "2025-06-30 00:00:00"], ["period_end", "2025-07-06 23:59:59.999999"], ["active_members_count", 3], ["created_at", "2025-07-10 12:52:49.925063"], ["updated_at", "2025-07-10 12:52:49.925063"]]
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 2], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 2], ["created_at", "2025-06-01 00:00:00"], ["created_at", "2025-06-30 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:65:in `generate_monthly_report'
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-01 00:00:00')[0m  [["organization_id", 2]]
  ↳ app/models/organization_analytics.rb:66:in `generate_monthly_report'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[36mOrganizationAnalytics Create (0.4ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 2], ["total_members", 3], ["admin_count", 2], ["age_group_breakdown", "{\"child\":1,\"teen\":1,\"young_adult\":0,\"adult\":1,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-10 12:52:49.948201"], ["report_period", "monthly"], ["period_start", "2025-06-01 00:00:00"], ["period_end", "2025-06-30 23:59:59.999999"], ["active_members_count", 3], ["created_at", "2025-07-10 12:52:49.953246"], ["updated_at", "2025-07-10 12:52:49.953246"]]
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  Rendering organizations/analytics.html.erb within layouts/application
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 10]]
  ↳ app/views/organizations/analytics.html.erb:113
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:52:49.948201') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:52:49.948201') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:52:49.919954') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:52:49.919954') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:52:49.864714') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:52:49.864714') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  Rendered organizations/analytics.html.erb within layouts/application (Duration: 13.2ms | Allocations: 7294)
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 149ms (Views: 21.2ms | ActiveRecord: 33.8ms | Allocations: 66963)


Started GET "/organizations/2" for ::1 at 2025-07-10 17:52:50 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 22.0ms | Allocations: 8537)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 3], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 48ms (Views: 29.2ms | ActiveRecord: 3.7ms | Allocations: 20914)


Started GET "/sign_out" for ::1 at 2025-07-10 17:52:53 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-10 12:52:53.557183"], ["id", 3]]
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 28ms (ActiveRecord: 2.9ms | Allocations: 6890)


Started GET "/" for ::1 at 2025-07-10 17:52:53 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms | Allocations: 347)


Started GET "/users/sign_in" for ::1 at 2025-07-10 17:52:53 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.4ms | Allocations: 154)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 3.4ms | Allocations: 1426)
Completed 200 OK in 11ms (Views: 9.5ms | ActiveRecord: 0.0ms | Allocations: 6195)


Started POST "/users/sign_in" for ::1 at 2025-07-10 17:53:13 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"n7YhCMoa68I3H3fWLNjLIaY8Jd96z5LlhwboAC6m9Wk8MiowqTPf+hbWLeLBEtMa7KTVrct7W08cZEpEoYyFWw==", "user"=>{"email"=>"child1@youthacademy.org", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "child1@youthacademy.org"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-10 12:53:13.923111"], ["updated_at", "2025-07-10 12:53:13.923450"], ["id", 8]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 317ms (ActiveRecord: 5.2ms | Allocations: 7865)


Started GET "/" for ::1 at 2025-07-10 17:53:13 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.6ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 8], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "child"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 11.0ms | Allocations: 5160)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 38ms (Views: 19.5ms | ActiveRecord: 4.5ms | Allocations: 17919)


Started GET "/parental_consents" for ::1 at 2025-07-10 17:53:17 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 8], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
Redirected to http://localhost:3000/parental_consents/2
Completed 302 Found in 6ms (ActiveRecord: 0.7ms | Allocations: 2806)


Started GET "/parental_consents/2" for ::1 at 2025-07-10 17:53:17 +0500
Processing by ParentalConsentsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mParentalConsent Load (0.7ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/parental_consents_controller.rb:112:in `set_parental_consent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:48:in `parent'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  ↳ app/models/parental_consent.rb:52:in `child'
  Rendering parental_consents/show.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/views/parental_consents/show.html.erb:69
  Rendered parental_consents/show.html.erb within layouts/application (Duration: 8.2ms | Allocations: 3998)
  [1m[36mCACHE Organization Load (0.0ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 28ms (Views: 17.2ms | ActiveRecord: 2.3ms | Allocations: 15705)


Started GET "/organizations" for ::1 at 2025-07-10 17:53:18 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1[0m  [["id", 2]]
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 11.2ms | Allocations: 4552)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 29ms (Views: 17.9ms | ActiveRecord: 2.7ms | Allocations: 14875)


Started GET "/organizations/2" for ::1 at 2025-07-10 17:53:18 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"2"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 14.2ms | Allocations: 7584)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 39ms (Views: 20.7ms | ActiveRecord: 3.7ms | Allocations: 19643)


Started GET "/dashboard" for ::1 at 2025-07-10 17:53:19 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 2], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" = $1 LIMIT $2[0m  [["child_id", 8], ["LIMIT", 1]]
  ↳ app/models/user.rb:98:in `parental_consent'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 2]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 2], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 2], ["age_group", "child"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 10.5ms | Allocations: 5160)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 8], ["role_id", 4], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 41ms (Views: 20.1ms | ActiveRecord: 4.7ms | Allocations: 17917)


Started GET "/sign_out" for ::1 at 2025-07-10 17:53:42 +0500
Processing by Users::SessionsController#destroy as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 8], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", nil], ["updated_at", "2025-07-10 12:53:42.113818"], ["id", 8]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 19ms (ActiveRecord: 7.3ms | Allocations: 6897)


Started GET "/" for ::1 at 2025-07-10 17:53:42 +0500
Processing by DashboardController#index as HTML
Completed 401 Unauthorized in 1ms (ActiveRecord: 0.0ms | Allocations: 337)


Started GET "/users/sign_in" for ::1 at 2025-07-10 17:53:42 +0500
Processing by Users::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_links.html.erb (Duration: 0.2ms | Allocations: 154)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 1426)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms | Allocations: 6201)


Started POST "/users/sign_in" for ::1 at 2025-07-10 17:53:46 +0500
Processing by Users::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"QHbcbwU/Bzt8OarNJUkGNfvureLYaIyv7KEIcN0xbO20te5jNBEdD/b6ubhfH/ua9AgYjgmL3Mmv3QEquzIbvA==", "user"=>{"email"=>"parent1@example.com", "password"=>"[FILTERED]", "remember_me"=>"1"}, "commit"=>"Log in"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "parent1@example.com"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "remember_created_at" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["remember_created_at", "2025-07-10 12:53:47.262059"], ["updated_at", "2025-07-10 12:53:47.262410"], ["id", 4]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/
Completed 303 See Other in 318ms (ActiveRecord: 7.3ms | Allocations: 7864)


Started GET "/" for ::1 at 2025-07-10 17:53:47 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 3]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 3]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 4], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 3], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 3], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 13.2ms | Allocations: 5786)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 35ms (Views: 19.2ms | ActiveRecord: 4.7ms | Allocations: 18092)


Started GET "/parental_consents" for ::1 at 2025-07-10 17:53:50 +0500
Processing by ParentalConsentsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  Rendering parental_consents/index.html.erb within layouts/application
  [1m[36mParentalConsent Load (0.4ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1[0m  [["parent_id", 4]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 6]]
  ↳ app/views/parental_consents/index.html.erb:24
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1[0m  [["id", 4]]
  ↳ app/views/parental_consents/index.html.erb:24
  Rendered parental_consents/index.html.erb within layouts/application (Duration: 8.3ms | Allocations: 3241)
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 30ms (Views: 19.8ms | ActiveRecord: 2.6ms | Allocations: 12302)


Started GET "/organizations" for ::1 at 2025-07-10 17:53:51 +0500
Processing by OrganizationsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/index.html.erb within layouts/application
  [1m[36mOrganization Load (0.5ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations"[0m
  ↳ app/views/organizations/index.html.erb:7
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 1]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 1], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 1]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 2]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 2], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 2]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/index.html.erb within layouts/application (Duration: 26.4ms | Allocations: 12219)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 46ms (Views: 30.9ms | ActiveRecord: 6.0ms | Allocations: 22656)


Started GET "/organizations/3/participation_rules" for ::1 at 2025-07-10 17:53:51 +0500
Processing by OrganizationsController#participation_rules as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendering organizations/participation_rules.html.erb within layouts/application
  [1m[36mParticipationRule Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/views/organizations/participation_rules.html.erb:17
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/views/organizations/participation_rules.html.erb:32
  [1m[36mParticipationRule Load (0.4ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 3], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:99
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/views/organizations/participation_rules.html.erb:117
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2[0m  [["organization_id", 3], ["enabled", true]]
  ↳ app/views/organizations/participation_rules.html.erb:118
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."requires_parental_consent" = $2[0m  [["organization_id", 3], ["requires_parental_consent", true]]
  ↳ app/views/organizations/participation_rules.html.erb:119
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."content_filtering_level" = $2[0m  [["organization_id", 3], ["content_filtering_level", "strict"]]
  ↳ app/views/organizations/participation_rules.html.erb:120
  Rendered organizations/participation_rules.html.erb within layouts/application (Duration: 15.1ms | Allocations: 7218)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 41ms (Views: 21.6ms | ActiveRecord: 4.4ms | Allocations: 19930)


Started GET "/organizations/3/members" for ::1 at 2025-07-10 17:53:53 +0500
Processing by OrganizationsController#members as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") AS count_id, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles"."role_id" LEFT OUTER JOIN "parental_consents" ON "parental_consents"."child_id" = "users"."id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 3]]
  ↳ app/controllers/organizations_controller.rb:93:in `members'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  Rendering organizations/members.html.erb within layouts/application
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mUserRole Load (0.4ms)[0m  [1m[34mSELECT "user_roles".* FROM "user_roles" WHERE "user_roles"."user_id" IN ($1, $2, $3, $4)[0m  [["user_id", 4], ["user_id", 5], ["user_id", 7], ["user_id", 9]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."id" IN ($1, $2, $3)[0m  [["id", 6], ["id", 7], ["id", 8]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mParentalConsent Load (0.3ms)[0m  [1m[34mSELECT "parental_consents".* FROM "parental_consents" WHERE "parental_consents"."child_id" IN ($1, $2, $3, $4)[0m  [["child_id", 4], ["child_id", 5], ["child_id", 7], ["child_id", 9]]
  ↳ app/views/organizations/members.html.erb:25
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 4], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.5ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 5], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.4ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 7], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" INNER JOIN "user_roles" ON "roles"."id" = "user_roles"."role_id" WHERE "user_roles"."user_id" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3[0m  [["user_id", 9], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/views/organizations/members.html.erb:42
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  Rendered organizations/members.html.erb within layouts/application (Duration: 33.0ms | Allocations: 18568)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 76ms (Views: 39.1ms | ActiveRecord: 9.2ms | Allocations: 35161)


Started GET "/organizations/3/analytics" for ::1 at 2025-07-10 17:53:54 +0500
Processing by OrganizationsController#analytics as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.2ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 3], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[36mOrganizationAnalytics Create (0.5ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8) RETURNING "id"[0m  [["organization_id", 3], ["total_members", 4], ["admin_count", 2], ["age_group_breakdown", "{\"child\":1,\"teen\":1,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-10 12:53:54.531670"], ["created_at", "2025-07-10 12:53:54.533023"], ["updated_at", "2025-07-10 12:53:54.533023"]]
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization.rb:71:in `generate_analytics'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-07-03 12:53:54.540479')[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:18:in `generate_daily_report'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-10 12:53:54.543881')[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:19:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (created_at >= '2025-06-10 12:53:54.546547')[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:20:in `generate_daily_report'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) AS count_all, roles.name AS roles_name FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 GROUP BY roles.name[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:21:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT AVG("users"."age") FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:22:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:23:in `generate_daily_report'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[36mOrganizationAnalytics Update (0.5ms)[0m  [1m[33mUPDATE "organization_analytics" SET "active_users_7_days" = $1, "active_users_30_days" = $2, "new_members_this_month" = $3, "members_by_role" = $4, "average_age" = $5, "minor_percentage" = $6, "updated_at" = $7 WHERE "organization_analytics"."id" = $8[0m  [["active_users_7_days", 4], ["active_users_30_days", 4], ["new_members_this_month", 4], ["members_by_role", "{\"participant\":6,\"moderator\":2,\"admin\":2}"], ["average_age", "25.5"], ["minor_percentage", "50.0"], ["updated_at", "2025-07-10 12:53:54.557294"], ["id", 19]]
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:17:in `generate_daily_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 3], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["created_at", "2025-06-30 00:00:00"], ["created_at", "2025-07-06 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:45:in `generate_weekly_report'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-30 00:00:00')[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:46:in `generate_weekly_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[36mOrganizationAnalytics Create (0.9ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 3], ["total_members", 4], ["admin_count", 2], ["age_group_breakdown", "{\"child\":1,\"teen\":1,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-10 12:53:54.581493"], ["report_period", "weekly"], ["period_start", "2025-06-30 00:00:00"], ["period_end", "2025-07-06 23:59:59.999999"], ["active_members_count", 4], ["created_at", "2025-07-10 12:53:54.589160"], ["updated_at", "2025-07-10 12:53:54.589160"]]
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:36:in `generate_weekly_report'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 0], ["age", 12]]
  ↳ app/models/organization.rb:37:in `member_count_by_age_group'
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 13], ["age", 17]]
  ↳ app/models/organization.rb:38:in `member_count_by_age_group'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 18], ["age", 25]]
  ↳ app/models/organization.rb:39:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 26], ["age", 64]]
  ↳ app/models/organization.rb:40:in `member_count_by_age_group'
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."age" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["age", 65], ["age", 120]]
  ↳ app/models/organization.rb:41:in `member_count_by_age_group'
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:82:in `calculate_participation_rate'
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2[0m  [["organization_id", 3], ["name", "participant"]]
  ↳ app/models/organization.rb:85:in `calculate_participation_rate'
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND "users"."created_at" BETWEEN $2 AND $3[0m  [["organization_id", 3], ["created_at", "2025-06-01 00:00:00"], ["created_at", "2025-06-30 23:59:59.999999"]]
  ↳ app/models/organization_analytics.rb:65:in `generate_monthly_report'
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(DISTINCT "users"."id") FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND (user_roles.created_at >= '2025-06-01 00:00:00')[0m  [["organization_id", 3]]
  ↳ app/models/organization_analytics.rb:66:in `generate_monthly_report'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[36mOrganizationAnalytics Create (0.5ms)[0m  [1m[32mINSERT INTO "organization_analytics" ("organization_id", "total_members", "admin_count", "age_group_breakdown", "participation_rate", "generated_at", "report_period", "period_start", "period_end", "active_members_count", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING "id"[0m  [["organization_id", 3], ["total_members", 4], ["admin_count", 2], ["age_group_breakdown", "{\"child\":1,\"teen\":1,\"young_adult\":0,\"adult\":2,\"senior\":0}"], ["participation_rate", "100.0"], ["generated_at", "2025-07-10 12:53:54.615662"], ["report_period", "monthly"], ["period_start", "2025-06-01 00:00:00"], ["period_end", "2025-06-30 23:59:59.999999"], ["active_members_count", 4], ["created_at", "2025-07-10 12:53:54.624989"], ["updated_at", "2025-07-10 12:53:54.624989"]]
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ↳ app/models/organization_analytics.rb:56:in `generate_monthly_report'
  Rendering organizations/analytics.html.erb within layouts/application
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 10]]
  ↳ app/views/organizations/analytics.html.erb:113
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:53:54.615662') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:53:54.615662') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:53:54.581493') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:53:54.581493') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mOrganizationAnalytics Load (0.4ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:53:54.531670') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  [1m[36mCACHE OrganizationAnalytics Load (0.0ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 AND (generated_at < '2025-07-10 12:53:54.531670') ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/models/organization_analytics.rb:78:in `growth_rate'
  Rendered organizations/analytics.html.erb within layouts/application (Duration: 11.5ms | Allocations: 6397)
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 155ms (Views: 18.5ms | ActiveRecord: 32.7ms | Allocations: 65662)


Started GET "/organizations/3" for ::1 at 2025-07-10 17:53:55 +0500
Processing by OrganizationsController#show as HTML
  Parameters: {"id"=>"3"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:106:in `set_organization'
  [1m[36mOrganization Load (0.3ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mRole Load (0.2ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/organizations_controller.rb:12:in `show'
  Rendering organizations/show.html.erb within layouts/application
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/views/organizations/show.html.erb:26
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 3]]
  ↳ app/views/organizations/show.html.erb:32
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 3]]
  ↳ app/views/organizations/show.html.erb:40
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/views/organizations/show.html.erb:46
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."organization_id" = $1 ORDER BY "users"."created_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 5]]
  ↳ app/views/organizations/show.html.erb:78
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/views/organizations/show.html.erb:94
  [1m[36mParticipationRule Load (0.3ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 3]]
  ↳ app/views/organizations/show.html.erb:107
  Rendered organizations/show.html.erb within layouts/application (Duration: 18.8ms | Allocations: 7854)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 47ms (Views: 25.2ms | ActiveRecord: 4.4ms | Allocations: 20093)


Started GET "/dashboard" for ::1 at 2025-07-10 17:53:55 +0500
Processing by DashboardController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 4], ["LIMIT", 1]]
  [1m[36mOrganization Load (0.4ms)[0m  [1m[34mSELECT "organizations".* FROM "organizations" WHERE "organizations"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ↳ app/models/user.rb:102:in `organization'
  [1m[36mOrganizationAnalytics Load (0.3ms)[0m  [1m[34mSELECT "organization_analytics".* FROM "organization_analytics" WHERE "organization_analytics"."organization_id" = $1 ORDER BY "organization_analytics"."generated_at" DESC LIMIT $2[0m  [["organization_id", 3], ["LIMIT", 1]]
  ↳ app/controllers/dashboard_controller.rb:11:in `index'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1[0m  [["organization_id", 3]]
  ↳ app/models/organization.rb:28:in `member_count'
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" INNER JOIN "user_roles" ON "user_roles"."user_id" = "users"."id" INNER JOIN "user_roles" "user_roles_users_join" ON "user_roles_users_join"."user_id" = "users"."id" INNER JOIN "roles" ON "roles"."id" = "user_roles_users_join"."role_id" WHERE "users"."organization_id" = $1 AND "roles"."name" = $2 AND "roles"."resource_type" = $3 AND "roles"."resource_id" = $4[0m  [["organization_id", 3], ["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3]]
  ↳ app/models/organization.rb:32:in `admin_count'
  Rendering dashboard/index.html.erb within layouts/application
  [1m[36mRole Load (0.3ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mUserRole Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age < 18)[0m  [["organization_id", 3]]
  ↳ app/views/dashboard/index.html.erb:75
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users" WHERE "users"."organization_id" = $1 AND (age >= 18)[0m  [["organization_id", 3]]
  ↳ app/views/dashboard/index.html.erb:81
  [1m[36mParentalConsent Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "parental_consents" WHERE "parental_consents"."parent_id" = $1 AND "parental_consents"."approved" = $2 LIMIT $3[0m  [["parent_id", 4], ["approved", false], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:122
  [1m[36mParticipationRule Exists? (0.3ms)[0m  [1m[34mSELECT 1 AS one FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."enabled" = $2 LIMIT $3[0m  [["organization_id", 3], ["enabled", true], ["LIMIT", 1]]
  ↳ app/views/dashboard/index.html.erb:139
  [1m[36mParticipationRule Load (0.2ms)[0m  [1m[34mSELECT "participation_rules".* FROM "participation_rules" WHERE "participation_rules"."organization_id" = $1 AND "participation_rules"."age_group" = $2 LIMIT $3[0m  [["organization_id", 3], ["age_group", "adult"], ["LIMIT", 1]]
  ↳ app/models/organization.rb:46:in `participation_rules_for_age_group'
  Rendered dashboard/index.html.erb within layouts/application (Duration: 11.3ms | Allocations: 5786)
  [1m[36mCACHE Role Load (0.0ms)[0m  [1m[34mSELECT "roles".* FROM "roles" WHERE "roles"."name" = $1 AND "roles"."resource_type" = $2 AND "roles"."resource_id" = $3 LIMIT $4[0m  [["name", "admin"], ["resource_type", "Organization"], ["resource_id", 3], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:31:in `has_role?'
  [1m[36mCACHE UserRole Exists? (0.0ms)[0m  [1m[34mSELECT 1 AS one FROM "user_roles" WHERE "user_roles"."user_id" = $1 AND "user_roles"."role_id" = $2 LIMIT $3[0m  [["user_id", 4], ["role_id", 6], ["LIMIT", 1]]
  ↳ app/models/user_role.rb:32:in `has_role?'
Completed 200 OK in 38ms (Views: 18.4ms | ActiveRecord: 4.6ms | Allocations: 18097)


